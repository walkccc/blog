[{"content":"","date":"19 May 2025","externalUrl":null,"permalink":"/tags/macos/","section":"Tags","summary":"","title":"MacOS","type":"tags"},{"content":"","date":"19 May 2025","externalUrl":null,"permalink":"/","section":"Peng-Yu's Blog","summary":"","title":"Peng-Yu's Blog","type":"page"},{"content":"","date":"19 May 2025","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","date":"19 May 2025","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"After completely reinstalling macOS, here\u0026rsquo;s how I like to set up a clean, powerful, and personalized development environment.\n1. Initial macOS Configuration # ğŸ§‘â€ğŸ’» User Account Setup # Create a temporary Admin user Name it Temp Login with Temp, then: Rename your home folder from jay to Jay Open System Settings \u0026gt; Users \u0026amp; Groups Change Account Name: jay â†’ Jay Change Home Directory: /Users/jay â†’ /Users/Jay Log out and log in as Jay Delete Temp user âš¡ï¸ System \u0026amp; Workflow Enhancements # Install Magnet from the App Store (window manager) Increase keyboard repeat speed: defaults write NSGlobalDomain KeyRepeat -int 1 defaults write NSGlobalDomain InitialKeyRepeat -int 20 (You may need to log out and log back in for these changes to take full effect.) (Optional) Set a password shorter than 4 characters 2. Essential Command-Line Tools # ğŸº Homebrew # /bin/bash -c \u0026#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\u0026#34; (Follow the on-screen instructions, which may include adding Homebrew to your PATH.)\nInstall essential packages:\nbrew install --cask iterm2 brew install --cask visual-studio-code brew install --cask cursor brew install --cask anaconda brew install --cask raycast brew install gh Zsh and Zim Framework # Configure Zsh Environment for Zim: Add the following lines to ~/.zshenv. This tells Zim where to store its configuration files, adhering to the XDG Base Directory specification.\necho \u0026#39;export ZDOTDIR=$HOME/.config/zsh\u0026#39; \u0026gt;\u0026gt; ~/.zshenv echo \u0026#39;export ZIM_HOME=$ZDOTDIR/.zim\u0026#39; \u0026gt;\u0026gt; ~/.zshenv (If ~/.zshenv doesn\u0026rsquo;t exist, these commands will create it.)\nInstall Zim:\ncurl -fsSL https://raw.githubusercontent.com/zimfw/install/master/install.zsh | zsh 3. Dotfiles \u0026amp; Terminal Customization # Personalize your shell environment with custom configurations.\nâš™ï¸ Install Dotfiles # Clone and set up your preferred dotfiles. This example uses walkccc\u0026rsquo;s dotfiles.\ncd ~ curl https://codeload.github.com/walkccc/dotfiles/tar.gz/main | tar -xz --strip=1 dotfiles-main rm README.md LICENSE .gitignore âœ¨ Apply Changes \u0026amp; Theme # Restart your terminal (iTerm2) to apply the new Zsh and Zim configurations. This will also likely trigger the installation of themes like Powerlevel10k if it\u0026rsquo;s part of your dotfiles or Zim setup. Follow any on-screen prompts from Powerlevel10k to configure your prompt.\n4. Development Environment Setup # ğŸ Python (via Anaconda) # Initialize Conda for Zsh:\n/opt/homebrew/anaconda3/bin/conda init zsh (The path might vary slightly depending on your Homebrew prefix if not default. /opt/homebrew/anaconda3/bin/conda init zsh for Apple Silicon usually)\nRestart Terminal: After restarting, Conda\u0026rsquo;s configuration should be active in $ZDOTDIR/.zshrc.\nğŸŸ© Node (via Node Version Switcher - NVS) # Install NVS This method installs NVS following the XDG Base Directory specification for NVS_HOME.\nexport NVS_HOME=\u0026#34;$HOME/.local/share/nvs\u0026#34; git clone https://github.com/jasongin/nvs \u0026#34;$NVS_HOME\u0026#34; . \u0026#34;$NVS_HOME/nvs.sh\u0026#34; install Add NVS to your PATH: To make nvs available in every new shell session, add the following to your Zsh configuration file.\n# The following line should already be present in your Zsh configuration file: # $ bat $ZDOTDIR/init/nvs.sh # export NVS_HOME=\u0026#34;$HOME/.local/share/nvs\u0026#34; # [ -s \u0026#34;$NVS_HOME/nvs.sh\u0026#34; ] \u0026amp;\u0026amp; . \u0026#34;$NVS_HOME/nvs.sh\u0026#34; Install Node.js versions as needed using nvs add \u0026lt;version\u0026gt; and nvs use \u0026lt;version\u0026gt;.\n5. Productivity \u0026amp; Developer Tools # ğŸ“ Text Editor: LunarVim # Install the pre-requisites:\nbrew install neovim Install LunarVim by running the command in LunarVim\u0026rsquo;s website.\nğŸš€ Launcher \u0026amp; Productivity: Raycast # Configure Raycast to enhance your productivity.\nSet up Quicklinks. Enable Clipboard History. Link any custom Scripts (e.g., those downloaded with your dotfiles) to Raycast\u0026rsquo;s script command directory. A common location for user scripts is ~/.config/raycast/commands. You might need to create this directory and symlink or copy your scripts there. 6. System Customizations # ğŸ” Finder Customization # # Show full path in Finder defaults write com.apple.finder _FXShowPosixPathInTitle -bool true; killall Finder # Hide full path in Finder defaults write com.apple.finder _FXShowPosixPathInTitle -bool false; killall Finder ","date":"19 May 2025","externalUrl":null,"permalink":"/posts/tech/whats-in-my-macos/","section":"Posts","summary":"","title":"What's in my macOS?","type":"posts"},{"content":"These are handy tools and tweaks that aren\u0026rsquo;t required for a clean install, but can improve workflow or handle specific tasks.\nğŸ”§ Git Utilities # Revert repo to a previous commit\nRebase without changing timestamps:\ngit rebase -i --root # Change pick â†’ edit GIT_COMMITTER_DATE=\u0026#34;YYYY-MM-DDTHH:MM:SS\u0026#34; git commit --amend --date=\u0026#34;YYYY-MM-DDTHH:MM:SS\u0026#34; git rebase --committer-date-is-author-date \u0026lt;NEW_SHA\u0026gt; ğŸ›  Other Custom Tweaks # Remove .DS_Store files:\ndefaults write com.apple.desktopservices DSDontWriteNetworkStores -bool TRUE sudo find / -name .DS_Store -exec rm {} + Make Dock appear instantly:\ndefaults write com.apple.Dock autohide-delay -float 0.0001; killall Dock # To reset: defaults delete com.apple.Dock autohide-delay; killall Dock ğŸ Python Environment (Anaconda) # Create and use an environment:\nconda create --name MKDOCS python=3.9 conda activate MKDOCS pip install mkdocs mkdocs-material Remove environment:\nconda remove --name MKDOCS --all conda deactivate ","date":"17 May 2025","externalUrl":null,"permalink":"/posts/tech/macos-dev-tips/","section":"Posts","summary":"","title":"macOS Developer Tips","type":"posts"},{"content":"","date":"2 April 2023","externalUrl":null,"permalink":"/tags/aws/","section":"Tags","summary":"","title":"AWS","type":"tags"},{"content":" Learn how to set up AWS CLI for your AWS account in a few easy steps! This comprehensive guide walks you through enabling IAM Identity Center, adding a user to your AWS account, installing and configuring AWS CLI V2, and setting AWS environment variables. You\u0026rsquo;ll even get to test your AWS CLI skills by creating a role using AWS CLI V2. Follow along and become an AWS CLI pro!\nEnable IAM identity center # Sign in as root user Go to IAM Identity Center console. Under Enable IAM Identity Center, click Enable. Click Create AWS organization in the popup window. Add User in IAM Identity Center # Click Add user in \u0026ldquo;IAM Identity Center \u0026gt; Users\u0026rdquo;. Fill the required information. Review the information and click Add user in the bottom right. You can also create a group for this user if you like. Hooray! The user \u0026ldquo;buildwebapp2023\u0026rdquo; was successfully added! Finally, navigate to your mail and click Accept invitation. Add User to an AWS account # In \u0026ldquo;IAM Identity Center \u0026gt; AWS Organizations: AWS accounts\u0026rdquo;, click one of the organization then click Assign users or groups. Select the newly added user and \u0026ldquo;AdministratorAccess\u0026rdquo; permission sets (We\u0026rsquo;ll need to create a role programmatically it later). Review and click Submit. Wait a second\u0026hellip; The user with selected permission sets is assigned to this AWS account! Install and Configure AWS CLI V2 # Install AWS CLI via Homebrew\nbrew install awscli Specify an alternate location to store AWS config and credentials following the XDG Base Directory. I use zsh, so I\u0026rsquo;ll do\necho \u0026#39;export AWS_CONFIG_FILE=$HOME/.config/aws/config export AWS_SHARED_CREDENTIALS_FILE=$HOME/.config/aws/credentials\u0026#39; \u0026gt; ~/.config/zsh/init/aws.zshrc Generate the config file for sso-session and profile by grabbing the information in \u0026ldquo;IAM Identity Center \u0026gt; Dashboard\u0026rdquo;, clicking the AWS access portal URL under Settings summary, and copying and pasting the SSO Start URL and SSO Region to proper fields. Alternatively, use the aws configure sso wizard.\nAWS_ACCOUNT_ID=123456789012 echo \u0026#39;[sso-session my-sso] sso_start_url = https://d-9067911059.awsapps.com/start# sso_region = us-east-1 sso_registration_scopes = sso:account:access [profile admin-access] sso_session = my-sso sso_account_id = \u0026#39;${AWS_ACCOUNT_ID}\u0026#39; sso_role_name = AdministratorAccess region = us-east-1 output = yaml\u0026#39; \u0026gt; ~/.config/aws/config Set AWS environment variables # To set AWS environment variables, copy the export statements from the same place as above.\necho \u0026#39;export AWS_ACCESS_KEY_ID=\u0026#34;XXX\u0026#34; export AWS_SECRET_ACCESS_KEY=\u0026#34;YYY\u0026#34; export AWS_SESSION_TOKEN=\u0026#34;ZZZ\u0026#34;\u0026#39; \u0026gt;\u0026gt; ~/.config/zsh/init/aws.zshrc Test your AWS CLI # To test your AWS CLI, you can create a role and attach a policy for it programmatically. The command is:\nAWS_ACCOUNT_ID=123456789012 echo \u0026#39;{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;Federated\u0026#34;: \u0026#34;arn:aws:iam::\u0026#39;${AWS_ACCOUNT_ID}\u0026#39;:oidc-provider/token.actions.githubusercontent.com\u0026#34; }, \u0026#34;Action\u0026#34;: \u0026#34;sts:AssumeRoleWithWebIdentity\u0026#34;, \u0026#34;Condition\u0026#34;: { \u0026#34;StringEquals\u0026#34;: { \u0026#34;token.actions.githubusercontent.com:aud\u0026#34;: \u0026#34;sts.amazonaws.com\u0026#34; }, \u0026#34;StringLike\u0026#34;: { \u0026#34;token.actions.githubusercontent.com:sub\u0026#34;: \u0026#34;repo:walkccc/go-boilerplate:*\u0026#34; } } } ] }\u0026#39; \u0026gt; GitHubActionsRole.json aws iam create-role --role-name GitHubActionsRole --assume-role-policy-document file://GitHubActionsRole.json aws iam attach-role-policy --role-name GitHubActionsRole --policy-arn arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryPowerUser rm GitHubActionsRole.json Congrats, you\u0026rsquo;ve succesfully created a role via AWS CLI V2! ğŸ™‚\nFinally, when you\u0026rsquo;re done, clean up the resources you created:\naws iam detach-role-policy --role-name GitHubActionsRole --policy-arn arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryPowerUser aws iam delete-role --role-name GitHubActionsRole References # Step 1: Enable IAM Identity Center - AWS IAM Identity Center (successor to AWS Single Sign-On) Token provider configuration with automatic authentication refresh for AWS IAM Identity Center (successor to AWS Single Sign-On) ","date":"2 April 2023","externalUrl":null,"permalink":"/posts/tech/aws-cli/","section":"Posts","summary":"","title":"AWS CLI","type":"posts"},{"content":"","date":"18 September 2022","externalUrl":null,"permalink":"/tags/algorithms/","section":"Tags","summary":"","title":"Algorithms","type":"tags"},{"content":"","date":"18 September 2022","externalUrl":null,"permalink":"/tags/leetcode/","section":"Tags","summary":"","title":"LeetCode","type":"tags"},{"content":" æ­£åœ¨æŠŠä¹‹å‰æ²’åšçš„ä¸€äº›é¡Œåšä¸€åšï¼Œå‰›å¥½çœ‹åˆ°äº†é€™é¡Œæ»¿æœ‰è¶£çš„ï¼Œå› æ­¤æ±ºå®šå¯«ç¯‡æ–‡ç« ã€‚\né¡Œç›®é€£çµã€‚\n\\(O(n^3)\\) æ•¸å­¸è§£ # é€™é¡Œå°±ä¸è¨è«–æš´åŠ›è§£äº†ï¼Œé€™é¡Œç”¨åˆ°äº†ä¸€äº›åœ‹ä¸­æ•™çš„æ•¸å­¸çŸ¥è­˜ï¼Œåšèµ·ä¾†é‚„æ˜¯æ»¿æœ‰è¶£çš„ã€‚\nä»¥ä¸‹æä¾›çš„è§£æ³•ï¼š\næšèˆ‰æ‰€æœ‰é»å° \\((P, Q)\\)ï¼Œæ‰¾å‡ºèˆ‡ \\(P\\)ã€\\(Q\\) ç›¸åˆ‡çš„å…©å€‹åœ“ \\(C_1\\) å’Œ \\(C_2\\)ï¼š\\(O(n^2)\\) æª¢æŸ¥å…¶å®ƒæ‰€æœ‰é»æ˜¯å¦åœ¨ \\(C_1\\) å’Œ \\(C_2\\) é–“ï¼š\\(O(n)\\) ç¸½æ™‚é–“ï¼š\\(O(n^3)\\) æ‰€ä»¥æ­¤é¡Œçš„é‡é»åœ¨æ–¼æ±‚å‡ºåœ“å¿ƒ \\(C_1\\) å’Œ \\(C_2\\)ã€‚\nç¤ºæ„åœ– # ç”±åœ–ä¸­å¯å¾—ï¼š\n$$ \\begin{aligned} \\alpha_1 + \\theta \u0026amp;= \\alpha_2 + \\theta = 90^{\\circ} \\\\ \\alpha_1 \u0026amp;= \\alpha_2 \\\\ \\vartriangle AMC_1 \u0026amp; \\cong \\vartriangle BQP \\end{aligned} $$\nåˆçŸ¥ï¼š\n$$ \\begin{aligned} \\tan\\alpha_1 \u0026amp;= \\tan\\alpha_2 = \\frac{P_y - Q_y}{Q_x - P_x} \\\\ \\alpha_1 \u0026amp;= \\alpha_2 = \\arctan (\\frac{P_y - Q_y}{Q_x - P_x}) \\end{aligned} $$\nåˆç”±ä¸‰è§’å½¢çš„ç‰¹æ€§å¯å¾—ï¼š\n$$ \\begin{aligned} C_1.x \u0026amp;= M.x - d \\cdot \\sin\\alpha_1 \\\\ C_1.y \u0026amp;= M.y - d \\cdot \\cos\\alpha_1 \\\\ C_2.x \u0026amp;= M.x + d \\cdot \\sin\\alpha_1 \\\\ C_2.y \u0026amp;= M.x + d \\cdot \\sin\\alpha_1 \\end{aligned} $$\nå‰©ä¸‹çš„å°±æ˜¯å…·é«”ä»£ç¢¼å¯¦ç¾å•¦ï¼\n","date":"18 September 2022","externalUrl":null,"permalink":"/posts/algo/lc-1453/","section":"Posts","summary":"","title":"LeetCode 1453. Maximum Number of Darts Inside of a Circular Dartboard","type":"posts"},{"content":" ç¬¬ä¸€ç¯‡è¨˜éŒ„ç®—æ³•çš„æ–‡ç« ï¼Œä¾†ä»‹ç´¹ä¸‹æ–°å­¸åˆ°çš„ç®—æ³•ï¼šDigit DPã€‚\næš´åŠ›è§£ # é¡Œç›®æ¨¡ç‰ˆä¸€èˆ¬æœƒé•·çš„åƒé€™æ¨£ï¼šçµ¦å®šå€é–“ \\([L, R]\\) å’Œä¸€å€‹å‡½æ•¸ \\(f(x) \\to \\{\\texttt{True}, \\texttt{False}\\}\\)ï¼Œå•åœ¨ \\([L, R]\\) ä¹‹é–“çš„æ­£æ•´æ•¸ï¼Œæ»¿è¶³ \\(f(x)\\) çš„æ•¸é‡æœ‰å¤šå°‘ï¼Ÿ\nç¾åœ¨æˆ‘å€‘å¯ä»¥å¸¶å…¥ä¸€å€‹çœŸå¯¦çš„ä¾‹å­ï¼Œåœ¨ \\([L = 19, R = 9999]\\) å€é–“ï¼Œæ¯ä¸€ä½æ•¸çš„ç¸½åˆ ç‚º \\(k = 23\\) çš„æ•¸å­—å…±æœ‰å¹¾å€‹ï¼Ÿ\næš´åŠ›è§£ç”¨ C++ ä»£ç¢¼æ¼”ç¤ºå¦‚ä¸‹ï¼š\nbool DigitSum(int num) { int sum = 0; while (num \u0026gt; 0) { sum += num % 10; num /= 10; } return sum; } int GetSatisfiedCount(int l, int r, int k) { int satisfied_count = 0; for (int num = l; num \u0026lt;= r; ++num) if (DigitSum(num) == k) ++satisfied_count; return satisfied_count; } constexpr int start = 19; constexpr int end = 9\u0026#39;999; constexpr int k = 23; std::cout \u0026lt;\u0026lt; GetSatisfiedCount(start, end, k); è€Œé€™æ¨£çš„æ™‚é–“è¤‡é›œåº¦ç‚ºï¼š\n$$ O(r - l) \\cdot O(|\\texttt{f}|) = O(r - l) \\cdot \\log(\\texttt{num}), $$\nè‹¥å€é–“å¤§å°éå¸¸å¤§ï¼Œä¾‹å¦‚ \\([0, 10^9]\\)ï¼Œæš´åŠ›è§£ä¸å¤ªç¾å¯¦ã€‚\né‡æ–°æ€è€ƒ # é‚£éº¼ï¼Œè©²å¦‚ä½•å„ªåŒ–å‘¢ï¼Ÿé¦–å…ˆå®šç¾©ï¼š\n\\(S(R, k)\\)ï¼šåœ¨ \\([0, R]\\) æ»¿è¶³ \\(f(x) = k\\) çš„æ•¸é‡ï¼Œå…¶ä¸­ \\(f(x)\\) ç‚º \\(x\\) çš„æ•¸å­—ç¸½åˆã€‚\nå¯ä»¥æ¨å‡ºï¼Œ\\(S(R) - S(L - 1)\\) ç‚ºåœ¨ \\([L, R]\\) æ»¿è¶³ \\(f(x) \\to \\texttt{True}\\) çš„æ•¸é‡ã€‚ä¸¦ä¸”è§€å¯Ÿå› ç‚º \\(R = 9999\\)ï¼Œä»»ä½•æ»¿è¶³æ¢ä»¶çš„å€¼æœ€å¤šåªæœƒæœ‰ \\(n = 4\\) ä½æ•¸ã€‚ç¾åœ¨æˆ‘å€‘è©¦è‘—å°‡é¡Œç›®è®Šæˆå­å•é¡Œï¼šè‹¥åœ¨ç¬¬ä¸€ä½å¡«ä¸Š i _ _ _ï¼Œæœƒç™¼ç¾ åœ¨å‰©ä¸‹çš„ \\(n - 1 = 3\\) ä½æ•¸ä¸­ï¼Œå‰©ä¸‹ \\(k - i\\) çš„é¤˜é¡ã€‚\nç¾åœ¨æˆ‘å€‘å®šç¾© \\(dp(n, k)\\)ï¼šåœ¨ \\(n\\) ä½æ•¸ç•¶ä¸­ï¼Œæ»¿è¶³ \\(f\\) çš„æ•¸é‡ï¼Œå¯å¾—ï¼š\n$$ dp(n, k) = \\sum_{i = 0}^9 dp(n - 1, k - i). $$\nä¸¦ä¸”å®šç¾©çµ‚æ­¢æ¢ä»¶ï¼š\\(dp(0, 0) = 1\\)ã€‚\nä½†é€™å‡ºç¾äº†ä¸€å€‹å•é¡Œï¼Œè‹¥ \\(R\\) ä¸ç­‰æ–¼ \\(10^n - 1\\) çš„å€¼ï¼Œé‚£éº¼ä¸èƒ½è€ƒæ…®æ‰€æœ‰ \\(n\\) ç‚ºæ•¸çš„æ•¸å­—ï¼Œèˆ‰ä¾‹ä¾†èªªï¼Œè‹¥ \\(R = 3456\\)ï¼Œå‰‡æˆ‘å€‘ä¸èƒ½è€ƒæ…®æ‰€æœ‰ 4 ä½æ•¸çš„å­—ï¼Œ æ›´å…·é«”çš„èªªï¼Œä»»ä½•åœ¨ \\([3457, 9999]\\) å€é–“æ»¿è¶³æ¢ä»¶çš„æ•¸å­—éƒ½ä¸æ‡‰è¢«è¨ˆç®—é€²å»ï¼Œå¿…éœ€åŠ  å…¥é©ç•¶çš„æ¢ä»¶åˆ¤æ–·ã€‚\næˆ‘å€‘å¯ä»¥åŠ å…¥ä¸€å€‹ isTight çš„å¸ƒæ—å€¼ï¼Œåˆ¤æ–·ç•¶å‰é€™ä¸€ä½æ•¸æ‡‰ä¸æ‡‰è©²éµå®ˆé–‹å€é–“çš„é‚Šç•Œè¦ ç¯„ï¼Œé‡æ–°å®šç¾© \\(dp(n, k, \\texttt{isTight})\\)ï¼Œå°æ–¼é¡Œç›® \\(S(R, k) = S(3456, k)\\)ï¼Œæˆ‘å€‘å¯ä»¥é‡å°åœ¨é¦–ä½æ•¸å¡«ä¸Šä¸åŒæ•¸å­—åˆ†æˆä»¥ä¸‹ä¸‰ç¨®æƒ…å½¢è¨è«–ï¼š\nå¡«ä¸Š \\(\u0026lt; 3\\) çš„æ•¸å­—ï¼Œé‚£éº¼å‰©ä¸‹çš„ 3 ä½æ•¸ä¸å†éœ€è¦éµå®ˆé‚Šç•Œè¦ç¯„ï¼Œå¯ä»¥è‡ªç”±çš„å¡«ä¸Š \\([0, 999]\\) è€Œä¸æœƒè¶…é \\(3456\\)ã€‚ å¡«ä¸Š \\(3\\)ï¼Œé‚£éº¼å‰©ä¸‹çš„ä¸‰ä½æ•¸é‚„æ˜¯å¿…éœ€éµå®ˆé‚Šç•Œè¦ç¯„ \\([0, 456]\\)ã€‚ é¡¯ç„¶åœ°ï¼Œæˆ‘å€‘ä¸èƒ½åœ¨ç¬¬ä¸€ä½æ•¸å¡«ä¸Š \\(\u0026gt; 3\\) çš„ä»»ä½•æ•¸å­—ã€‚ $$ \\begin{aligned} S(R, k) \u0026amp;= S(3456, k) \\\\ \u0026amp;= dp(4, k, \\texttt{isTight = True}) \\\\ \u0026amp;= \\sum_{i = 0}^2 dp(4 - 1, k - i, \\texttt{isTight = False}) \\\\ \u0026amp;+ dp(4 - 1, k - 3, \\texttt{isTight = True}). \\end{aligned} $$\n","date":"27 August 2022","externalUrl":null,"permalink":"/posts/algo/digit-dp/","section":"Posts","summary":"","title":"Digit DP","type":"posts"},{"content":"","date":"24 August 2022","externalUrl":null,"permalink":"/tags/tech/","section":"Tags","summary":"","title":"Tech","type":"tags"},{"content":"å„è¡Œå„æ¥­éƒ½æœ‰è¨±å¤šå±¬æ–¼ä»–å€‘è‡ªå·±çš„è¡Œè©±ï¼Œç§‘æŠ€æ¥­ç•¶ç„¶ä¹Ÿä¸ä¾‹å¤–ï¼Œé‚„è¨˜å¾—åˆä¾†ç¾åœ‹æ™‚ï¼Œè½åˆ°å„ ç¨®äº”èŠ±å…«é–€çš„ç¸®å¯«ï¼Œç¸½æ˜¯è¦ºå¾—å¿ƒå¥½ç´¯ï¼Œç„¡æ³•è·Ÿä¸Šå¤§å®¶ï¼Œæœ¬æ–‡å°±è®“ç­†è€…ä¾†åˆ—èˆ‰å¹¾å€‹æ‰“å­—å¸¸ç”¨çš„ ç¸®å¯«å§ï¼\nè·ä½ # DSï¼ˆData Scientistï¼‰ï¼šè³‡æ–™ç§‘å­¸å®¶ EMï¼ˆEngineering Managerï¼‰ï¼šå·¥ç¨‹ä¸»ç®¡ PE (Principle Engineerï¼‰ï¼šé¦–å¸­å·¥ç¨‹å¸« PM (Product Manager or Program Managerï¼‰ï¼šç”¢å“ç¶“ç†æˆ–å°ˆæ¡ˆç¶“ç† SA (Solutions Architectï¼‰ï¼šæ–¹æ¡ˆæ¶æ§‹å¸« SWE (Software Engineerï¼‰ï¼šè»Ÿé«”å·¥ç¨‹å¸« TPMï¼ˆTechnical Program Managerï¼‰ï¼šæŠ€è¡“å°ˆæ¡ˆç¶“ç† ç§‘æŠ€æ¥­å¸¸ç”¨ # NGï¼ˆNew Gradï¼‰ï¼šç•¢æ¥­ç”Ÿ PIPï¼ˆPerformance Improvement Planï¼‰ï¼šç©æ•ˆæ”¹å–„è¨ˆç•« TC (Total Compensation)ï¼šè–ªæ°´ç¸½åŒ…ï¼Œé€šå¸¸æŒ‡çš„åŒ…æ‹¬æœ¬è–ªï¼ˆbaseï¼‰ã€è‚¡ç¥¨ï¼ˆRSUï¼‰ã€ç°½å­— è²»ï¼ˆsign-on bonusï¼‰å’Œå¹´çµ‚çé‡‘ï¼ˆbonusï¼‰ TMï¼ˆTeam Matchï¼‰ YOEï¼ˆYears of Experienceï¼‰ å·¥ä½œå¸¸ç”¨ # LGTM (Looks Good to Me) SG (Sounds Good) ç¾åœ‹ # NRAï¼ˆNonresident Alienï¼‰ RAï¼ˆResident Alienï¼‰ å°ˆæ¥­ # CEï¼ˆComputer Engineeringï¼‰ï¼šé›»è…¦å·¥ç¨‹ CSï¼ˆComputer Scienceï¼‰ï¼šé›»è…¦ç§‘å­¸ ECEï¼ˆElectrical Computing Engineeringï¼‰ï¼šé›»æ©Ÿé›»è…¦å·¥ç¨‹ EEï¼ˆElectrical Engineeringï¼‰ï¼šé›»æ©Ÿå·¥ç¨‹ ","date":"24 August 2022","externalUrl":null,"permalink":"/posts/tech/tech-terms/","section":"Posts","summary":"","title":"ç§‘æŠ€äººçš„å„ç¨®ç¸®å¯«","type":"posts"},{"content":"","date":"17 August 2022","externalUrl":null,"permalink":"/tags/git/","section":"Tags","summary":"","title":"Git","type":"tags"},{"content":" å‰è¨€ # Git èƒ½å¤ æœ‰æ•ˆåœ°å¹«åŠ©ä½ ç‚ºä¸€ä»½å°ˆæ¡ˆå¯«ä¸‹å°æ‡‰çš„æ—¥èªŒã€‚è‰¯å¥½ã€æ˜ç¢ºçš„æäº¤æ­·å²ï¼ˆCommit Historyï¼‰èƒ½è®“æ—¥å¾Œå›ä¾†è¿½è¹¤ä»£ç¢¼æ™‚ï¼Œäº‹åŠåŠŸå€ï¼Œå› æ­¤ç­†è€…èªç‚ºå­¸ç¿’æœ‰æ•ˆåœ°ä½¿ç”¨ Gitï¼Œå°¤å…¶ æ˜¯ rebase é€™å€‹åŠŸèƒ½æ˜¯å°¤ç‚ºé‡è¦çš„ã€‚\nåœ¨çµ‚ç«¯æ©Ÿä¸­è¼¸å…¥ï¼š\ngit rebase --help å°±èƒ½çœ‹åˆ°è¨±å¤š git rebase çš„ç”¨æ³•ï¼Œæœ¬æ–‡å°‡æœƒå°ˆæ³¨åœ¨ç­†è€…æœ€å¸¸ä½¿ç”¨çš„å¹¾å€‹æŒ‡ä»¤ä¸­ï¼Œä¸¦è«‡è«‡ å¦‚ä½•é«˜æ•ˆåœ°æ•´ç†æäº¤æ­·å²ã€‚\næ‰‹æŠŠæ‰‹ç¯„ä¾‹ # ç¯„ä¾‹æœƒå¸¶è®€è€…å¯¦éš›çš„æ“ä½œ git rebase çš„ç”¨æ³•ï¼Œä¸¦ä¸”æ‰€æœ‰æŒ‡ä»¤è¨­çš†èƒ½è¤‡è£½è²¼ä¸Šã€‚ æœ¬ç¯„ä¾‹å‡è¨­è®€è€…æœ‰ä¸€å®šçš„ git åŸºç¤ã€‚ æ­£æ–‡é–‹å§‹ # é¦–å…ˆï¼Œå»ºç«‹æˆ‘å€‘çš„æ¸¬è©¦å·¥ä½œç’°å¢ƒ git-rebase-demoï¼Œä»¥ä¸‹æ‰€æœ‰æ“ä½œéƒ½æœƒåœ¨æ­¤è·¯å¾‘ä¸‹å®Œæˆï¼š\nmkdir ~/git-rebase-demo \u0026amp;\u0026amp; cd $_ git init æ–°å¢å¸¶æœ‰éŒ¯åˆ¥å­—çš„ A.txt ä¸¦æäº¤ï¼ˆcommitï¼‰A.txtï¼š\necho \u0026#39;I am fil A.\u0026#39; \u0026gt; A.txt git add A.txt git commit -m \u0026#39;Create A.txt\u0026#39; æ–°å¢æª”æ¡ˆ B.txt ä¸¦æäº¤ B.txtï¼š\necho \u0026#39;I am file B.\u0026#39; \u0026gt; B.txt git add B.txt git commit -m \u0026#39;Create B.txt\u0026#39; æŸ¥çœ‹æ­·å²è¨˜éŒ„ï¼š\ngit log --oneline def4567 (HEAD -\u0026gt; main) Create B.txt abc1234 Create A.txt ä»¥ä¸‹æœƒç”¨ def4567 å’Œ abc1234 æŒ‡ä»£ï¼Œè®€è€…è«‹è‡ªè¡Œå¸¶æ›ã€‚\nç¾åœ¨æˆ‘å€‘å¸Œæœ›èƒ½ä¿®æ”¹ A.txt ä¸­çš„éŒ¯åˆ¥å­—ï¼Œåˆä¸å¸Œæœ›å› æ­¤å¢åŠ ä¸€å€‹ç¯€é»ï¼Œå°±åªæ˜¯å› ç‚ºä¸€æ™‚ ç–å¿½ã€‚å…¶ä¸­ä¸€å€‹æ–¹æ³•æ˜¯é€é git checkout abc1234 ä¿®æ”¹ï¼Œè€Œç­†è€…å°‡ä»‹ç´¹ä¸€ç¨®æ›´ç°¡å–®çš„æ–¹ å¼ã€‚\næ³¨æ„ï¼šæ­¤æ–¹æ³•åªé©ç”¨æ–°çš„æäº¤ç¯€é»ï¼ˆdef4567ï¼‰ä¸ä¾è³´èˆŠçš„æäº¤ç¯€é»ï¼ˆabc1234ï¼‰çš„æƒ… æ³ã€‚\né¦–å…ˆï¼Œä¿®æ­£éŒ¯åˆ¥å­—ï¼š\nsed -i \u0026#39;s/fil/file/\u0026#39; A.txt # Linux sed -i \u0026#39;\u0026#39; \u0026#39;s/fil/file/\u0026#39; A.txt # macOS é—œéµä¸€æ­¥ï¼Œå…ˆä¸ç®¡é †åºå°éŒ¯ï¼Œåœ¨æ­¤æäº¤ä¿®æ”¹ï¼š\ngit add A.txt git commit -m \u0026#39;Put anything here\u0026#39; é‡é ­æˆ²ï¼Œé€²æ­¥ git rebase ä»‹é¢ï¼š\ngit rebase -i --root ä½ æœƒçœ‹åˆ°\npick abc1234 Create A.txt pick def4567 Create B.txt pick xyz0001 Put anything here åœ¨ vim åº•ä¸‹ï¼Œé‡æ–°èª¿æ•´æäº¤é †åºï¼Œä¸¦å°‡ xyz0001 çš„ pick æ”¹ç‚º fixupï¼ˆä¹Ÿå¯ç¸®å¯«æˆ fï¼‰ï¼Œé€™éº¼ä¸€ä¾† xyz0001 å°±æœƒå’Œ abc1234 åˆä½µç”¢ç”Ÿä¸€å€‹ æ–°çš„ç¯€é»ç”¢ç”Ÿæ–°çš„å“ˆå¸Œå€¼ï¼Œå› ç‚ºä¿®æ”¹äº†èˆŠçš„ç¯€é»ï¼Œdef4567 çš„ç¯€é»ä¹Ÿæœƒè‡ªå‹•ç”Ÿæˆä¸€ä»½æ–°çš„ å“ˆå¸Œå€¼ã€‚\npick abc1234 Create A.txt fixup xyz0001 Put anything here pick def4567 Create B.txt ZZ é€€å‡º vimï¼Œä¸¦å†æ¬¡æŸ¥çœ‹æäº¤æ­·å²ï¼š\ngit log --oneline 6a674ea (HEAD -\u0026gt; main) Create B.txt 5a584af Create A.txt å¯ä»¥çœ‹åˆ°æˆ‘å€‘å„ªé›…åœ°å°‡æäº¤æ­·å²è®Šä¹¾æ·¨äº†ï¼\nçµèª # git rebase çš„åŠŸèƒ½éå¸¸å¼·å¤§ï¼Œå·²ç¶“æ˜¯ç­†è€…ç”Ÿæ´»èˆ‡å·¥ä½œä¸­ä¸å¯æˆ–ç¼ºçš„é‡è¦å·¥å…·ï¼Œæœ¬æ–‡æ¼”ç¤º äº†ä¸€å€‹ç°¡å–®çš„ä¾‹å­ï¼Œé™¤äº† fixup å¤–ï¼Œå…¶å®ƒé‚„æœ‰åƒ reword, edit ç­‰ç­‰æ–¹ä¾¿çš„åŠŸèƒ½ï¼Œ å°±æš«æ™‚ä¸åœ¨é€™ç¯‡æ–‡ç« ä¸­æåŠäº†ï¼\n","date":"17 August 2022","externalUrl":null,"permalink":"/posts/tech/git-rebase-tips/","section":"Posts","summary":"","title":"Git Rebase å¦™ç”¨","type":"posts"},{"content":"","date":"16 August 2022","externalUrl":null,"permalink":"/tags/hugo/","section":"Tags","summary":"","title":"Hugo","type":"tags"},{"content":" é‡è¦‹ Hugo # ä»Šå¤©ä¾†è«‡è«‡ Hugo ç’°å¢ƒè¨­å®šæ™‚æ‰€é‡åˆ°çš„ä¸€äº›å•é¡ŒåŠè§£æ±ºè¾¦æ³•ã€‚\né å‚™ç’°å¢ƒ # è¦é–‹å§‹ä½¿ç”¨ Hugoï¼Œè‹¥æ‚¨çš„ç’°å¢ƒè·Ÿæˆ‘ä¸€æ¨£æ˜¯ macOS çš„è©±ï¼Œå¯ä»¥ä½¿ç”¨ å¥—ä»¶ç®¡ç†å·¥å…· Homebrewï¼šåœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ å¾Œï¼Œä¾¿æœƒé–‹å§‹ä¸‹è¼‰éœ€è¦çš„å¥—ä»¶ã€‚\nbrew install hugo è¨­å®šæœ¬åœ°ç«¯ # åˆå§‹åŒ–ä¸¦å‰µå»º Git å€‰åº« # REPO_NAME=blog hugo new site $REPO_NAME -f yaml cd $REPO_NAME git init git add . git commit -m \u0026#34;$ hugo new site blog -f yaml\u0026#34; ä½¿ç”¨ Git submodules æ–°å¢ä¸»é¡Œ # git submodule add --depth=1 https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod git submodule update --init --recursive git add . git commit -m \u0026#34;Add PaperMod submodule\u0026#34; ä¿®æ”¹é è¨­ config.yaml æª” # è¤‡è£½è²¼ä¸Š config.yamlã€‚\ngit add . git commit -m \u0026#34;Update default config.yaml\u0026#34; æ–°å¢å½™ç¸½ï¼ˆArchivesï¼‰ # echo \u0026#34;--- title: å½™ç¸½ layout: archives url: /archives/ summary: archives ---\u0026#34; \u0026gt; content/archives.md è¨­å®š GitHub Actions # è¤‡è£½è²¼ä¸Š .github/workflows/main.yaml\ngit add . git commit -m \u0026#34;Add GitHub Actions\u0026#34; è¨­å®š GitHub # æ–°å»ºä¸€å€‹ repository åç‚º blogã€‚\næ¨é€ä»£ç¢¼åˆ° GitHub ä¸Šã€‚\ngit remote add origin https://github.com/\u0026lt;GITHUB_USERNAME\u0026gt;/blog.git git push -u origin main é€™æ™‚ç¨ç­‰ç‰‡åˆ»ï¼Œå°±èƒ½åœ¨ä½ çš„åŸŸåçœ‹åˆ°ä½ çš„ç¶²ç«™äº†ï¼\n","date":"16 August 2022","externalUrl":null,"permalink":"/posts/tech/hugo/","section":"Posts","summary":"","title":"ç”¨ Hugo æ­å»ºï¼Œä¸¦ç”¨ GitHub Actions ä½ˆç½²ä½ çš„å€‹äººåšå®¢ï¼","type":"posts"},{"content":"","date":"14 July 2021","externalUrl":null,"permalink":"/tags/c++/","section":"Tags","summary":"","title":"C++","type":"tags"},{"content":"","date":"14 July 2021","externalUrl":null,"permalink":"/tags/java/","section":"Tags","summary":"","title":"Java","type":"tags"},{"content":" Example # C++ # lower_bound: iterator that points to the first (minimum) number \u0026gt;= target. upper_bound: iterator that points to the first (minimum) number \u0026gt; target. map\u0026lt;int, string\u0026gt; map; map[1] = \u0026#34;one\u0026#34;; map[2] = \u0026#34;two\u0026#34;; map[3] = \u0026#34;three\u0026#34;; map[5] = \u0026#34;five\u0026#34;; map[6] = \u0026#34;six\u0026#34;; // 1 2 3 5 6 map.lower_bound(0); // ^ map.upper_bound(0); // ^ // 1 2 3 5 6 map.lower_bound(4); // ^ map.upper_bound(4); // ^ // 1 2 3 5 6 map.lower_bound(5); // ^ map.upper_bound(5); // ^ // 1 2 3 5 6 map.lower_bound(6); // ^ map.upper_bound(6); // ^ // 1 2 3 5 6 map.lower_bound(7); // ^ (null) map.upper_bound(7); // ^ Java # ceilingEntry: return a (key, value), where key is the minimum number \u0026gt;= target.\nSimilar to lower_bound in C++.\nfloorEntry: return a (key, value), where key is the maximum number \u0026lt;= target.\nSimilar to prev(map.upper_bound(val)) in C++.\nMap\u0026lt;Integer, String\u0026gt; map = new TreeMap\u0026lt;\u0026gt;(); map.put(1, \u0026#34;one\u0026#34;); map.put(2, \u0026#34;two\u0026#34;); map.put(3, \u0026#34;three\u0026#34;); map.put(5, \u0026#34;five\u0026#34;); map.put(6, \u0026#34;six\u0026#34;); // 1 2 3 5 6 map.ceilingEntry(0); // ^ map.floorEntry(0); //^ (null) // 1 2 3 5 6 map.ceilingEntry(4); // ^ map.floorEntry(4); // ^ // 1 2 3 5 6 map.ceilingEntry(5); // ^ map.floorEntry(5); // ^ // 1 2 3 5 6 map.ceilingEntry(6); // ^ map.floorEntry(6); // ^ // 1 2 3 5 6 map.ceilingEntry(7); // ^ (null) map.floorEntry(7); // ^ ","date":"14 July 2021","externalUrl":null,"permalink":"/posts/tech/ordered-set/","section":"Posts","summary":"","title":"lower_bound and upper_bound vs floorEntry and ceilingEntry","type":"posts"},{"content":"","date":"26 May 2019","externalUrl":null,"permalink":"/tags/swift/","section":"Tags","summary":"","title":"Swift","type":"tags"},{"content":" Swift Style Guide # Updated for Swift 5.0\nThe goals are clarity, consistency and brevity, in that order.\nClarity at the point of use. Codes should always be consistent within one data set. Pay attention to spelling and case; most frequent problems are with abbreviations. Clarity is more important than brevity. Write a documentation comment. References # This guide mainly follows:\nSwift.org - API Design Guidelines raywenderlich/swift-style-guide Swift Style Guide Formatting # Column Limit # Swift code has a column limit of 100 characters. Except as noted below, any line that would exceed this limit must be line-wrapped as described in Line-Wrapping.\nExceptions:\nLines where obeying the column limit is not possible without breaking a meaningful unit of text that should not be broken (for example, a long URL in a comment). import statements. Code generated by another tool. Braces # In general, braces follow Kernighan and Ritchie (K\u0026amp;R) style for non-empty blocks with exceptions for Swift-specific constructs and rules:\nThere is no line break before the opening brace ({). There is a line break after the opening brace ({). There is a line break before the closing brace (}). There is a line break after the closing brace (}) iff that brace terminated a statement. Exceptions: } else { Semicolons # Semicolons (;) are not used. The only location where a semicolon may appear is inside a string literal or a comment.\nOne Statement Per Line # Line-Wrapping # Google gives clear picture here. The key point is to be careful to judge breakable or unbreakable units.\nIf the entire declaration, statement, or expression fits on one line, then do that. Comma-delimited lists are only laid out in one direction: horizontally or vertically. In other words, all elements must fit on the same line, or each element must be on its own line. A horizontally-oriented list does not contain any line breaks, even before the first element or after the last element. Except in control flow statements, a vertically-oriented list contains a line break before the first element and after each element. A continuation line starting with an unbreakable token sequence is indented at the same level as the original line. A continuation line that is part of a vertically-oriented comma-delimited list is indented exactly +2 from the original line. When an open curly brace ({) follows a line-wrapped declaration or expression, it is on the same line as the final continuation line unless that line is indented at +2 from the original line. In that case, the brace is placed on its own line, to avoid the continuation lines from blending visually with the body of the subsequent block. Some examples:\npublic func index\u0026lt;Elements: Collection, Element\u0026gt;( of element: Element, in collection: Elements ) -\u0026gt; Elements.Index? where Elements.Element == Element, Element: Equatable { // AVOID. for current in elements { // ... } } public func index\u0026lt;Elements: Collection, Element\u0026gt;( of element: Element, in collection: Elements ) -\u0026gt; Elements.Index? where Elements.Element == Element, Element: Equatable { // GOOD. for current in elements { // ... } } For declarations that contain a where clause followed by generic constraints, additional rules apply:\nIf the generic constraint list exceeds the column limit when placed on the same line as the return type, then a line break is first inserted before the where keyword and the where keyword is indented at the same level as the original line. If the generic constraint list still exceeds the column limit after inserting the line break above, then the constraint list is oriented vertically with a line break after the where keyword and a line break after the final constraint.\nFunctions Calls # The followings are both good, choose one and stick to it consistently.\n// good let index = index( of: veryLongElementVariableName, in: aCollectionOfElementsThatAlsoHappensToHaveALongName) // good let index = index( of: veryLongElementVariableName, in: aCollectionOfElementsThatAlsoHappensToHaveALongName ) Control Flow Statements # // bad if cond1() \u0026amp;\u0026amp; muchlongerCond2() \u0026amp;\u0026amp; shortCond3() { doSomething() } // good if cond1() \u0026amp;\u0026amp; muchlongerCond2() \u0026amp;\u0026amp; shortCond3() { doSomething() } // bad guard let value = returnValue() let value2 = returnValue2() else { doSomething() } // good guard let value = returnValue() let value2 = returnValue2() else { doSomething() } Other Expressions # When there are multiple continuation lines, indentation may be varied in increments of +2 as needed.\n// bad let result = anExpression + thatIsMadeUpOf * aLargeNumber + ofTerms / andTherefore % mustBeWrapped + ( andWeWill - keepMakingItLonger * soThatWeHave / aContrivedExample) // good let result = anExpression + thatIsMadeUpOf * aLargeNumber + ofTerms / andTherefore % mustBeWrapped + ( andWeWill - keepMakingItLonger * soThatWeHave / aContrivedExample) Horizontal Whitespace # Here is common convention in most languages.\n// bad if(x==0 \u0026amp;\u0026amp; y==0) || z==0 { } // good if (x == 0 \u0026amp;\u0026amp; y == 0) || z == 0 { } // bad let nonNegativeCubes = numbers.map { $0 * $0 * $0 }.filter { $0 \u0026gt;= 0 } // good let nonNegativeCubes = numbers.map { $0 * $0 * $0 } .filter { $0 \u0026gt;= 0 } // bad func sum(_ numbers: [Int])-\u0026gt;Int { // ... } // good func sum(_ numbers: [Int]) -\u0026gt; Int { // ... } // bad for number in 1 ... 5 { // ... } let substring = string[index ..\u0026lt; string.endIndex] // good for number in 1...5 { // ... } let substring = string[index..\u0026lt;string.endIndex] // bad let numbers = [1,2,3] let numbers = [1 ,2 ,3] let numbers = [1 , 2 , 3] // good let numbers = [1, 2, 3] // bad struct HashTable : Collection { // ... } struct AnyEquatable\u0026lt;Wrapped : Equatable\u0026gt; : Equatable { // ... } // good struct HashTable: Collection { // ... } struct AnyEquatable\u0026lt;Wrapped: Equatable\u0026gt;: Equatable { // ... } Horizontal Alignment # // bad struct DataPoint { var value: Int var primaryColor: UIColor } // good struct DataPoint { var value: Int var primaryColor: UIColor } Naming # Clarity # Include all the words needed to avoid ambiguity.\nProper labeling can effectively reduce ambiguity.\n// bad extension List { public mutating func remove(position: Index) -\u0026gt; Element } friends.remove(x) // unclear: are we removing x? // good extension List { public mutating func remove(at position: Index) -\u0026gt; Element } friends.remove(at: x) Omit needless words.\n// bad public mutating func removeElement(_ member: Element) -\u0026gt; Element? allViews.removeElement(cancelButton) // good public mutating func remove(_ member: Element) -\u0026gt; Element? allViews.remove(cancelButton) The naming removeElement is bad since the word Element doesn\u0026rsquo;t increase the readibility.\nOccasionally, it is necessary to repeat type information to avoid ambituity. However, in general it is better to use a word that describes a parameter\u0026rsquo;s role rather than its type.\nName variables, parameters, and associated types according to their roles.\n// bad var string = \u0026#34;Hello world\u0026#34; protocol ViewController { associatedtype ViewType: View } class ProductLine { func restock(from widgetFactory: WidetFactory) } // good var greeting = \u0026#34;Hello world\u0026#34; protocol ViewController { associatedtype ContentView: View } class ProductLine { func restock(from supplier: WidetFactory) } Compensate for weak type information.\nTo achieve clarity, precede each weakly typed parameter with a noun describing its role.\n// bad func add(_ observer: NSObject, for keyPath: String) grid.add(self, for: graphics) // vague // good func addObserver(_ observer: NSObject, forKeyPath path: String) grid.addObserver(self, forKeyPath: graphics) // clear Class prefixes are not needed.\n// bad class MAUICollectionViewController: UICollectionViewController { ... } // good class UICollectionViewController { ... } Why? Because what you\u0026rsquo;ve declared is declared in current module, which is your current target. And UICollectionViewController from UIKit is declared in UIKit module.\nHow to use it within current module?\n// good var customController = UICollectionViewController() // your custom class var uikitController = UIKit.UICollectionViewController() // class from UIKit When creating custom delegate methods, an unnamed first parameter should be the delegate source.\n// bad func didSelectName(namePicker: NamePickerViewController, name: String) func namePickerShouldReload() -\u0026gt; Bool // good func namePickerView(_ namePickerView: NamePickerView, didSelectName name: String) func namePickerViewShouldReload(_ namePickerView: NamePickerView) -\u0026gt; Bool Use type infered context to write shorter, clean code.\n// bad let selector = #selector(ViewController.viewDidLoad) view.backgroundColor = UIColor.yellow let toView = context.view(forKey: UITransitionContextViewKey.to) let view = UIView(frame: CGRect.zero) // good let selector = #selector(viewDidLoad) view.backgroundColor = .yellow let toView = context.view(forKey: .to) let view = UIView(frame: .zero) Generic type parameters should be descriptive, UpperCamelCase names.\nWhen a type name doesn\u0026rsquo;t have a meaningful relationship or role, use a traditional single uppercase letter such as T, U, or V.\n// bad struct Stack\u0026lt;T\u0026gt; { ... } func write\u0026lt;target: OutputStream\u0026gt;(to target: inout target) func swap\u0026lt;Thing\u0026gt;(_ a: inout Thing, _ b: inout Thing) // good struct Stack\u0026lt;Element\u0026gt; { ... } func write\u0026lt;Target: OutputStream\u0026gt;(to target: inout Target) func swap\u0026lt;T\u0026gt;(_ a: inout T, _ b: inout T) If a computed property is read-only, omit the get clause.\n// bad var area: Double { get { return width * height } } // good var area: Double { return width * height } Use of final can sometimes clarify your intent and is worth the cost. In the below example, Box has a particular purpose and customization in a derived class is not intended. Marking it final makes that clear.\nfinal class Box\u0026lt;T\u0026gt; { let value: T init(_ value: T) { self.value = value } } Fluency # Prefer grammatical English phrases.\n// bad x.insert(y, position: z) x.subViews(color: y) x.nounCapitalize() // good x.insert(y, at: z) // x, insert y at z x.subViews(havingColor: y) // x\u0026#39;s subviews having color y x.capitalizingNouns() // x, capitalizing nouns Begin names of factory methods with \u0026ldquo;make\u0026rdquo;.\n// bad newIterator() // good makeIterator() The first argument to initializer and factory methods calls should not form a phrase.\n// bad let foreground = Color(havingRGBValuesRed: 32, green: 64, andBlue: 128) let newPart = factory.makeWidget(havingGearCount: 42, andSpindleCount: 14) let ref = Link(to: destination) // good let foreground = Color(red: 32, green: 64, blue: 128) let newPart = factory.makeWidget(gears: 42, spindles: 14) let ref = Link(target: destination) Name Mutating/Nonmutating method pairs consistently.\nPrefer to name the nonmutating variant using the verb\u0026rsquo;s past participle (usually appending \u0026ldquo;ed\u0026rdquo;).\n// good // mutating mutating func reverse() x.reverse() // nonmutating: V-ed func reversed() -\u0026gt; Self let y = x.reversed() Name the nonmutating variant using the verb\u0026rsquo;s present participle, by appending \u0026ldquo;ing.\u0026rdquo;\n// good // mutating mutating func stripNewlines() s.stripNewlines() // nonmutating: V-ing func strippingNewlines() -\u0026gt; String let oneLine = t.strippingNewlines() When the operation is naturally described by a noun, use the noun for the nonmutating method and apply the \u0026ldquo;form\u0026rdquo; prefix to name its mutating counterpart.\n// good // mutating: form + N y.formUnion(z) c.formSuccessor(\u0026amp;i) // nonmutating x = y.union(z) j = c.successor(i) Uses of Boolean methods and properties should read as assertions about the receiver when the use is nonmutating.\n// good x.isEmpty line1.intersects(line2) Protocols that describe what something is should read as nouns (e.g. Collection).\nProtocols that describe a capability should be named using the suffixes able, ible, or ing (e.g. Equatable, ProgressReporting).\nThe names of other types, properties, variables, and constants should read as nouns.\nTerminology # Use US English spelling to match Apple\u0026rsquo;s API.\n// bad let colour = \u0026#34;yellow\u0026#34; // good let color = \u0026#34;yellow\u0026#34; Avoid obscure terms.\nDon\u0026rsquo;t say \u0026ldquo;epidermis\u0026rdquo; if \u0026ldquo;skin\u0026rdquo; will serve your purpose.\nAvoid abbreviations.\nHowever, don\u0026rsquo;t say verticalPositionOnUnitCircleAtOriginOfEndOfRadiusWithAngle(x) since sin(x) has been in common use.\nConventions # General Conventinos # Document the complexity of any computed property that is not O(1).\nPrefer methods and properties to free functions.\n// When there\u0026#39;s no obvious self min(x, y, z) // When the function is an unconstrained generic print(x) // When function syntax is part of the established domain notation sin(x) Follow case convention.\nNames of types and protocols are UpperCamelCase. Everything else if lowerCamelCase. Acronyms and initialisms that commonly appear as all upper case in American English should be uniformly up- or down-cased according to case conventions:\n// good var utf8Bytes: [UTF8.CodeUnit] var isRepresentableAsASCII = true var userSMTPServer: SecureSMTPServer Methods can share a base name.\nOverloading is good if the methods do essentially the same things.\nThe following three all do the same things:\n// good extension Shape { func contains(_ other: Point) -\u0026gt; Bool { ... } func contains(_ other: Shape) -\u0026gt; Bool { ... } func contains(_ other: LineSegment) -\u0026gt; Bool { ... } } And since geometric types and collections are separate domains, this is also fine in the same program:\n// good extension Collection where Element: Equatable { func contains(_ sought: Element) -\u0026gt; Bool { ... } } However, these index methods have different semantics, and should have been named differently:\n// bad extension Database { // Rebuilds the database\u0026#39;s search index func index() { ... } // Returns the `n`th row in the given table. func index(_ n: Int, inTable: TableID) -\u0026gt; TableRow { ... } } Avoid \u0026ldquo;overloading on return type\u0026rdquo;:\n// bad extension Box { func value() -\u0026gt; Int? { ... } func value() -\u0026gt; String? { ... } } Parameters # Choose parameter names to serve documentation.\n// bad // Return an `Array` containing the elements of `self` // that satisfy `includedInResult`. func filter(_ includedInResult: (Element) -\u0026gt; Bool) -\u0026gt; [Generator.Element] // Replace the range of elements indicated by `r` with // the contents of `with`. mutating func replaceRange(_ r: Range, with: [E]) // good // Return an `Array` containing the elements of `self` // that satisfy `predicate`. func filter(_ predicate: (Element) -\u0026gt; Bool) -\u0026gt; [Generator.Element] // Replace the given `subRange` of elements with `newElements`. mutating func replaceRange(_ subRange: Range, with newElements: [E]) Take advantage of defaulted parameters.\n// bad let order = lastName.compare(royalFamilyName, options: [], range: nil, locale: nil) // good let order = lastName.compare(royalFamilyName) Prefer to locate parameters with defaults toward the end.\nArgument Labels # Omit all labels when arguments can\u0026rsquo;t be usefully distinguished.\n// good min(number1, number2) zip(sequence1, sequence2) In initializers that perform value preserving type conversions, omit the first argument label.\n// good Int64(someUInt32) When the first argument forms part of a prepositional phrase, give it an argument label.\n// good x.removeBoxes(havingLength: 12) An exception arises when the first two arguments represent parts of a single abstraction:\n// bad a.move(toX: b, y: c) a.fade(fromRed: b, green: c, blue: d) // good a.moveTo(x: b, y: c) a.fadeFrom(red: b, green: c, blue: d) Otherwise, if the first argument forms part of a grammatical phrase, omit its label.\n// good x.addSubview(y) // bad view.dismiss(false) // Don\u0026#39;t dismiss? Dismiss a Bool? words.split(12) // Split the number 12? // good view.dismiss(animated: false) let text = words.split(maxSplits: 12) let studentByName = students.sorted(isOrderedBefore: Student.namePrecedes) Label all other argument\nCode Organization # Use extensions to organize your code into logical blocks of functionality. Each extension should be set off with a // MARK: - comment to keep things well-organized.\nProtocol Conformance # In particular, when adding protocol conformance to a model, prefer adding a separate extension for the protocol methods.\nThis keeps the related methods grouped together with the protocol and can simplify instructions to add a protocol to a class with its associated methods.\n// bad class MyViewController: UIViewController, UITableViewDataSource, UIScrollViewDelegate { // all methods } // good class MyViewController: UIViewController { // class stuff here } // MARK: - UITableViewDataSource extension MyViewController: UITableViewDataSource { // table view data source methods } // MARK: - UIScrollViewDelegate extension MyViewController: UIScrollViewDelegate { // scroll view delegate methods } Comments # When they are needed, use comments to explain why a particular piece of code does something. Comments must be kept up-to-date or deleted.\nAvoid block comments inline with code, as the code should be as self-documenting as possible. Exception: This does not apply to those comments used to generate documentation.\nAvoid the use of C-style comments (/* ... */). Prefer the use of double- (//) or triple-slash (///).\nFunction Declarations # Keep short function declarations on one line including the opening brace.\n// good func reticulateSplines(spline: [Double]) -\u0026gt; Bool { // code goes here } For functions with lot\u0026rsquo;s of parameters, put each parameter on a new line and add an extra indent on subsequent lines.\n// good func reticulateSplines( spline: [Double], adjustmentFactor: Double, translateConstant: Int, comment: String ) -\u0026gt; Bool { // code goes here } Don\u0026rsquo;t use (Void) to represent the lack of an input; simply use (). Use Void instead of () for closure and function outputs.\n// bad func updateConstraints() -\u0026gt; () { ... } typealias CompletionHandler = (result) -\u0026gt; () // good func updateConstraints() -\u0026gt; Void { ... } typealias CompletionHandler = (result) -\u0026gt; Void Function Calls # Mirror the style of function declarations at call sites.\n// good let success = reticulateSplines(splines) If the call site must be wrapped, put each parameter on a new line, indented one additional level.\n// good let success = reticulateSplines( spline: splines, adjustmentFactor: 1.3, translateConstant: 2, comment: \u0026#34;normalize the display\u0026#34;) Closure Expressions # For single-expression closures where the context is clear, use implicit returns.\n// good attendeeList.sort { a, b in a \u0026gt; b } Types # Constants are defined using the let keyword and variables with the var keyword. Always use let instead of var if the value of the variable will not change.\nTip: A good technique is to define everything using let and only change it to var if the compiler complains!\nTo declare a type property as a constant simply use static let.\n// bad let e = 2.7182818 // pollutes global namespace let root2 = 1.414 let hypotenuse = side * root2 // what is root2? // good enum Math { static let e = 2.7182818 static let root2 = 1.414 } let hypotenuse = side * Math.root2 Optionals # Declare variables and function return types as optional with ? where a nil value is acceptable.\nUse implicitly unwrapped types declared with ! only for instance variables that you know will be initialized later before use, such as subviews that will be set up in viewDidLoad(). Prefer optional binding to implicitly unwrapped optionals in most other cases.\nWhen accessing an optional value, use optional chaining if the value is only accessed once or if there are many optionals in the chain:\ntextContainer?.textLabel?.setNeedsDisplay() Use optional binding when it\u0026rsquo;s more convenient to unwrap once and perform multiple operations:\nif let textContainer = textContainer { ... } When naming optional variables and properties, avoid naming them like optionalString or maybeView since their optional-ness is already in the type declaration.\nFor optional binding, shadow the original name whenever possible rather than using names like unwrappedView or actualLabel.\n// bad var optionalSubview: UIView? var volume: Double? if let unwrappedSubview = optionalSubview { if let realVolume = volume { // do something with unwrappedSubview and realVolume } } // another example UIView.animate(withDuration: 2.0) { [weak self] in guard let strongSelf = self else { return } strongSelf.alpha = 1.0 } // good var subview: UIView? var volume: Double? // later on... if let subview = subview, let volume = volume { // do something with unwrapped subview and volume } // another example UIView.animate(withDuration: 2.0) { [weak self] in guard let self = self else { return } self.alpha = 1.0 } Lazy Initialization # Consider using lazy initialization for finer grained control over object lifetime. This is especially true for UIViewController that loads views lazily. You can either use a closure that is immediately called { }() or call a private factory method. Example:\nlazy var locationManager = makeLocationManager() private func makeLocationManager() -\u0026gt; CLLocationManager { let manager = CLLocationManager() manager.desiredAccuracy = kCLLocationAccuracyBest manager.delegate = self manager.requestAlwaysAuthorization() return manager } Notes:\n[unowned self] is not required here. A retain cycle is not created. Location manager has a side-effect for popping up UI to ask the user for permission so fine grain control makes sense here. Type Inference # Prefer compact code and let the compiler infer the type for constants or variables of single instances. Type inference is also appropriate for small, non-empty arrays and dictionaries. When required, specify the specific type such as CGFloat or Int16.\n// bad let message: String = \u0026#34;Click the button\u0026#34; let currentBounds: CGRect = computeViewBounds() var names = [String]() // good let message = \u0026#34;Click the button\u0026#34; let currentBounds = computeViewBounds() var names = [\u0026#34;Mic\u0026#34;, \u0026#34;Sam\u0026#34;, \u0026#34;Christine\u0026#34;] let maximumWidth: CGFloat = 106.5 Type Annotation for Empty Arrays and Dictionaries # For empty arrays and dictionaries, use type annotation. (For an array or dictionary assigned to a large, multi-line literal, use type annotation.)\n//bad var names = [String]() var lookup = [String: Int]() // good var names: [String] = [] var lookup: [String: Int] = [:] NOTE: Following this guideline means picking descriptive names is even more important than before.\nSyntactic Sugar # Prefer the shortcut versions of type declarations over the full generics syntax.\n// bad var deviceModels: Array\u0026lt;String\u0026gt; var employees: Dictionary\u0026lt;Int, String\u0026gt; var faxNumber: Optional\u0026lt;Int\u0026gt; // good var deviceModels: [String] var employees: [Int: String] var faxNumber: Int? Functions vs Methods # Free functions, which aren\u0026rsquo;t attached to a class or type, should be used sparingly. When possible, prefer to use a method instead of a free function. This aids in readability and discoverability.\nFree functions are most appropriate when they aren\u0026rsquo;t associated with any particular type or instance.\n// bad let sorted = mergeSort(items) // hard to discover launch(\u0026amp;rocket) // good let sorted = items.mergeSorted() // easily discoverable rocket.launch() // acts on the model Free Function Exceptions\nlet tuples = zip(a, b) // feels natural as a free function (symmetry) let value = max(x, y, z) // another free function that feels natural Memory Management # Code (even non-production, tutorial demo code) should not create reference cycles. Analyze your object graph and prevent strong cycles with weak and unowned references. Alternatively, use value types (struct, enum) to prevent cycles altogether.\nExtending object lifetime # Extend object lifetime using the [weak self] and guard let self = self else { return } idiom. [weak self] is preferred to [unowned self] where it is not immediately obvious that self outlives the closure. Explicitly extending lifetime is preferred to optional chaining.\n// bad // might crash if self is released before response returns resource.request().onComplete { [unowned self] response in let model = self.updateModel(response) self.updateUI(model) } // bad // deallocate could happen between updating the model and updating UI resource.request().onComplete { [weak self] response in let model = self?.updateModel(response) self?.updateUI(model) } // good resource.request().onComplete { [weak self] response in guard let self = self else { return } let model = self.updateModel(response) self.updateUI(model) } Access Control # Full access control annotation in tutorials can distract from the main topic and is not required. Using private and fileprivate appropriately, however, adds clarity and promotes encapsulation. Prefer private to fileprivate; use fileprivate only when the compiler insists.\nOnly explicitly use open, public, and internal when you require a full access control specification.\nUse access control as the leading property specifier. The only things that should come before access control are the static specifier or attributes such as @IBAction, @IBOutlet and @discardableResult.\n// bad fileprivate let message = \u0026#34;Great Scott!\u0026#34; class TimeMachine { lazy dynamic private var fluxCapacitor = FluxCapacitor() } // good private let message = \u0026#34;Great Scott!\u0026#34; class TimeMachine { private dynamic lazy var fluxCapacitor = FluxCapacitor() } Control Flow # Prefer the for-in style of for loop over the while-condition-increment style.\n// bad var i = 0 while i \u0026lt; 3 { print(\u0026#34;Hello three times\u0026#34;) i += 1 } // bad var i = 0 while i \u0026lt; attendeeList.count { let person = attendeeList[i] print(\u0026#34;\\(person) is at position #\\(i)\u0026#34;) i += 1 } // good for _ in 0..\u0026lt;3 { print(\u0026#34;Hello three times\u0026#34;) } for (index, person) in attendeeList.enumerated() { print(\u0026#34;\\(person) is at position #\\(index)\u0026#34;) } for index in stride(from: 0, to: items.count, by: 2) { print(index) } for index in (0...3).reversed() { print(index) } Ternary Operator # The Ternary operator, ?: , should only be used when it increases clarity or code neatness. A single condition is usually all that should be evaluated. Evaluating multiple conditions is usually more understandable as an if statement or refactored into instance variables. In general, the best use of the ternary operator is during assignment of a variable and deciding which value to use.\n// bad result = a \u0026gt; b ? x = c \u0026gt; d ? c : d : y // good let value = 5 result = value != 0 ? x : y let isHorizontal = true result = isHorizontal ? x : y Multi-line String Literals # When building a long string literal, you\u0026rsquo;re encouraged to use the multi-line string literal syntax. Open the literal on the same line as the assignment but do not include text on that line. Indent the text block one additional level.\n// bad let message = \u0026#34;\u0026#34;\u0026#34;You cannot charge the flux \\ capacitor with a 9V battery. You must use a super-charger \\ which costs 10 credits. You currently \\ have \\(credits) credits available. \u0026#34;\u0026#34;\u0026#34; // good let message = \u0026#34;\u0026#34;\u0026#34; You cannot charge the flux \\ capacitor with a 9V battery. You must use a super-charger \\ which costs 10 credits. You currently \\ have \\(credits) credits available. \u0026#34;\u0026#34;\u0026#34; Special Instructions # Label tuple members and name closure parameters\nTake extra care with unconstrained polymorphism\n// bad struct Array { // Inserts `newElement` at `self.endIndex`. public mutating func append(_ newElement: Element) // Inserts the contents of `newElements`, in order, at // `self.endIndex`. public mutating func append(_ newElements: S) where S.Generator.Element == Element } var values: [Any] = [1, \u0026#34;a\u0026#34;] values.append([2, 3, 4]) // [1, \u0026#34;a\u0026#34;, [2, 3, 4]] or [1, \u0026#34;a\u0026#34;, 2, 3, 4]? // good struct Array { // Inserts `newElement` at `self.endIndex`. public mutating func append(_ newElement: Element) // Inserts the contents of `newElements`, in order, at // `self.endIndex`. public mutating func append(contentsOf newElements: S) where S.Generator.Element == Element } var values: [Any] = [1, \u0026#34;a\u0026#34;] values.append([2, 3, 4]) // it\u0026#39;s [1, \u0026#34;a\u0026#34;, [2, 3, 4]]! ","date":"26 May 2019","externalUrl":null,"permalink":"/posts/tech/swift-style-guide/","section":"Posts","summary":"","title":"Swift Style Guide","type":"posts"},{"content":"","date":"1 April 2019","externalUrl":null,"permalink":"/tags/anaconda/","section":"Tags","summary":"","title":"Anaconda","type":"tags"},{"content":" å‰è¨€ # Python 3 å·²ç¶“é€æ¼¸å–ä»£ Python 2ï¼Œæˆç‚ºæ™®éé–‹ç™¼è€…æ‰€ä½¿ç”¨çš„èªè¨€ï¼Œä½†æœ€å›§çš„æ˜¯ï¼Œå¾ˆå¤šè€èˆŠçš„å°ˆæ¡ˆã€ç³»çµ±ä»ç„¶é‹è¡Œè‘—ç”± Python 2 æ‰€ç·¨æˆçš„ç’°å¢ƒä¸­ï¼Œæœ‰æ™‚ç‚ºäº†åœ¨èˆŠç‰ˆæœ¬ï¼ˆPython 2ï¼‰ä¸­é–‹ç™¼ï¼Œå¿…éœ€è¦æœ‰ä¸€å€‹å¾ˆå¥½çš„ ç’°å¢ƒæ§åˆ¶æ–¹å¼ã€‚\nAnaconda # å¼•ç”¨ç¶­åŸºç™¾ç§‘ä¸Šæœ‰é—œ Anaconda çš„æ•˜ è¿°ï¼š\nAnaconda æ˜¯ä¸€ç¨® Python èªè¨€çš„å…è²»å¢å€¼é–‹æºç™¼è¡Œç‰ˆï¼Œç”¨æ–¼é€²è¡Œå¤§è¦æ¨¡æ•¸æ“šè™•ç†ï¼Œé æ¸¬ åˆ†æï¼Œå’Œç§‘å­¸è¨ˆç®—ï¼Œè‡´åŠ›æ–¼ç°¡åŒ–åŒ…çš„ç®¡ç†å’Œéƒ¨ç½²ã€‚Anaconda ä½¿ç”¨è»Ÿé«”åŒ…ç®¡ç†ç³»çµ± Conda é€²è¡ŒåŒ…ç®¡ç†ã€‚\nä½¿ç”¨ Anaconda å¯ä»¥å¹«æˆ‘è§£æ±ºä»¥ä¸‹å…©å€‹å¤§å•é¡Œï¼š\næä¾› package managementï¼šåŠŸèƒ½é¡ä¼¼ pip æä¾› virtual environmentï¼šè§£æ±ºäº† Python å¤šç‰ˆæœ¬ä¸¦å­˜å•é¡Œ ä½ å¯ä»¥åœ¨é€™è£¡ä¸‹è¼‰ macOS çš„ Anaconda æœ€æ–°ç‰ˆæœ¬ï¼Œå…¶å®ƒä½œæ¥­ç³»çµ±ä¹Ÿèƒ½åœ¨åˆ†é ç•¶ä¸­æ‰¾åˆ°ã€‚\næ›´æ–°å¥—ä»¶ # conda update --all å»ºç«‹ç’°å¢ƒ # # Create the environment conda create --name python3 python=3.7 conda create --name python2 python=2.7 # Activate the environment source activate python3 # Linux/macOS activate python3 # Windows æ›´å¤šçš„æŒ‡ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹\nconda -h ç®¡ç† packages # conda çš„ package management æ˜¯å° pip åŠŸèƒ½çš„æ“´å……ï¼Œå¦‚æœå·²ç¶“å•Ÿå‹•äº†æŸå€‹ Python ç’°å¢ƒ ï¼Œä¾¿å¯ä»¥åœ¨è©²ç’°å¢ƒé–‹å§‹å®‰è£ç¬¬ä¸‰æ–¹çš„ packageï¼Œä¾‹å¦‚ï¼š\nconda install numpy # Install numpy package conda list # List all installed packages conda update numpy # Update numpy package conda remove numpy # Remove numpy package è¨­å®šé è¨­ç‰ˆæœ¬ # macOS High Sierra åŸå» å°±é è¨­è‡ªå¸¶ Python 2 ç‰ˆæœ¬ï¼Œä½ç½®åœ¨ /System/Library/Frameworks/Python.framework/Versions/2.7ï¼Œæˆ‘å¸Œæœ›é è¨­ç‰ˆæœ¬æ˜¯ Python 3\nexport PATH=\u0026#34;/usr/local/bin:$PATH\u0026#34; # Default path setting export PATH=\u0026#34;/Users/Jay/anaconda3/bin:$PATH\u0026#34; # Anaconda 3 è‹¥å°‡ Anaconda çš„è·¯å¾‘æ”¾åœ¨ä¸‹é¢ï¼Œä»£è¡¨ Anaconda æœƒè¦†è“‹æ‰é è¨­è·¯å¾‘ Python 2 çš„ç’°å¢ƒï¼Œä¹Ÿ å°±æ˜¯è‹¥ä½ çŒçš„ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ï¼š3.7.3)ï¼Œç•¶ä½ åœ¨ Terminal åŸ·è¡Œï¼š\n$ python å°±æœƒç›´æ¥é€²åˆ° Anaconda åº•ä¸‹çš„ Python 3.7.3 çš„ç’°å¢ƒäº†ï¼å…¶å®ƒçš„è¨­å®šï¼šå¦‚ pip ç­‰ä¹Ÿéƒ½ æ˜¯ã€‚\n","date":"1 April 2019","externalUrl":null,"permalink":"/posts/tech/anaconda-setup/","section":"Posts","summary":"","title":"Anaconda å®Œç¾è§£æ±º Python 2 å’Œ Python 3 ä¸¦å­˜å•é¡Œ","type":"posts"},{"content":"","date":"1 April 2019","externalUrl":null,"permalink":"/tags/python/","section":"Tags","summary":"","title":"Python","type":"tags"},{"content":"","date":"10 March 2019","externalUrl":null,"permalink":"/tags/javascript/","section":"Tags","summary":"","title":"JavaScript","type":"tags"},{"content":" 7. è§€å¿µå°å®åš€ï¼šåç¨±/å€¼é…å°èˆ‡ç‰©ä»¶ # Conceptual Aside: Name/Value Pairs \u0026amp; Objects\nName/Value Pair: A name which maps to a unique value.\nThe name may be defined more than once, but only can have one value in any given context. That value may be more name/value pairs.\nJS ä¸­çš„ç‰©ä»¶ï¼Œå–®ç´”çš„æ˜¯ Key-Value çš„é—œä¿‚ï¼Œè€Œç‰©ä»¶ä¸­ä¹Ÿå¯ä»¥å†åŒ…å«ç‰©ä»¶ï¼Œåƒ Address åŒ…å« Apartmentã€‚\nconst Address = { Street: \u0026#34;Main\u0026#34;, Number: 100, Apartment: { Floor: 3, Number: 301, }, }; Object: a collection of name value pairs\n9. å…¨åŸŸç’°å¢ƒèˆ‡å…¨åŸŸè®Šæ•¸ # The Global Environment \u0026amp; The Global Object\nJS éƒ½æ˜¯åœ¨ã€ŒExecution Contextã€ä¸­åŸ·è¡Œçš„ï¼Œè€Œ global execution context æœƒç‚ºä½ å‰µå»ºå…© å€‹æ±è¥¿ï¼š\nGlobal Object this æˆ‘å€‘å¯ä»¥é€éä»¥ä¸‹çš„ä»£ç¢¼ä¾†å¯¦é©—ï¼Œæˆ–æ˜¯ç›´æ¥å°‡ js ä»£ç¢¼æ‰“åœ¨ Google Chrome çš„ Console ä¸­ ï¼š\nindex.html\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;script src=\u0026#34;app.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; app.js\næ˜¯çš„ï¼Œæˆ‘å€‘çš„ app.js æ˜¯ç©ºçš„ï¼Œä½† JS engine ä¸€æ¨£æœƒåœ¨æ­¤è™•å‰µå»ºä¸€å€‹ global execution contextï¼Œæ‰€ä»¥ç•¶æˆ‘å€‘åœ¨ Console æ‰“ this æˆ– window æ™‚æœƒå¦‚ä¸‹æ–¹æ‰€ç¤ºï¼š\n\u0026gt; this \u0026lt; Window {postMessage: f, blur: f, focus: f, close: f, parent: Window, ...} \u0026gt; window \u0026lt; Window {postMessage: f, blur: f, focus: f, close: f, parent: Window, ...} è‹¥æˆ‘å€‘è©¦è‘—å¯«ä¸€äº›ä»£ç¢¼åœ¨ app.js ä¸­ï¼š\næ³¨æ„ï¼šè‹¥ç”¨ ES6 ä¹‹å¾Œçš„ const æˆ– let å–ä»£ var å®£å‘Šå‰‡ä¸æœƒæœ‰æ­¤ç¾è±¡ã€‚\nvar a = \u0026#34;Hello World!\u0026#34;; function b() {} \u0026gt; a \u0026lt; \u0026#34;Hello World!\u0026#34; \u0026gt; window.a \u0026lt; \u0026#34;a\u0026#34; 10. åŸ·è¡Œç’°å¢ƒï¼šå‰µé€ èˆ‡æå‡ # The Execution Context: Creation \u0026amp; 'Hoisting'\nåœ¨åŒä¸€å€‹åŸ·è¡Œç’°å¢ƒä¸­ï¼Œæœƒå„ªå…ˆå°‡ä½¿ç”¨åˆ°çš„è®Šæ•¸å­˜åˆ°è¨˜æ†¶é«”ä¸­ã€‚\nb(); // Called b! console.log(a); // undefined var a = \u0026#34;Hello World!\u0026#34;; function b() { console.log(\u0026#34;Called b!\u0026#34;); } b() çš„å…§å®¹æœƒå…ˆå„ªå…ˆå­˜é€²è¨˜æ†¶é«”å…§ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥åœ¨ç¬¬ 1 è¡Œå„ªå…ˆå‘¼å«ç¬¬ 5 è¡Œçš„ b()\nè€Œåœ¨ä½¿ç”¨ç­‰è™Ÿè³¦å€¼æ™‚ï¼Œåªæœƒå…ˆå°‡è®Šæ•¸æ”¾è‡³è¨˜æ†¶é«”ï¼Œvar a = 'Hello World!; åœ¨é€™è£¡åªæœƒ å…ˆå°‡ a æ”¾å…¥è¨˜æ†¶é«”ä¸­ï¼Œå†ä¾åŸ·è¡Œé †åºå°‡ç­‰è™Ÿçš„å€¼å¡«å…¥ã€‚\nå¯æƒ³åƒä»£ç¢¼è®Šæˆé€™æ¨£ï¼š\nvar a; function b() { console.log(\u0026#34;Called b!\u0026#34;); } b(); // Called b! console.log(a); // undefined a = \u0026#34;Hello World!\u0026#34;; var a è¢«ç§»åˆ°æœ€å‰é¢ï¼Œä½†é‚„æœªè³¦å€¼ï¼Œæ‰€ä»¥ JS engine æœƒåœ¨ä¸€é–‹å§‹è³¦æ–¼ a = undefinedï¼ˆæ‰€æœ‰å€¼ä¸€é–‹å§‹éƒ½æ˜¯ undefinedï¼‰ï¼Œb() å‰‡æ˜¯é€£å…§å®¹éƒ½ç§»åˆ°å‰é¢å»äº† ã€‚\nç¸½çµä¸€ä¸‹é€™ç¯€ï¼š\nåŸ·è¡Œç’°å¢ƒæœƒåˆ†æˆå…©å€‹éšæ®µè¢«å‰µé€ ï¼š\nCreation Phase åœ¨è¨˜æ†¶é«”ä¸­ï¼Œè¨­å®š Global Object åœ¨è¨˜æ†¶é«”ä¸­ï¼Œè¨­å®š this è¨­å®š Outer Environment è¨­å®šå¥½è®Šæ•¸å’Œå‡½æ•¸çš„è¨˜æ†¶é«”ç©ºé–“ï¼ˆHoistingï¼‰ Execution Phase Line by line åŸ·è¡Œä»£ç¢¼ è¨»ï¼šHoisting ä¸ä»£è¡¨ JS engine çœŸçš„æ¶å‹•äº†ä½ çš„ä»£ç¢¼ï¼Œè€Œæ˜¯å…ˆåœ¨ Creation Phase æ™‚ï¼Œå…ˆ è¨­å®šå¥½è®Šæ•¸å’Œå‡½æ•¸çš„è¨˜æ†¶é«”ç©ºé–“ã€‚\n11. è§€å¿µå°å®åš€ï¼šJavaScript èˆ‡ \u0026lsquo;undefined\u0026rsquo; # Conceptual Aside: JavaScript \u0026amp; undefined\nundefined æ˜¯ JS çš„ç‰¹æ®Šå€¼ï¼Œè¡¨è©²å€¼æœ‰è¢«å­˜åœ¨è¨˜æ†¶é«”ä¸­ï¼Œä½†ç•¶æœªè³¦å€¼\nnot defined ä»£è¡¨è©²å€¼ä¸å­˜åœ¨è¨˜æ†¶é«”ä¸­\nvar a; if (a === undefined) { console.log(\u0026#34;a is undefined\u0026#34;); // a is undefined } else { console.log(\u0026#34;a is defined\u0026#34;); } æˆ‘å€‘å¯ä»¥åˆ»æ„è®“ a = undefinedï¼Œä½†é€™æ˜¯ä¸€å€‹ bad practiceï¼Œæ‡‰è©²è®“ undefined å°±ä»£ è¡¨é‚„æ²’è³¦å€¼çš„è®Šæ•¸ã€‚\n12. åŸ·è¡Œç’°å¢ƒï¼šç¨‹å¼åŸ·è¡Œ # The Execution Context: Code Execution\nåœ¨ 10. æˆ‘å€‘æåˆ°äº†åŸ·è¡Œç’°å¢ƒçš„ç¬¬ä¸€æ­¥é©Ÿæ˜¯ creationï¼Œç¬¬äºŒæ­¥é©Ÿå¾ˆç°¡å–®ï¼ŒJS engine å°±ä¸€è¡Œ ä¸€è¡Œçš„åŸ·è¡Œä½ çš„ä»£ç¢¼ã€‚\n13. è§€å¿µå°å®åš€ï¼šå–®åŸ·è¡Œç·’ã€åŒæ­¥åŸ·è¡Œ # Conceptual Aside: Single Threaded, Synchronous Execution\nSingle Threaded: one command at a time.\nUnder the hood of the browser, maybe not.\nSynchronous: one at a time and in order.\n14. å‡½æ•¸å‘¼å«èˆ‡åŸ·è¡Œå † # Function Invocation \u0026amp; The Execution Stack\né€™ç¨‹å¼çš„æ™®ä¸–åƒ¹å€¼ï¼Œå°±ä¸å¤šåšè´…è¿°ã€‚\n15. å‡½æ•¸ã€ç’°å¢ƒèˆ‡è®Šæ•¸ç’°å¢ƒ # Functions, Context, \u0026amp; Variable Environments\nVariable Environment: where the variables live.\nand how they related to each other in memory.\nfunction b() { var myVar; console.log(myVar); } function a() { var myVar = 2; console.log(myVar); b(); } var myVar = 1; console.log(myVar); // 1 a(); // 2 \\n undefined console.log(myVar); // 1 æ­¤ä¾‹å­å’Œå¤§å¤šæ•¸çš„ç¨‹å¼èªè¨€ä¸€æ¨£ï¼Œæ¯å€‹è®Šæ•¸æœƒæœ‰ä»–çš„ã€ŒåŸŸã€ã€‚\n16. ç¯„åœéˆ # The Scope Chain\næ¥ä¸‹ä¾†é€™å€‹ä¾‹å­ï¼Œæˆ‘å€‘å°‡ b() è£¡é¢çš„ var myVar è¨»è§£æ‰ï¼Œé€™æ™‚ç¬¬ 2 è¡Œæœƒæ˜¯ not defined å—ï¼Ÿ\nfunction b() { // lexically (phsically) sits at the global level console.log(myVar); } function a() { var myVar = 2; b(); } var myVar = 1; a(); // 1 ä¸æ˜¯çš„ï¼Œç”±æ–¼ lexical environment çš„é—œä¿‚ï¼Œè€Œ b() ã€Œlexically sits at the global levelã€ï¼Œå› æ­¤ b() çš„ \u000freference to outer environment æœƒæŒ‡å‘ Global Execution Contextï¼Œæ‰€ä»¥åœ¨åŸ·è¡Œ b() æ™‚ï¼Œç•¶æˆ‘å€‘åœ¨ b() çš„åŸ·è¡Œç’°å¢ƒä¸­æ‰¾ä¸åˆ° myVar å®šç¾©æ™‚ï¼Œ å°±æœƒåˆ°å¤–éƒ¨ç’°å¢ƒæ‰¾ï¼ˆb() çš„å¤–éƒ¨ç’°å¢ƒæ˜¯ globalï¼‰ï¼Œé€™å°±æ˜¯ Scope Chain çš„æ¦‚å¿µã€‚\nfunction a() { function b() { console.log(myVar); } var myVar = 2; b(); } var myVar = 1; a(); // 2 17. ç¯„åœã€ES6 èˆ‡ let # Scope, ES6, \u0026amp; let\nScope: where a variable is available in your code.\nand if it\u0026rsquo;s truly the same variable, or a new copy.\n18. é—œæ–¼ç•°æ­¥å›å‘¼ # What About Asynchronous Callbacks?\nAsynchronous: more than one at a time.\nJS engine æ˜¯å–®åŸ·è¡Œç·’ã€åŒæ­¥çš„ï¼Œé‚£æ˜¯å¦‚ä½•é”åˆ°ç•°æ­¥åŸ·è¡Œçš„æ•ˆæœå‘¢ï¼Ÿ\nåœ¨ç€è¦½å™¨ä¸­é™¤äº†åŸ·è¡Œ JS engine å¤–ï¼Œé‚„æœƒåŸ·è¡Œ rendering enginerã€HTTP request ç­‰ã€‚\né›–ç„¶ JS engine æœ¬èº«æ˜¯åŒæ­¥çš„ï¼Œä½†å…¶ä»–äº‹ä»¶æ˜¯å¯ä»¥ç•°æ­¥åŸ·è¡Œçš„ï¼ˆé€™ä¸¦ä¸æ˜¯çœŸçš„ç•°æ­¥ï¼Œè€Œæ˜¯ ç€è¦½å™¨ç•°æ­¥çš„æŠŠæ±è¥¿æ”¾åˆ°äº‹ä»¶ä½‡åˆ—ï¼ˆEvent Queueï¼‰ï¼Œä½†åŸæœ¬çš„ç¨‹å¼ä»ç„¶ç¹¼çºŒä¸€è¡Œä¸€è¡ŒåŸ·è¡Œ ã€‚\nç•¶åŸ·è¡Œå®Œå¾Œï¼ŒåŸ·è¡Œå †ç©ºäº†ï¼Œæ‰æœƒè™•ç†äº‹ä»¶ã€‚\nä¾†çœ‹çœ‹ä»¥ä¸‹çš„ä¾‹å­ï¼š\nfunction waitThreeSeconds() { const ms = 3000 + new Date().getTime(); while (new Date() \u0026lt; ms) {} console.log(\u0026#34;finished function\u0026#34;); } function clickHandler() { console.log(\u0026#34;click event!\u0026#34;); } document.addEventListener(\u0026#34;click\u0026#34;, clickHandler); waitThreeSeconds(); console.log(\u0026#34;finished execution\u0026#34;); ç•¶åœ¨åŸ·è¡Œ waitThreeSeconds() æ™‚ï¼Œç„¶å¾Œé»é é¢ï¼ˆdocumentï¼‰ï¼Œè©¦è‘—å»è§¸ç™¼ clickHandler() æœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿ\n\u0026gt; fninished function \u0026gt; finished execution \u0026gt; click event! æˆ‘çœ‹ç™¼ç¾ click event! åœ¨æœ€å¾Œæ‰æœƒå°å‡ºä¾†ï¼Œå› ç‚º JS engine ç›´åˆ°åŸ·è¡Œå †æ˜¯ç©ºçš„æ‰æœƒçœ‹äº‹ ä»¶ä½‡åˆ—ï¼Œé€™è¡¨ç¤ºé•·æ™‚é–“å‡½æ•¸å¯ä»¥å¹²æ“¾äº‹ä»¶ï¼Œé€™å°±æ˜¯ JS å¦‚ä½•åŒæ­¥è™•ç†åœ¨ç€è¦½å™¨åˆ¥è™•ç•°æ­¥çš„äº‹ ä»¶ç™¼ç”Ÿã€‚\nJS ä¸æ–·åŸ·è¡ŒåŸå…ˆçš„ç¨‹å¼ï¼Œç•¶å…¨éƒ¨å®Œæˆå¾Œï¼Œå®ƒæœƒåˆ°äº‹ä»¶ä½‡åˆ—çœ‹çœ‹ï¼Œä¸¦ä¸åœçš„æª¢æŸ¥ï¼ˆcontinous checkï¼‰ã€‚\n","date":"10 March 2019","externalUrl":null,"permalink":"/posts/js/js-weird/","section":"Posts","summary":"","title":"å…‹æœ JS çš„å¥‡æ€ªéƒ¨åˆ† - 2. åŸ·è¡Œç’°å¢ƒèˆ‡è©å½™ç’°å¢ƒ","type":"posts"},{"content":"","date":"13 December 2018","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"13 December 2018","externalUrl":null,"permalink":"/categories/chinese/","section":"Categories","summary":"","title":"Chinese","type":"categories"},{"content":"","date":"13 December 2018","externalUrl":null,"permalink":"/tags/iclr/","section":"Tags","summary":"","title":"ICLR","type":"tags"},{"content":"","date":"13 December 2018","externalUrl":null,"permalink":"/categories/paper/","section":"Categories","summary":"","title":"Paper","type":"categories"},{"content":"","date":"13 December 2018","externalUrl":null,"permalink":"/tags/paper/","section":"Tags","summary":"","title":"Paper","type":"tags"},{"content":" Paper Link\nExperience replay ä½¿å¾— RL agents èƒ½å¤ è¨˜ä½ä¸¦é‡ç”¨éå»çš„ç¶“é©—ã€‚\nä»¥å‰çš„åšæ³•æ˜¯ï¼Œå¾ replay memory ä¸­å‡å‹»çš„ sample experience transitionã€‚ä½†é€™ç¨®æ–¹æ³• åªæ ¹æ“šä»–å€‘æœ€åˆè¢«é«”é©—åˆ°çš„é »ç‡ï¼Œè€Œä¸ç®¡å®ƒå€‘çš„é‡è¦æ€§ã€‚\nåœ¨æœ¬æ–‡ä¸­ï¼Œé–‹ç™¼äº†ä¸€å€‹å„ªå…ˆé©—é«”çš„æ¡†æ¶ï¼Œä»¥ä¾¿æ›´é »ç¹åœ°é‡æ”¾é‡è¦çš„ transitionï¼Œå¾è€Œæ›´æœ‰ æ•ˆåœ°å­¸ç¿’ã€‚\næœ¬æ–‡è¡¨ç¤ºï¼Œæ¡ç”¨æ­¤ç¨®ç¶“é©—å›æ”¾çš„ç®—æ³•ï¼Œèƒ½å¤ åœ¨ 49 ç¨®éŠæˆ²ä¸­ï¼Œæ‰“è´å‚³çµ±ç®—æ³• 41 æ¬¡ã€‚\n1 Introduction # RL agents åœ¨è§€å¯Ÿåˆ°ä¸€é€£ä¸²çš„ç¶“é©—æ™‚ï¼Œå¢é‡åœ°æ›´æ–°å…¶åƒæ•¸ã€‚æœ€ç°¡å–®çš„åšæ³•ï¼Œå³ï¼šåœ¨æ›´æ–°å¾Œï¼Œ ç«‹åˆ»æ‰”æ‰åˆ°ä¾†çš„æ•¸æ“šï¼Œä½†é€™æœ‰å¹¾ä¸‹å…©ç¨®å•é¡Œï¼š\nå¼·çƒˆçš„ç›¸é—œæ€§æ›´æ€§ç ´å£äº†è¨±å¤šéš¨æ©Ÿæ¢¯åº¦ä¸‹é™ç‚ºåŸºç¤çš„æ¼”ç®—æ³•æ‰€å‡è¨­çš„ i.i.d.ã€‚ å¿«é€Ÿçš„å¿˜è¨˜ç½•è¦‹ï¼Œä½†å¯èƒ½æœƒå†ç”¨åˆ°çš„ç¶“é©—ã€‚ Experience replay è§£æ±ºäº†ä¸Šè¿°å•é¡Œï¼šåœ¨ä¸€å€‹ replay memory ä¸­å„²å­˜ experienceï¼Œé€šéæ·· åˆæˆ–å¤šæˆ–å°‘çš„æœ€è¿‘ç¶“é©—ä¾†æ›´æ–°å°±æœ‰å¯èƒ½ç ´å£ temporal correlationï¼Œrare experience å°‡ æœƒè¢«ç”¨ä¾†ä¸æ­¢ä¸€æ¬¡æ›´æ–°ï¼Œé€™å°±è¢«ç”¨åœ¨ NeurIPS 2013 å’Œ Nature 2015 çš„è«–æ–‡ä¸­ã€‚\nDQN åˆ©ç”¨ä¸€å€‹å¤§çš„æ»‘å‹•çª—å£ replay memoryï¼Œéš¨æ©Ÿçš„å¾ä¸­å‡å‹»æ¡æ¨£ï¼Œå¹³å‡é‡è¤‡è¨ªå•ä¸€å€‹ transition 8 æ¬¡ã€‚\nExperience replay å¯ä»¥å¤§é‡çš„é™ä½éœ€è¦å»å­¸ç¿’çš„ç¶“é©—ï¼Œè€Œæ˜¯ç”¨æ›´å¤šçš„è¨ˆç®—å’Œæ›´å¤šçš„ memory ä¾†æ›¿æ›ï¼Œé€™æ¨£åœ¨è¨ˆç®—è³‡æºä¸Šæ˜¯æ¯”è©² RL agents å’Œç’°å¢ƒäº’å‹•é‚„ä¾¿å®œçš„ã€‚\nè¨»ï¼šåœ¨é€™è£¡çš„ä¸€æ¬¡ transition æŒ‡çš„æ˜¯ï¼šagent åœ¨ç’°å¢ƒä¸­ä¸€æ¬¡æ€§çš„æ“ä½œï¼Œå³ tupleï¼š\n$$ (\\text{state} S_{t - 1}, \\text{action} A_{t - 1}, \\text{reward} R_t, \\text{discount} \\gamma_t, \\text{next state} S_t). $$\n2 Background # 3 Prioritized Replay # è¨­è¨ˆä¸€å€‹ prioritized replay memoryï¼Œæ¶‰åŠåˆ°å…©å€‹å±¤æ¬¡ï¼Œå³ï¼š\né¸æ“‡å“ªäº›å„²å­˜ é¸æ“‡å“ªäº›å›æ”¾ æœ¬æ–‡ä¸»è¦ç ”ç©¶å¾Œè€…ï¼Œå¦‚ä½•æœ€æœ‰æ•ˆçš„åˆ©ç”¨ replay memory ä¾†å­¸ç¿’ã€‚\n3.1. A Motivating Example # æœ¬æ–‡çµ¦å‡ºäº†ä¸€å€‹ä¾‹å­ä¾†å……åˆ†çš„èªªæ˜å„ªå…ˆçš„æ½›åœ¨å¥½è™•ã€‚å¼•å…¥äº†ç¨±ç‚º \u0026lsquo;Blind Cliffwalk\u0026rsquo; çš„ç’° å¢ƒï¼Œä¾†èªªæ˜ï¼šç•¶ reward éå¸¸ç½•è¦‹æ™‚ï¼Œæ¢ç´¢æ‰€é‡åˆ°çš„æŒ‘æˆ°ã€‚å‡è¨­åƒ…æœ‰ \\(n\\) å€‹ç‹€æ…‹ï¼Œé€™ å€‹ç’°å¢ƒå°±è¦æ±‚è¶³å¤ çš„éš¨æ©Ÿæ­¥é©ŸçŸ¥é“å¾—åˆ°ç¬¬ä¸€å€‹éé›¶ rewardï¼›ç¢ºåˆ‡çš„èªªï¼Œéš¨æ©Ÿçš„é¸æ“‡å‹•ä½œæƒ… æ³ä¸‹ reward = \\(2^{-n}\\)ã€‚æ­¤å¤–ï¼Œæœ€ç›¸é—œçš„ transitions å»è—åœ¨å¤§é‡çš„å¤±æ•—èˆ‡å˜—è©¦ä¸­ ã€‚\næœ¬æ–‡åˆ©ç”¨é€™å€‹ä¾‹å­ä¾† highlight å…©å€‹ agents çš„å­¸ç¿’æ¬¡æ•¸çš„ä¸åŒã€‚å¯ä»¥çœ‹åˆ°é€™å…©å€‹ agent éƒ½å¾åŒä¸€å€‹ replay memory ä¸­å»ç²å– Q-learning çš„æ›´æ–°ã€‚\nç¬¬ä¸€å€‹ agent éš¨æ©Ÿå‡å‹»çš„å›æ”¾ transitionsï¼Œç¬¬äºŒå€‹å–šé†’ä¸€å€‹ oracleï¼ˆç¥å–»ï¼‰ä¾†é€²è¡Œå„ªå…ˆ è½‰ç§»ã€‚é€™å€‹ oracle è²ªå©ªçš„é¸æ“‡ä½¿å¾—åœ¨ç•¶å‰ç‹€æ…‹ä¸‹æœ€å¤§åŒ–çš„é™ä½å…¨å±€æå¤±çš„ transitionsã€‚\nå¾ Figure 1. å³å´çš„åœ–å¯ä»¥çœ‹å‡ºï¼ŒæŒ‰ç…§ä¸€å®šå„ªåŒ–åºåˆ—å¾—åˆ°çš„è½‰ç§»æ¯”éš¨æ©Ÿå‡å‹»æ¡æ¨£ï¼Œå°‘èŠ±è²» å¾ˆå¤šå˜—è©¦ï¼Œé€™æ˜é¡¯çš„æå‡äº†è¨“ç·´çš„é€Ÿåº¦ã€‚\nFigure 1: Left: Illustration of the \u0026lsquo;Blind Cliffwalk\u0026rsquo; example domain: there are two actions, a \u0026lsquo;right\u0026rsquo; and a \u0026lsquo;wrong\u0026rsquo; one, and the episode is terminated whenever the agent takes the \u0026lsquo;wrong\u0026rsquo; action (dashed red arrows). Taking the \u0026lsquo;right\u0026rsquo; action progresses through a sequence of \\(n\\) states (black arrows), at the end of which lies a final reward of 1 (green arrow); reward is 0 elsewhere. We chose a representation such that generalizing over what action is \u0026lsquo;right\u0026rsquo; is not possible. Right: Median number of learning steps required to learn the value function as a function of the size of the total number of transitions in the replay memory. Note the log-log scale, which highlights the exponential speed-up from replaying with an oracle (bright blue), compared to uniform replay (black); faint lines are min/max values from 10 independent runs. 3.2 Prioritizing with TD-Error # Prioritized replay è©•åˆ¤å„ªå…ˆçš„æº–å‰‡æ˜¯ï¼šè¡¡é‡æ¯ä¸€ transitions çš„é‡è¦æ€§ã€‚ä¸€å€‹ç†æƒ³çš„æ¨™ æº–æ˜¯ç•¶å‰ç‹€æ…‹ä¸‹ï¼ŒRL agent èƒ½å¤ å­¸ç¿’åˆ°çš„é‡ï¼Œä¹Ÿå°±æ˜¯æœŸæœ›çš„å­¸ç¿’éç¨‹ã€‚ä½†æ˜¯é€™å€‹æ¨™æº–ä¸¦ä¸ èƒ½ç›´æ¥è¨ªå•åˆ°ï¼Œä¸€å€‹æ¯”è¼ƒåˆç†çš„ä¸”èƒ½å¤ è¡¨ç¤ºé‡è¦æ€§çš„å¦ä¸€å€‹è¡¡é‡æ–¹ç¤ºæ˜¯ï¼šä¸€å€‹ transition çš„ TD error \\(\\delta\\) çš„è¦æ¨¡ï¼Œä¾†è¡¨ç¤ºè©² transition å‡ºä¹æ„æ–™çš„ç¨‹åº¦ï¼šé€™éå¸¸é©åˆ å¢é‡çš„åœ¨ç·š RL ç®—æ³•ï¼Œæ¯”å¦‚ï¼šSARSA æˆ–è€… Q-learningï¼Œå·²ç¶“è¨ˆç®— TD-error ä¸¦ä¸” æ›´æ–°å’Œ \\(\\delta\\) æˆæ¯”ä¾‹çš„åƒæ•¸ã€‚ä½†æ˜¯æœ‰äº›æƒ…æ³ä¸‹ï¼ŒTD-error ä»ç„¶æ˜¯éå¸¸å·®çš„é æ¸¬ï¼Œä¾‹å¦‚ï¼š ç•¶ reward å……æ»¿å™ªéŸ³æ™‚ã€‚\nç‚ºäº†èªªæ˜é€šé TD-error prioritized replay çš„æœ‰æ•ˆæ€§ï¼Œæˆ‘å€‘å°æ¯”äº† uniform å’Œ oracle baselines åœ¨ Blind Cliffwalk ä¸Šçš„ \u0026lsquo;greedy TD-error prioritization\u0026rsquo; ç®—æ³•ã€‚è©²ç®—æ³• å­˜å„²äº†åœ¨ replay memory ä¸­æ¯æ¬¡ transition å¾Œï¼Œæœ€å¾Œé‡åˆ°çš„ TD errorã€‚å°‡æœ€å¤§çµ•å°å€¼ TD-error çš„ transition å¾ memory ä¸­ replayã€‚ transition çš„ Q-learning æ›´æ–°å’Œ TD-error ç›¸æ¯”çš„ æ¬Šé‡ã€‚æ–°çš„ transition åˆ°ä¾†ä¹‹å¾Œï¼Œæ²’æœ‰å·²çŸ¥çš„ TD-errorï¼Œæ‰€ä»¥æˆ‘å€‘å°‡ å…¶æ”¾åˆ°æœ€å¤§å„ªå…ˆç´šçš„è¡Œåˆ—ï¼Œç¢ºä¿æ‰€æœ‰çš„ experience è‡³å°‘ replay ä¸€æ¬¡ã€‚\né—œæ–¼é€™æ¨£åšçš„å¥½è™•ï¼Œå¾ Figure 2. å¯ä»¥çœ‹å‡ºï¼Œoracle çš„åšæ³•å¯ä»¥æ¥µå¤§çš„é™ä½ç„¡ç”¨çš„å˜—è©¦ï¼Œ åŠ é€Ÿäº†ç®—æ³•çš„åŸ·è¡Œé€Ÿåº¦ã€‚\nFigure 2: Median number of updates required for Q-learning to learn the value function on the Blind Cliffwalk example, as a function of the total number of transitions (only a single one of which was successful and saw the non-zero reward). Faint lines are min/max values from 10 random initializations. Black is uniform random replay, cyan uses the hindsight-oracle to select transitions, red and blue use prioritized replay (rank-based and proportional respectively). The results differ by multiple orders of magnitude, thus the need for a log-log plot. In both subplots it is evident that replaying experience in the right order makes an enormous difference to the number of updates required. See Appendix B.1 for details. Left: Tabular representation, greedy prioritization. Right: Linear function approximation, both variants of stochastic prioritization. 3.2. Stochastic Priorization # ç„¶è€Œï¼Œgreedy TD-error prioritization æœ‰å¹¾å€‹å•é¡Œï¼š\nç‚ºäº†é¿å…åœ¨æ•´å€‹ replay memory ä¸­æƒç„è€Œå¸¶ä¾†çš„è¨ˆç®—ä»£åƒ¹ï¼ŒTD-error åƒ…åƒ…æ›´æ–°è¢« replay çš„ transitionã€‚é€™å€‹å¸¶ä¾†çš„ä¸€å€‹å¾Œæœå°±æ˜¯ï¼šå¸¶æœ‰ä½ TD-error çš„ transition åœ¨ç¬¬ä¸€æ¬¡è¨ªå•æ™‚å¯èƒ½å¾ˆé•·æ™‚é–“ä¸æœƒè¢« replayã€‚ å° noise spikes éå¸¸æ•æ„Ÿï¼Œbootstrapping æœƒåŠ åŠ‡è©²ç¾è±¡ï¼Œä¼°è¨ˆèª¤å·®åˆæœƒæˆç‚ºå¦ä¸€å€‹ noise çš„ä¾†æºã€‚ è²ªå©ªå„ªå…ˆé›†ä¸­æ–¼ä¸€å€‹å°çš„ç¶“é©—å­é›†ï¼Œèª¤å·®æ”¶ç¸®çš„å¾ˆæ…¢ï¼Œç‰¹åˆ¥æ˜¯ä½¿ç”¨å‡½æ•¸ä¼°è¨ˆçš„æ™‚å€™ï¼Œæ„ å‘³è‘—åˆå§‹é«˜èª¤å·®çš„ transition è¢«ç¶“å¸¸ replayï¼Œç¼ºä¹å¤šæ¨£æ€§ä½¿å¾—è©²ç³»çµ±å‚¾å‘æ–¼ over-fittingã€‚ ç‚ºç­è§£æ±ºä¸Šè¿°å•é¡Œï¼Œæˆ‘å€‘å¼•å…¥äº†ä¸€å€‹éš¨æ©Ÿæ¡æ¨£çš„æ–¹æ³•ï¼Œè©²æ–¹æ³•çµåˆäº†\nç´”ç²¹çš„è²ªå©ªå„ªå…ˆ å‡å‹»éš¨æ©Ÿæ¡æ¨£ æˆ‘å€‘ç¢ºä¿è¢«æ¡æ¨£çš„æ©Ÿç‡åœ¨ transition å„ªå…ˆç´šä¸Šæ˜¯å–®èª¿çš„ï¼Œèˆ‡æ­¤åŒæ™‚ï¼Œç¢ºä¿æœ€ä½å„ªå…ˆç´šçš„ transition çš„æ©Ÿç‡ä¹Ÿæ˜¯éé›¶ã€‚æˆ‘å€‘å®šç¾©æ¡æ¨£ transition \\(i\\) çš„æ©Ÿç‡ç‚ºï¼š\n$$ P(i) = \\frac{p_i^\\alpha}{\\Sigma_k p_k^\\alpha} \\tag{1} $$\nå…¶ä¸­ï¼Œ\n\\(p_i\\) æ˜¯ transition \\(i\\) çš„å„ªå…ˆç´šã€‚æŒ‡æ•¸ \\(\\alpha\\) æ±ºå®šäº†ä½¿ç”¨å¤šå°‘çš„ å„ªå…ˆç´šï¼Œç•¶ \\(\\alpha = 0\\) æ™‚æ˜¯å‡å‹»çš„æƒ…æ³ã€‚ ç¬¬ä¸€ç¨®è®Šå½¢æ˜¯ç›´æ¥çš„ï¼Œç­‰æ¯”ä¾‹çš„è€ƒæ…®å„ªå…ˆç´šåˆ¥ï¼Œ\\(p_i = |\\delta_i| + \\epsilon\\)ï¼Œ\\(\\epsilon\\) æ˜¯ç‚ºäº†é¿å…åœ¨ edge-case æ™‚ï¼Œå¦‚æœ TD-error ç‚ºé›¶å°±ä¸æœƒ å†è¢«è¨ªå•ã€‚\nç¬¬äºŒç¨®è®Šå½¢æ˜¯éç›´æ¥çš„ï¼ŒåŸºæ–¼æ’è¡Œçš„å„ªå…ˆç´šï¼Œ\\(p_i = \\frac{1}{\\text{rank}(i)}\\)ï¼Œå…¶ ä¸­ \\(\\text{rank}(i)\\) æ˜¯ replay memory æ ¹æ“š TD-error æ‰€æ’è¡Œçš„ã€‚\nå…©å€‹è®Šå½¢éƒ½æ˜¯èª¤å·®å–®èª¿ï¼Œä½†æ˜¯å¾Œè€…æ›´ç©©å¥ï¼Œå› ç‚ºå…¶å°é›¢ç¾¤é»ä¸æ•æ„Ÿã€‚å…©å€‹è®Šå½¢ç›¸å°å‡å‹»çš„ baseline éƒ½æœ‰å¾ˆå¤§å„ªå‹¢ï¼Œå¦‚ Figure 2. å³å´æ‰€ç¤ºã€‚\n3.4 Annealing the Bias # ç”¨éš¨æ©Ÿæ›´æ–°å¾—ä¾†çš„æœŸæœ›å€¼é æ¸¬ï¼Œä¾è³´æ–¼é€™äº›æ›´æ–°ã€‚Prioritized replay äº†èª¤å·®ï¼Œå› ç‚ºå®ƒä»¥ ä¸€ç¨®ä¸å—æ§çš„å½¢å¼æ”¹è®Šäº†åˆ†ä½ˆï¼Œå¾è€Œæ”¹è®Šäº†é æ¸¬æœƒæ”¶æ–‚åˆ°çš„ solutionï¼ˆå³ä½¿ policy å’Œç‹€ æ…‹åˆ†ä½ˆéƒ½å›ºå®šï¼‰ã€‚æˆ‘å€‘å¯ä»¥ç”¨ä¸‹é¢çš„é‡è¦æ€§æ¡æ¨£æ¬Šé‡ä¾†ä¿®æ­£è©²èª¤å·®ï¼š\n$$ w_i = \\Bigg(\\frac 1 N \\cdot \\frac{1}{P(i)} \\Bigg)^\\beta $$\n","date":"13 December 2018","externalUrl":null,"permalink":"/posts/paper/paper-exp-replay/","section":"Posts","summary":"","title":"è«–æ–‡ç­†è¨˜ Prioritized Experience Reply","type":"posts"},{"content":"","date":"6 December 2018","externalUrl":null,"permalink":"/tags/reinforcement-learning/","section":"Tags","summary":"","title":"Reinforcement Learning","type":"tags"},{"content":" Reinforcement Learning: OpenAI Gym # å¼·åŒ–å­¸ç¿’ï¼ˆReinforcement Learningï¼Œä»¥ä¸‹ç°¡ç¨± RLï¼‰æœ‰åˆ¥èˆ‡ä¸€èˆ¬ç›£ç£å¼å­¸ç¿’ï¼ˆSupervised Learningï¼‰èˆ‡è¦ end-to-end çš„è³‡æ–™è¨“ç·´ã€‚\nReinforcement Learning ä»‹ç´¹ # Agent åœ¨æŸå€‹ state åšäº†ä¸€å€‹ actionï¼Œè€Œç§»åˆ°ä¸‹ä¸€å€‹ stateï¼Œç’°å¢ƒæ­¤æ™‚çµ¦äº† agent ä¸€ å€‹ rewardï¼Œè€Œ agent å‰‡æ ¹æ“šé€™å€‹ reward èª¿æ•´ä»–çš„è…³æ­¥ã€‚\nè½èµ·ä¾†æœ‰é»æŠ½è±¡ï¼Ÿæ¯”å–»ä¾†èªªï¼š\nä½ æ˜¯ agentï¼Œè€Œç’°å¢ƒæ˜¯å®¶ï¼ˆåŒ…æ‹¬ï¼šçˆ¸çˆ¸ã€åª½åª½ç­‰ï¼‰ï¼Œaction æ˜¯ä½ çš„è¡Œç‚ºèˆ‰æ­¢ï¼Œstate æ˜¯ä½  æ‰€åœ¨çš„åœ°é»ï¼Œreward æ˜¯åª½åª½çµ¦ä½ çš„çå‹µï¼ˆå¯èƒ½æ˜¯è² çš„ï¼Œå³ï¼šè² å›é¥‹ï¼‰ã€‚\nè‹¥ä½ ï¼ˆagentï¼‰åœ¨å®¢å»³ï¼ˆstateï¼‰ï¼Œæ‰“ç ´äº†ä¸€å€‹æ¯å­ï¼ˆactionï¼‰ï¼Œè€Œåª½åª½æ–¥è²¬ä½ ï¼ˆrewardï¼‰ ï¼Œä½ å°±æœƒé€éé€™æ¬¡çš„ä¸å°å¿ƒï¼Œå»é¿å…ä¸‹æ¬¡åœ¨å®¢å»³æ™‚ä¸è¦å†æ‰“ç ´æ¯å­ã€‚ ç›¸ååœ°ï¼Œè‹¥ä½ ï¼ˆagentï¼‰åœ¨å»šæˆ¿ï¼ˆstateï¼‰ï¼Œæ´—äº†ç¢—ç­·ï¼ˆactionï¼‰ï¼Œè€Œåª½åª½èªªä½ å¾ˆæ£’ ï¼ˆrewardï¼‰ï¼Œä½ å°±æœƒçŸ¥é“ï¼Œæ´—ç¢—å¯ä»¥å¹«å¿™åˆ†æ“”å®¶äº‹ä¸¦å¾—åˆ°æ­£å›é¥‹ï¼Œæ‰€ä»¥ä»¥å¾Œä¸€æ¨£åˆ°äº†å»šæˆ¿ çœ‹åˆ°æœ‰ç¢—ç­·æ™‚ï¼Œå°±æœƒå¢åŠ æƒ³æ´—ç¢—çš„æ©Ÿç‡ã€‚ ç”±ä¸Šå¯çŸ¥ï¼ŒRL æ˜¯ ML å®¶æ—ä¸­çš„ä¸€å“¡ï¼Œè€Œæˆ‘å€‹äººè¦ºå¾—ä»–æ›´æœ‰ AI çš„æ„Ÿè¦ºï¼Œä»–æ˜¯ä¸€ç¨®ç›®æ¨™å°å‘ ï¼ˆgoal-orientedï¼‰çš„å­¸ç¿’æ–¹æ³•ï¼Œé€é agent èˆ‡ç’°å¢ƒé–“çš„äº’å‹•ç²å¾—æ›´ç¨®çå‹µæˆ–æ‡²ç½°ï¼Œå­¸æœƒå¦‚ ä½•åšã€Œæœ€å¥½çš„ã€æ±ºç­–ï¼ˆpolicyï¼‰ã€‚\næ•´å€‹æ±ºç­–æ±ºå®šéç¨‹å¯ç”±ä»¥ä¸‹ 5 å€‹è¦ç´ çµ„æˆï¼š\nAgentï¼šèˆ‡ environment äº’å‹•ï¼ˆactionï¼‰ã€‚ Actionï¼šagent è—‰ç”±è‡ªå·±çš„ policy æ‰€åšçš„å‹•ä½œã€‚ Environmentï¼šagent çš„è¡Œå‹•ç¯„åœï¼Œæ ¹æ“š agent çš„ action çµ¦äºˆä¸åŒçš„ rewardã€‚ Stateï¼šagent åœ¨ç‰¹å®šæ™‚é–“è™•çš„ç‹€æ…‹ã€‚ Rewardï¼šenvironment æ ¹æ“š agent çš„ action çµ¦çš„çå‹µæˆ–æ‡²ç½°ã€‚ Algorithm Implementation # æˆ‘å€‘ä½¿ç”¨ OpenAI Gym ç•¶ä¸­çš„ CartPole-v0 ä¾†å¯¦ä½œ RL æ¼”ç®—æ³•ï¼ŒOpenAL Gym æä¾›äº†å„ç¨® ä¸åŒçš„ environment ä¾†åš RL çš„è¨“ç·´ã€‚\nç‚ºäº†é¿å…è·¨å¹³å°ä¸Šå®‰è£çš„å•é¡Œï¼Œæˆ‘ä½¿ç”¨ Google Colab çš„é›²ç«¯å¹³å°ä¾† demoã€‚\nCartPole source code\nRandom Action # å…ˆå¾æœ€ç°¡å–®çš„ä¾‹å­ä¾†äº†è§£ç›¸é—œè®Šæ•¸ï¼Œç„¡è«– environment å¦‚ä½•ï¼Œéš¨æ©ŸæŒ‘é¸ä¸€å€‹å¯è¡Œçš„ actionï¼Œå³ï¼šéš¨æ©Ÿæ±ºå®šå·¦ç§»æˆ–å³ç§»ã€‚\n\u0026#34;\u0026#34;\u0026#34; Random Action \u0026#34;\u0026#34;\u0026#34; env = gym.make(\u0026#39;CartPole-v0\u0026#39;) env.reset() # try 30 episodes for i in range(30): obs = env.reset() rewards = 0 # try 50 actions for each episode for t in range(50): action = env.action_space.sample() # randomly choose 0 (left) or 1 (right) obs, reward, done, info = env.step(action) rewards += reward if done: print(\u0026#39;episode {}: Episode finished after {} timesteps, total rewards {}\u0026#39;.format( i, t + 1, rewards)) break ipythondisplay.clear_output(wait=True) env.close() å› ç‚º agent åœ¨é€™å€‹ random choosing action æ™‚ï¼Œä¸¦æ²’æœ‰ä»»ä½•å­¸ç¿’ï¼Œæ‰€ä»¥ reward æ™®éä¸ é«˜ã€‚\nHand-Made Policy # å†ä¾†æˆ‘å€‘å¼•é€²ä¸€å€‹ç°¡å–®çš„ policyï¼š\nå¦‚æœæŸ±å­å‘å·¦å‚¾ï¼ˆè§’åº¦ \\(\u0026lt; 0\\)ï¼‰ï¼Œå‰‡å°è»Šå·¦ç§»ä»¥ç¶­æŒå¹³è¡¡ã€‚ å¦‚æœæŸ±å­å‘å·¦å‚¾ï¼ˆè§’åº¦ \\(\\ge 0\\)ï¼‰ï¼Œå‰‡å°è»Šå³ç§»ä»¥ç¶­æŒå¹³è¡¡ã€‚ \u0026#34;\u0026#34;\u0026#34; Hand-Made Policy \u0026#34;\u0026#34;\u0026#34; # Define policy def choose_action(obs): pos, v, ang, rot = obs return 0 if ang \u0026lt; 0 else 1 # 0: left, 1: right env = gym.make(\u0026#39;CartPole-v0\u0026#39;) env.reset() for i in range(50): obs = env.reset() rewards = 0 for t in range(250): action = choose_action(obs) obs, reward, done, info = env.step(action) rewards += reward if done: print(\u0026#39;episode {}: Episode finished after {} timesteps, total rewards {}\u0026#39;.format( i, t + 1, rewards)) break env.close() Q-Learning with Q Table # $$Q ^ { * } ( s , a ) = \\sum _ { s ^ { \\prime } } T \\left( s , a , s ^ { \\prime } \\right) \\left( R \\left( s , a , s ^ { \\prime } \\right) + \\gamma \\max _ { a ^ { \\prime } } Q ^ { * } \\left( s ^ { \\prime } , a ^ { \\prime } \\right) \\right)$$\nå…¶ä¸­ï¼š\n\\(T\\)ï¼štransition functionï¼Œ\\(0 \\le T \\le 1\\) è¡¨ç™¼ç”Ÿæ©Ÿç‡ \\(R\\)ï¼šreward function \\(\\gamma\\)ï¼šdiscount factorï¼Œé€šå¸¸æœƒæ˜¯ä¸€å€‹ \\(\u0026lt; 1\\) çš„å€¼ï¼Œå¯èƒ½æ˜¯ \\(0.9\\)ã€\\(0.8\\) ä¹‹é¡ï¼Œä»£è¡¨çš„æ˜¯å°æœªä¾† reward çš„é‡è¦–ç¨‹åº¦ã€‚ æ‰€ä»¥æˆ‘å€‘çš„ç›®çš„æ˜¯ï¼š\n$$\\arg\\max_a Q^*(s, a).$$\nagent é€éä¸€æ¬¡æ¬¡è·Ÿ environment äº’å‹•ï¼ˆaï¼‰ç²å¾—çš„ reward ä¾†å­¸ç¿’ Q functionï¼š\n$$ Q(s_t, a_t) = (1 - \\alpha) \\cdot Q(s_{t - 1}, a_{t - 1}) + \\alpha \\cdot (r_t + \\gamma \\max Q(s_{t + 1}, a)) $$\nå…¶ä¸­ï¼Œ\n\\(t\\)ï¼šä¸åŒçš„æ™‚é–“é» \\(\\alpha\\)ï¼šlearning rate pseudo code å¦‚ä¸‹ï¼š\nInitialize Q(s, a) randomly for each episode Initialize s for each step of episode Choose a from s using policy derived from Q (e.g., Îµ-greedy) Take action a, observe r, s\u0026#39; Q(s, a) â† Q(s, a) + Î±[r + Î³ max_a\u0026#39; Q(s\u0026#39;, a\u0026#39;) - Q(s, a)] s â† s\u0026#39; until s is terminal \\(\\epsilon\\)-greedy æ˜¯ä¸€ç¨®åœ¨ exploration å’Œ exploitation é–“å–å¾—å¹³è¡¡çš„æ–¹æ³•ã€‚\nexploration å˜—è©¦ä¸åŒ action exploitation æ²¿ç”¨ç¾æœ‰ policy æ–¹æ³•å¾ˆç°¡å–®ï¼š\n\\(\\epsilon\\) æ™‚é–“ï¼Œagent å˜—è©¦æ–° action \\((1 - \\epsilon)\\) æ™‚é–“ï¼Œagent æ²¿ç”¨ç¾æœ‰ policy \u0026#34;\u0026#34;\u0026#34; Q-Learning \u0026#34;\u0026#34;\u0026#34; import math def choose_action(state, QTable, action_space, epsilon): if np.random.random_sample() \u0026lt; epsilon: # P(randomly choose action) = Îµ return action_space.sample() # choose the action that maximize QTable[state] return np.argmax(QTable[state]) def get_state(obs, n_buckets, bds): state = [0] * len(obs) # state = [0, 0, 0, 0] for i, s in enumerate(obs): # each feature has different distribution l, u = bds[i][0], bds[i][1] # each feature\u0026#39;s lowerbound \u0026amp; upperbound if s \u0026lt;= bds[i][0]: # lower than lowerbound state[i] = 0 elif s \u0026gt;= bds[i][1]: # higher than upperbound state[i] = n_buckets[i] - 1 else: state[i] = int(((s - l) / (u - l)) * n_buckets[i]) return tuple(state) env = gym.make(\u0026#39;CartPole-v0\u0026#39;) # Prepare Q table # Each feature\u0026#39;s n_bucket # \u0026#39;1\u0026#39; represents that any value belongs to the same state, i.e., the feature is not important n_buckets = (1, 1, 6, 3) n_actions = env.action_space.n # bounds of state bds = list(zip(env.observation_space.low, env.observation_space.high)) bds[1] = [-0.5, 0.5] bds[3] = [-math.radians(50), math.radians(50)] # Q Table, each (s, a) pair stores one value QTable = np.zeros(n_buckets + (n_actions,)) # epsilon-greedy, decrease by time def epsilons(i): return max(0.01, min(1, 1.0 - math.log10((i + 1) / 25))) # learning rate, decrease by time def lrs(i): return max(0.01, min(0.5, 1.0 - math.log10((i + 1) / 25))) gamma = 0.99 # reward discount factor # Q-Learning for i in range(200): obs = env.reset() rewards = 0 # convert continuous value -\u0026gt; discrete value state = get_state(obs, n_buckets, bds) epsilon = epsilons(i) lr = lrs(i) for t in range(250): action = choose_action(state, QTable, env.action_space, epsilon) obs, reward, done, info = env.step(action) rewards += reward next_state = get_state(obs, n_buckets, bds) # update Q Table q_next_max = np.amax(QTable[next_state]) QTable[state + (action,)] += lr * (reward + gamma * q_next_max - QTable[state + (action,)]) # Formula print(QTable) # step to next state state = next_state if done: print(\u0026#39;Episode finished after {} timesteps, total rewards {}\u0026#39;.format(t+1, rewards)) break env.close() Deep Q-Learning # åœ¨ CartPole çš„ task ä¸­ï¼Œstate åªæœ‰ 4 å€‹ featuresï¼Œaction åªæœ‰ 0 å’Œ 1 å…©å€‹å€¼ã€‚\nä½†è‹¥ state ä»Šå¤©æ˜¯ä¾†è‡ªæ•´å€‹ç’°å¢ƒï¼ˆä¾‹å¦‚ï¼šæ•´å€‹è¢å¹•ã€Alpha Go åœæ£‹æ£‹ç›¤ï¼‰ï¼Œå› ç‚º states éå¤šï¼Œé€™æ™‚ç”¨ table ä¾†è¡¨ç¤ºå°±ä¸å¤ªå¦¥ç•¶ã€‚\nDeep Q-Leanringï¼ˆä»¥ä¸‹ç°¡ç¨± DQNï¼‰ï¼šæˆ‘å€‘å¯ä»¥ç”¨ deep neural network å¹«æˆ‘å€‘æå– features ä¸¦é€¼è¿‘ Q functionã€‚\nNN è—‰ç”±å¤§é‡çš„ input-output end-to-end è¨“ç·´ï¼Œæ‰¾å‡ºï¼š\n$$f(input) = output.$$\næŠŠå®ƒè½‰æˆ policyï¼š\n$$\\pi(state) = action.$$\nDeep Q-Learning Implementation # åœ¨ Human-level control through deep reinforcement learning ä¸­ï¼Œæä¾›äº†ä¸‰ç¨®è¨“ç·´ DQN çš„ tipsï¼š\nUse experience replayï¼šæŠŠ experience å­˜åœ¨ memoryï¼Œè¨“ç·´æ™‚éš¨æ©ŸæŠ½æ¨£ã€‚å„ªé»æ˜¯å¯ä»¥ æ‰“äº‚ä¸åŒ experience ä¹‹é–“ä¸å­˜åœ¨çš„æ™‚é–“é—œä¿‚ã€‚ Freeze target Q-networkï¼šå³å»ºç«‹å…©ç¨® Q-networkï¼Œ å¯¦éš›é€²è¡Œè¨“ç·´çš„ evaluation network è¨“ç·´ç›®æ¨™ target network è‹¥åªè¨“ç·´ä¸€å€‹ nnï¼Œæ¯æ›´æ–°ä¸€æ¬¡æ™‚ï¼Œä¸ä½†æ­£åœ¨è¨“ç·´çš„ $Q(s, a)$ åœ¨è®Šï¼Œç›®æ¨™ $Q(s\u0026rsquo;, a\u0026rsquo;)$ ä¹Ÿåœ¨è®Šï¼Œé€™æ¨£æ˜¯ç„¡æ³•æ”¶æ–‚çš„ï¼ Clip rewardsï¼šé™ç¸® reward çš„å€¼ï¼Œä»¥åˆ© backpropagation ä¸­èƒ½ç©©å®šåœ°è¨ˆç®— gradientã€‚ Step 1: å»ºç«‹ Network # å…ˆå»ºç«‹ä¸€å±¤ hidden layerï¼ŒæŠŠ state å‚³å…¥å¾Œï¼Œå¾—å‡ºæ¯å€‹ action çš„åˆ†æ•¸ï¼Œåˆ†æ•¸è¶Šé«˜çš„ action è¶Šå®¹æ˜“è¢«æŒ‘é¸ã€‚\nç›®æ¨™ï¼šå°æœªä¾†è¶Šæœ‰åˆ©çš„ action åˆ†æ•¸è¶Šé«˜ã€‚\nclass Net(nn.Module): def __init__(self, n_states, n_actions, n_hidden): super(Net, self).__init__() self.fc1 = nn.Linear(n_states, n_hidden) self.out = nn.Linear(n_hidden, n_actions) def forward(self, x): x = self.fc1(x) x = F.relu(x) return self.out(x) Step 2: å»ºç«‹ Deep Q-Network # Tips ä¸­æåˆ°ï¼Œç¸½å…±éœ€è¦å…©å€‹ networkï¼š\nevaluation networkï¼ˆeval_netï¼‰ target networkï¼ˆtarg_netï¼‰ å’Œ\nmemory å„²å­˜ experience # Deep Q-Network, composed of one eval network, one target network class DQN(object): def __init__(self, n_states, n_actions, n_hidden, batch_size, lr, epsilon, gamma, target_replace_iter, memory_capacity): self.eval_net = Net(n_states, n_actions, n_hidden) self.target_net = Net(n_states, n_actions, n_hidden) # initialize memory, each memory slot is of size (state + next state + reward + action) self.memory = np.zeros((memory_capacity, n_states * 2 + 2)) self.optimizer = torch.optim.Adam(self.eval_net.parameters(), lr=lr) self.loss_func = nn.MSELoss() self.memory_counter = 0 self.learn_step_counter = 0 # for target network update self.n_states = n_states self.n_actions = n_actions self.n_hidden = n_hidden self.batch_size = batch_size self.lr = lr self.epsilon = epsilon self.gamma = gamma self.target_replace_iter = target_replace_iter self.memory_capacity = memory_capacity def choose_action(self, state): x = torch.unsqueeze(torch.FloatTensor(state), 0) # epsilon-greedy if np.random.uniform() \u0026lt; self.epsilon: # random action = np.random.randint(0, self.n_actions) # greedy else: # feed into eval net, get scores for each action actions_value = self.eval_net(x) # choose the one with the largest score action = torch.max(actions_value, 1)[1].data.numpy()[0] return action def store_transition(self, state, action, reward, next_state): # Pack the experience transition = np.hstack((state, [action, reward], next_state)) # Replace the old memory with new memory index = self.memory_counter % self.memory_capacity self.memory[index, :] = transition self.memory_counter += 1 def learn(self): # Randomly select a batch of memory to learn from sample_index = np.random.choice(self.memory_capacity, self.batch_size) b_memory = self.memory[sample_index, :] b_state = torch.FloatTensor(b_memory[:, :self.n_states]) b_action = torch.LongTensor( b_memory[:, self.n_states:self.n_states+1].astype(int)) b_reward = torch.FloatTensor(b_memory[:, self.n_states+1:self.n_states+2]) b_next_state = torch.FloatTensor(b_memory[:, -self.n_states:]) # Compute loss between Q values of eval net \u0026amp; target net # evaluate the Q values of the experiences, given the states \u0026amp; actions taken at that time q_eval = self.eval_net(b_state).gather(1, b_action) # detach from graph, don\u0026#39;t backpropagate q_next = self.target_net(b_next_state).detach() q_target = b_reward + self.gamma * \\ q_next.max(1)[0].view(self.batch_size, 1) # compute the target Q values loss = self.loss_func(q_eval, q_target) # Backpropagation self.optimizer.zero_grad() loss.backward() self.optimizer.step() # Update target network every few iterations (target_replace_iter), # i.e. replace target net with eval net self.learn_step_counter += 1 if self.learn_step_counter % self.target_replace_iter == 0: self.target_net.load_state_dict(self.eval_net.state_dict()) Step 3: è¨“ç·´ # æ­¥é©Ÿå¦‚ä¸‹ï¼š\né¸æ“‡ action å„²å­˜ experience train if __name__ == \u0026#39;__main__\u0026#39;: env = gym.make(\u0026#39;CartPole-v0\u0026#39;) env = env.unwrapped # For cheating mode to access values hidden in the environment # Environment parameters n_actions = env.action_space.n n_states = env.observation_space.shape[0] # Hyper parameters n_hidden = 50 batch_size = 32 lr = 0.01 # learning rate epsilon = 0.1 # epsilon-greedy, factor to explore randomly gamma = 0.9 # reward discount factor target_replace_iter = 100 # target network update frequency memory_capacity = 2000 n_episodes = 400 if CHEAT else 4000 # Create DQN dqn = DQN(n_states, n_actions, n_hidden, batch_size, lr, epsilon, gamma, target_replace_iter, memory_capacity) # Collect experience for i_episode in range(n_episodes): t = 0 # timestep rewards = 0 # accumulate rewards for each episode state = env.reset() # reset environment to initial state for each episode while True: # Agent takes action action = dqn.choose_action(state) # choose an action based on DQN next_state, reward, done, info = env.step( action) # do the action, get the reward # Cheating part: modify the reward to speed up training process if CHEAT: x, v, theta, omega = next_state # reward 1: the closer the cart is to the center, the better r1 = (env.x_threshold - abs(x)) / env.x_threshold - 0.8 # reward 2: the closer the pole is to the center, the better r2 = (env.theta_threshold_radians - abs(theta)) / \\ env.theta_threshold_radians - 0.5 reward = r1 + r2 # Keep the experience in memory dqn.store_transition(state, action, reward, next_state) # Accumulate reward rewards += reward # If enough memory stored, agent learns from them via Q-learning if dqn.memory_counter \u0026gt; memory_capacity: dqn.learn() # Transition to next state state = next_state if done: print(\u0026#39;Episode finished after {} timesteps, total rewards {}\u0026#39;.format(t+1, rewards)) break t += 1 env.close() ","date":"6 December 2018","externalUrl":null,"permalink":"/posts/tech/rl-on-openai-gym/","section":"Posts","summary":"","title":"Reinforcement Learning on OpenAI Gym","type":"posts"},{"content":"","date":"26 November 2018","externalUrl":null,"permalink":"/tags/nips/","section":"Tags","summary":"","title":"NIPS","type":"tags"},{"content":"Paper Link\nç¾åœ¨ image to image çš„ tasks å·²ç¶“æ˜¯ç•¶ç´…ç‚¸å­é›ï¼ŒNVIDIA é€™å›å’Œ MIT CSAIL ç›´æ¥æ›´ä¸Š ä¸€å±¤æ¨“ï¼Œé–‹ç™¼å‡ºäº† video to video çš„è½‰æ›ç³»çµ±ï¼Œä¸¦ä¸”èƒ½å¤ æ”¯æ´åˆ° 2K çš„è§£æåº¦ï¼Œå°±è®“æˆ‘å€‘ ä¾†çœ‹çœ‹é€™ç¯‡ vid2vid å§ï¼\n1 Introduction # å»ºæ¨¡å’Œå‹•æ…‹åœ°é‡å»ºè¦–è¦ºä¸–ç•Œçš„èƒ½åŠ›å°æ–¼æ§‹å»º intelligent agents æ˜¯è‡³é—œé‡è¦çš„ã€‚é™¤äº†ç§‘å­¸ èˆˆè¶£å°å‘å¤–ï¼Œå­¸ç¿’é€£çºŒè¦–è¦ºç¶“é©—åœ¨è¨ˆç®—æ©Ÿè¦–è¦ºã€æ©Ÿå™¨äººå’Œè¨ˆç®—æ©Ÿåœ–å½¢å­¸ä¸­æœ‰å»£æ³›çš„æ‡‰ç”¨ã€‚\nFigure 1: Generating a photorealistic video from an input segmentation map video on Cityscapes. Top left: input. Top right: pix2pixHD. Bottom left: COVST. Bottom right: vid2vid (ours). 2 Related Work # Generative Adversarial Networks (GANs) # Generator å’Œ discriminator è¦å„˜é‡é”æˆ zero-sumã€‚æœ¬ç¯‡ paper ä½¿ç”¨çš„ä¸»è¦æ–¹æ³•ç‚º conditional GANã€‚æ­¤ç¯‡ paper çš„æ–¹æ³•ä¸åªæ˜¯é æ¸¬æœªä¾†å½±ç‰‡å°ç•¶å‰è§€å¯Ÿåˆ°åœ–ç‰‡ï¼Œä¸¦ä¸”åœ¨å¯æ“ ä½œçš„èªç¾©è¡¨ç¤ºä¸Šåˆæˆç…§ç‰‡èˆ¬é€¼çœŸçš„å½±ç‰‡ï¼Œä¾‹å¦‚ segmentation masksã€è‰åœ–ã€å§¿å‹¢ã€‚\nImage-to-image translation # ä¸ä½†å¸Œæœ›åœ–ç‰‡æ“¬çœŸï¼Œé‚„å¸Œæœ›èƒ½è£½ç…§å‡º temporally coherant framesã€‚é€™åœ¨é•·æ™‚é–“çš„å½±ç‰‡æ˜¯ éå¸¸å…·æœ‰æŒ‘æˆ°æ€§çš„ã€‚\nUnconditional video synthesis # å› ç‚º unconditional çš„è¨­å®šï¼ŒVGANã€TGAN å’Œ MoCoGAN éƒ½å¾—åˆ°é€™è§£æåº¦è¼ƒå·®ã€æ™‚é–“è¼ƒçŸ­çš„ å½±ç‰‡ã€‚\nFuture video prediction # ä½œè€…åœ¨ç”Ÿæˆæœªä¾†å½±ç‰‡æ™‚ï¼Œæ˜¯æ ¹ã¯«ã€Œç•¶å‰å·²ç¶“å­˜åœ¨çš„å½±ç‰‡ã€ï¼Œæ‰€ä»¥æœ‰åˆ¥æ–¼å‚³çµ±çš„ç”Ÿæˆæ–¹å¼ï¼Œæœƒ é‡åˆ° regress-to-the-mean çš„å•é¡Œï¼Œæœ¬ç¯‡åšå‡ºä¾†çš„çµæœå¾€å¾€æœƒå¥½å¾ˆå¤šï¼Œè§£æåº¦ä¹Ÿè¼ƒé«˜ã€‚\nVideo-to-video synthesis # 3 Video-to-Video Synthesis # ä»¤ \\(\\textbf s_1^T \\equiv \\{\\textbf s_1, \\textbf s_2, \\dots, \\textbf s_T\\}\\)ï¼šä¸€ç³»åˆ—ç”¨æ–¼è¦–é »åˆæˆçš„æºåœ–åƒã€‚ä¾‹å¦‚ï¼šsemantic segmentation masksã€‚\nä»¤ \\(\\textbf x_1^T \\equiv \\{\\textbf x_1, \\textbf x_2, \\dots, \\textbf x_T\\}\\)ï¼šå°æ‡‰çš„çœŸå¯¦åœ–ç‰‡ã€‚\nVideo-to-video synthesis çš„ç›®æ¨™æ˜¯å­¸ç¿’ä¸€å€‹ï¼šå¾ \\(\\text s_1^T\\) mapping åˆ° \\(\\tilde{\\textbf x}_1^T \\equiv \\{\\tilde{\\textbf x}_1, \\tilde{\\textbf x}_2, \\dots, \\tilde{\\textbf x}_T\\}\\) çš„ functionï¼Œå› æ­¤çµ¦å®š \\(\\textbf s_1^T\\) æ‰€ç”¢ç”Ÿçš„æ¢ä»¶åˆ†ä½ˆï¼Œ\\(\\tilde{\\textbf x}_1^T\\) è¦å’Œçµ¦å®š \\(\\textbf s_1^T\\) æ‰€ç”¢ç”Ÿçš„æ¢ä»¶åˆ†ä½ˆ \\(\\textbf x_1^T\\) ç›¸åŒã€‚\n$$ p(\\tilde{\\textbf x}_1^T \\mid \\textbf s_1^T) = p(\\textbf x_1^T \\mid \\textbf s_1^T). \\tag{1} $$\næœ¬ç¯‡ paper ä½¿ç”¨çš„æ¶æ§‹ç‚º conditional GANã€‚\nä»¤ \\(G\\)ï¼ˆgeneratorï¼‰ï¼šå°‡ input source sequence æ˜ å°„åˆ°å°æ‡‰çš„ output image sequenceï¼Œå³ \\(\\textbf x_1^T = G(\\textbf s_1^T)\\)ï¼Œæˆ‘å€‘è—‰ç”±åº•ä¸‹çš„ minimax optimization problem ä¾†è¨“ç·´ generatorï¼š\n$$ \\max_D \\min_G E_{(\\textbf x_1^T, \\textbf s_1^T)} [\\log D(\\textbf x_1^T, \\textbf s_1^T)] + E_{\\textbf s_1^T} [\\log(1 - D(G(\\textbf s_1^T), \\textbf s_1^T))], \\tag{2} $$\nSequential generator # åœ–ç‰‡ä¾†æº\nç‚ºäº†ç°¡åŒ– video-to-video åˆæˆå•é¡Œï¼Œæˆ‘å€‘åšäº† Markov å‡è¨­ï¼Œå°‡æ¢ä»¶åˆ†ä½ˆ \\(p \\left( \\tilde { \\mathbf { x } } _ { 1 } ^ { T } | \\mathbf { s } _ { 1 } ^ { T } \\right)\\) åˆ†è§£ç‚ºä»¥ä¸‹çš„ä¹˜ç©å½¢å¼ï¼š\n$$ p(\\tilde{\\textbf x}_1^T \\mid \\textbf s_1^T) = \\prod_{t = 1}^T p(\\tilde{\\textbf x}_t \\mid \\tilde{\\textbf x}_{t - L}^{t - 1}, \\textbf s_{t - L}^t). \\tag{3} $$\nä¹Ÿå°±æ˜¯èªªï¼Œæˆ‘å€‘å‡å®šé€™äº›å½±ç‰‡çš„çš„æ¯ä¸€å¹€å¯ä»¥æŒ‰é †åºç”Ÿæˆï¼Œè€Œ \\(t\\)-th frame \\(\\tilde{\\textbf x}_t\\) åªè¢«ä»¥ä¸‹ä¸‰ä»¶äº‹æ‰€æ±ºå®šï¼š\nç›®å‰çš„ source image \\(\\textbf s_t\\) éå» \\(t - L\\) åˆ° \\(t - 1\\) å…± \\(L\\) å€‹ source image \\(\\textbf s_{t - L}^{t - 1}\\) éå» \\(t - L\\) åˆ° \\(t - 1\\) å…± \\(L\\) å€‹ç”Ÿæˆçš„åœ–ç‰‡ \\(\\tilde{\\textbf x}_{t - L}^{t - 1}\\) é€™ç¯‡è«–æ–‡é€éå¯¦é©—æ±ºå®šäº† \\(L = 2\\)ã€‚\nè¦–é »è¨Šè™Ÿåœ¨é€£çºŒå¹€ä¸­åŒ…å«å¤§é‡å†—é¤˜è¨Šæ¯ã€‚å¦‚æœå¾ç•¶å‰å¹€åˆ°ä¸‹ä¸€å¹€çš„å…‰æµæ˜¯å·²çŸ¥çš„ï¼Œæˆ‘å€‘å¯ä»¥ ç”¨å®ƒä¾†æ‰­æ›²ç•¶å‰å¹€ä»¥ä¼°è¨ˆä¸‹ä¸€å¹€ã€‚é™¤äº†é®æ“‹å€åŸŸå¤–ï¼Œé€™ç¨®ä¼°è¨ˆåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯æ­£ç¢ºçš„ã€‚åŸºæ–¼ é€™ç¨®è§€å¯Ÿï¼Œæˆ‘å€‘å°‡ \\(F\\) æ¨¡å‹åŒ–ç‚º\n$$ \\tilde{\\textbf x}_t = F(\\tilde{\\textbf x}_{t - L}^{t - 1}, \\tilde{\\textbf s}_{t - L}^t) = (\\textbf 1 - \\tilde{\\textbf m}_t) \\odot \\tilde{\\textbf w}_{t - 1} (\\tilde{\\textbf x}_{t - 1}) + \\tilde{\\textbf m}_t \\odot \\tilde{\\textbf h}_t, \\tag{4} $$\nå…¶ä¸­ï¼š\n\\(\\odot\\)ï¼šelement-wise ç›¸ä¹˜ operator \\(\\textbf 1\\)ï¼šå…¨ç‚º \\(1\\) çš„ image ç¬¬ä¸€é …ï¼šå‰ä¸€å¹€æ‰­æ›²çš„åƒç´ ï¼ˆä¼°è¨ˆç”± \\(t - 1\\)th frame åˆ° \\(t\\)th frame é€é warping çš„æ”¹è®Šï¼‰ ç¬¬äºŒé …ï¼šæ¨¡ç³Šæ–°çš„åƒç´ ï¼ˆæœƒæœ‰æ¯”è¼ƒå¤§çš„è®Šå‹•ï¼‰ \\(\\tilde{\\textbf w}_{t - 1} = W(\\tilde{\\textbf x}_{t - L}^{t - 1}, \\tilde{\\textbf s}_{t - L}^t)\\)ï¼šç”± \\(\\tilde{\\textbf x}_{t - 1}\\) åˆ° \\(\\tilde{\\textbf x}_t\\) çš„ä¼°è¨ˆå…‰æµ \\(W\\)ï¼šoptical flow prediction function \\(\\tilde{\\textbf h}_t = H(\\tilde{\\textbf x}_{t - L}^{t - 1}, \\textbf s_{t - L}^t)\\)ï¼šæ¨¡ç³Šå¾Œçš„åœ–ç‰‡ï¼ˆgenerated from scratchï¼‰ã€‚ \\(\\tilde{\\textbf m}_t = M(\\tilde{\\textbf x}_{t - L}^{t - 1}, \\tilde{\\textbf s}_{t - L}^t)\\)ï¼šé®æ“‹ maskï¼Œå…¶ä¸­å€¼ç‚º \\(0\\) åˆ° \\(1\\) ä¹‹ é–“ \\(M\\)ï¼šmask prediction function Conditional image discriminator # $D_I$ output\n$1$ for a true pair $(\\textbf x_t, \\textbf s_t)$ $0$ for a fake pair $(\\tilde{\\textbf x}_t, \\textbf s_t)$ Conditional video discriminator # ä»¤ $\\textbf w_{t - K}^{t - 2}$ï¼š$K$ å€‹é€£çºŒåœ–ç‰‡ $\\textbf x_{t - K}^{t - 1}$ çš„ $K - 1$ å€‹å…‰æµ\n$D_V$ output\n$1$ for a true pair $(\\textbf x_{t - K}^{t - 1}, \\textbf w_{t - K}^{t - 2})$ $0$ for a fake pair $(\\tilde{\\textbf x}_{t - K}^{t - 1}, \\textbf w_{t - K}^{t - 2})$ å¦å¤–ï¼Œæˆ‘å€‘ä»‹ç´¹å…©å€‹ sampling operators\n$\\phi_I$ï¼ˆrandom image sampling operatorï¼‰ ï¼š$\\phi_I(\\textbf x_1^T, \\textbf s_1^T) = (\\textbf x_i, \\textbf s_i)$\nå…¶ä¸­ï¼š$i$ ç‚º $1$ åˆ° $T$ çš„æ•´æ•¸\n$\\phi_V$ï¼ˆrandomly retrieve $K$ consecutive framesï¼‰ ï¼š$\\phi_V(\\textbf w_1^{T - 1}, \\textbf x_1^T, \\textbf s_1^T) = (\\textbf w_{i - K}^{i - 2}, \\textbf x_{i - K}^{i - 1}, \\textbf s_{i - K}^{i - 1})$\nå…¶ä¸­ï¼š$i$ ç‚º $K + 1$ åˆ° $T + 1$ çš„æ•´æ•¸\nLearning objective function # $$\\min_F (\\max_{D_I} \\mathcal L_I(F, D_I) + \\max_{D_V} \\mathcal L_V(F, D_V)) + \\lambda_W \\mathcal L_W(F), \\tag{5}$$\nå…¶ä¸­ï¼š\n$\\mathcal L_I$ï¼šGAN loss for $D_I$ $\\mathcal L_V$ï¼šGAN loss on $K$ consecutive frames for $D_V$ $\\mathcal L_W(F)$ï¼šflow estimation loss $\\lambda_W$ï¼šå¯¦é©—å¾Œï¼Œè¨­ç‚º $10$ GAN loss $\\mathcal L_I$ï¼š\n$$ E _ { \\phi _ { I } \\left( \\mathbf { x } _ { 1 } ^ { T } , \\mathbf { s } _ { 1 } ^ { T } \\right) } \\left[ \\log D _ { I } \\left( \\mathbf { x } _ { i } , \\mathbf { s } _ { i } \\right) \\right] + E _ { \\phi _ { I } \\left( \\tilde { \\mathbf { x } } _ { 1 } ^ { T } , \\mathbf { s } _ { 1 } ^ { T } \\right) } \\left[ \\log \\left( 1 - D _ { I } \\left( \\tilde { \\mathbf { x } } _ { i } , \\mathbf { s } _ { i } \\right) \\right) \\right]. \\tag{6} $$\nGAN loss $\\mathcal L_V$ï¼š\n$$ E _ { \\phi _ { V } \\left( \\mathbf { w } _ { 1 } ^ { T - 1 } , \\mathbf { x } _ { 1 } ^ { T } , \\mathbf { s } _ { 1 } ^ { T } \\right) } \\left[ \\log D _ { V } \\left( \\mathbf { x } _ { i - K } ^ { i - 1 } , \\mathbf { w } _ { i - K } ^ { i - 2 } \\right) \\right] + E _ { \\phi _ { V } \\left( \\mathbf { w } _ { 1 } ^ { T - 1 } , \\tilde { \\mathbf { x } } _ { 1 } ^ { T } , \\mathbf { s } _ { 1 } ^ { T } \\right) } \\left[ \\log \\left( 1 - D _ { V } \\left( \\tilde { \\mathbf { x } } _ { i - K } ^ { i - 1 } , \\mathbf { w } _ { i - K } ^ { i - 2 } \\right) \\right) \\right]. \\tag{7} $$\næˆ‘å€‘é€ééè¿´çš„å‘¼å« $F$ ä¾†å–å¾— $\\tilde{\\textbf x}_1^T$\nThe flow loss $\\mathcal L_W$ æ“æœ‰å…©é …ï¼Œç¬¬ä¸€é …æ˜¯ ground truth å’Œä¼°è¨ˆæµé‡ä¹‹é–“é»å° é»èª¤å·®ï¼Œç¬¬äºŒé …å‰‡æ˜¯å°‡å‰ä¸€å¹€æ‰­æ›²åˆ°ä¸‹ä¸€å¹€æ™‚çš„ warping lossï¼š\n$$ \\mathcal { L } _ { W } = \\frac { 1 } { T - 1 } \\sum _ { t = 1 } ^ { T - 1 } \\left( \\left| \\tilde { \\mathbf { w } } _ { t } - \\mathbf { w } _ { t } \\right| _ { 1 } + \\left| \\tilde { \\mathbf { w } } _ { t } \\left( \\mathbf { x } _ { t } \\right) - \\mathbf { x } _ { t + 1 } \\right| _ { 1 } \\right). \\tag{8} $$\nForeground-background prior # $$ F \\left( \\tilde { \\mathbf { x } } _ { t - L } ^ { t - 1 } , \\mathbf { s } _ { t - L } ^ { t } \\right) = \\left( \\mathbf { 1 } - \\tilde { \\mathbf { m } } _ { t } \\right) \\odot \\tilde { \\mathbf { w } } _ { t - 1 } \\left( \\tilde { \\mathbf { x } } _ { t - 1 } \\right) + \\tilde { \\mathbf { m } } _ { t } \\odot \\left( \\left( \\mathbf { 1 } - \\mathbf { m } _ { B , t } \\right) \\odot \\tilde { \\mathbf { h } } _ { F , t } + \\mathbf { m } _ { B , t } \\odot \\tilde { \\mathbf { h } } _ { B , t } \\right) \\tag{9} $$\n4 Experiments # Figure 5: Example sketch-to-face video results. Our method can generate realistic expressions given the edge maps. Figure 6: Example pose-to-dance video results. The left image pair shows the result on the same dancer (with different clothing) doing different motions, while the other two pairs are results on different dancers. 5 Conclusion # Limitaions and future work # å› ç‚º label maps è¨Šæ¯ä¸è¶³ï¼Œå°è‡´åœ¨åˆæˆè½‰å½ä¸­çš„è»Šå­æ™‚é‚„æ˜¯æ»¿å›°é›£çš„ã€‚çŒœæ¸¬è§£æ±ºæ–¹å¼ï¼š æ·»åŠ é¡å¤–çš„ 3D è¨Šæ¯ï¼Œä¾‹å¦‚ï¼šdepth mapsã€‚ å¶çˆ¾æ±½è»Šçš„é¡è‰²æœƒé€æ¼¸æ”¹è®Šï¼Œé€™å€‹å•é¡Œå¯é€é object tracking å»å¼·è¿«åŒä¸€å€‹ç‰©ä»¶é¡è‰² å§‹çµ‚ä¿æŒä¸€è‡´ã€‚ åŸ·è¡Œèªç¾©æ“ä½œçš„æ™‚å€™ï¼Œå¶çˆ¾æœƒå‡ºç¾æ˜é¡¯çš„äººå·¥ç—•è·¡ï¼Œé€™å¯èƒ½æ˜¯å› ç‚º label æ™‚å¤ªéç²—ç³™ã€‚ ","date":"26 November 2018","externalUrl":null,"permalink":"/posts/paper/paper-vid2vid/","section":"Posts","summary":"","title":"è«–æ–‡ç­†è¨˜ Video-to-Video Synthesis","type":"posts"},{"content":"","date":"25 November 2018","externalUrl":null,"permalink":"/tags/turing/","section":"Tags","summary":"","title":"Turing","type":"tags"},{"content":"Paper Link\nä»Šå¤©æ˜¯å°ç£ä¹åˆä¸€ç¸£å¸‚é•·é¸èˆ‰éš”å¤©ï¼Œæ±ºå®šè¦ä¾†çœ‹ä¸€ç¯‡ 1950 å¹´ï¼Œç”±è¨ˆç®—æ©Ÿç§‘å­¸ä¹‹çˆ¶ A.M. Turing æ‰€å¯«çš„ Computing Machinery and Intelligenceã€‚\né€™ç¯‡ paper æå‡ºäº†é›»è…¦æ™ºèƒ½ç•¶ä¸­å¹¾å€‹é‡è¦çš„æƒ³æ³•ï¼Œæ•¸å­¸æè¿°ä¸å¤šï¼Œä¸»è¦è‘—é‡åœ¨ç†è«–ä¸Šçš„æ è¿°ã€‚\nåœ–éˆæ¸¬è©¦ï¼ˆTuring testï¼‰æ˜¯ AI é ˜åŸŸä¸­ï¼Œä¸€é …è‘—åä¸”å…·çˆ­è­°çš„æ¸¬è©¦æ–¹æ³•ã€‚é€™æ˜¯ä»¥ Alan Turing åœ¨ 1950 ç¬¬ä¸€ä»½è«–æ–‡ã€Œé‹ç®—æ©Ÿå™¨èˆ‡æ™ºèƒ½ã€ï¼ˆComputing Machinery and Intelligenceï¼‰ç‚ºåŸºç¤æ‰€è¨­è¨ˆçš„å•ç­”ï¼Œç›®æ¨™åœ¨åˆ†è¾¨æ©Ÿå™¨æ˜¯å¦å…·å‚™äººé¡æ‰€å…·æœ‰çš„æ™ºèƒ½ ï¼ˆIntelligenceï¼‰ã€‚\næ–‡æœ¬å¾ˆé•·ï¼Œåˆæ˜¯ 1950 å¹´çš„è‹±å¼è‹±æ–‡ï¼Œä½†æˆ‘æœƒè©¦è‘—å»ç¿»è­¯ä¸¦æ•´ç†é€™ç¶“å…¸çš„ paperã€‚\n1. The Imitation Game # é¦–å…ˆåœ–éˆæå‡ºäº†ä¸€å€‹å•é¡Œï¼š\n\u0026ldquo;Can machines think?\u0026rdquo;\né€™å€‹æ‡‰è©²è¦å¾ä¸»è©ï¼ˆmachinesï¼‰å’Œå‹•è©ï¼ˆthinkï¼‰çš„å®šç¾©å‡ºç™¼ã€‚\nä½†åœ–éˆèªç‚ºé‡æ–°çµ¦ machines å’Œ think å®šç¾©æ˜¯å±éšªçš„ï¼Œæ‰€ä»¥ä»–é¸æ“‡äº†æå‡ºå¦ä¸€å€‹å•é¡Œï¼Œè€Œ é€™å€‹å•é¡Œå’ŒåŸå•é¡Œç·Šå¯†ç›¸é—œï¼Œæœ€é‡è¦çš„æ˜¯æ˜ç¢ºæ€§ã€‚\næ–°çš„å•é¡Œç¨±ä¹‹ç‚º imitation gameï¼ˆæ¨¡ä»¿éŠæˆ²ï¼‰ã€‚éœ€è¦ä¸‰å€‹äººä¾†ç©é€™å€‹éŠæˆ²ï¼š\nAï¼šä¸€å€‹ç”·äºº Bï¼šä¸€å€‹å¥³äºº Cï¼šä¸€å€‹è©¢å•äººï¼ˆç”·å¥³çš†å¯ï¼‰ C å¾…åœ¨ä¸€å€‹èˆ‡å¦å¤–å…©äººéš”é›¢çš„å±‹å­è£¡ã€‚\néŠæˆ²çš„ç›®æ¨™æ˜¯ï¼šC åˆ¤æ–·å‡ºå¤–é¢çš„äººå“ªå€‹æ˜¯ Aï¼Ÿå“ªå€‹æ˜¯ Bï¼Ÿ\nC ç”¨æ¨™ç±¤ Xã€Y ä»£è¡¨å¤–é¢çš„å…©å€‹äººã€‚\néŠæˆ²çµæŸæ™‚ï¼Œä»–è¦èªªå‡ºã€ŒX æ˜¯ Aï¼ŒY æ˜¯ Bã€æˆ–è€…ã€ŒX æ˜¯ Bï¼ŒY æ˜¯ Aã€ã€‚\nA çš„ç›®æ¨™æ˜¯ç›¡å¯èƒ½çš„é¨™é Cï¼Œè€Œ B çš„ç›®æ¨™æ˜¯å¹«åŠ© C åšå‡ºæ­£ç¢ºåˆ¤æ–·ã€‚\nç¾åœ¨æˆ‘å€‘æå‡ºä¸€å€‹å•é¡Œï¼š\nã€Œå¦‚æœåœ¨é€™éŠæˆ²ä¸­ï¼Œç”¨ä¸€å€‹æ©Ÿå™¨æ“”ä»» A çš„è§’è‰²ã€\nå°‡æœƒç™¼ç”Ÿä»€éº¼æƒ…æ³ï¼ŸåŒèˆ‡ä¸€ç”·ï¼ˆAï¼‰ä¸€å¥³ï¼ˆBï¼‰ç©é€™å€‹éŠæˆ²ç›¸æ¯”ï¼ŒC åˆ¤æ–·éŒ¯èª¤çš„é »ç‡æ˜¯å¦ç™¼ç”Ÿ è®ŠåŒ–ï¼Ÿé€™å€‹å•é¡Œå–ä»£äº†åŸå…ˆçš„å•é¡Œï¼š\u0026ldquo;Can machines think?\u0026quot;ã€‚\n2. Critique of the New Problem # æ–°å•é¡Œçš„å„ªå‹¢åœ¨æ–¼ï¼šå®ƒæŠŠä¸€å€‹äººçš„é«”åŠ›å’Œæ™ºåŠ›å®Œå…¨å€åˆ†é–‹ä¾†ã€‚æ–°çš„è©•åˆ¤æ¨™æº–çš„å…¶å®ƒå„ªå‹¢åœ¨ä¸‹ é¢çš„æ¨£ä¾‹å•é¡Œå’Œå›ç­”ä¸­é¡¯ç¤ºäº†å‡ºä¾†ï¼š\nQï¼šè«‹å¯«ä¸€é¦–ä»¥ Forth Bridge ç‚ºä¸»é¡Œçš„è©©ã€‚ Aï¼šæˆ‘ç„¡èƒ½ç‚ºåŠ›ï¼Œæˆ‘å¾ä¾†éƒ½ä¸èƒ½å¯«è©©ã€‚ Qï¼š 34957 åŠ  70764 ç­‰æ–¼å¤šå°‘ï¼Ÿ Aï¼šï¼ˆåœäº†ä¸‰åç§’é˜å¾Œçµ¦å‡ºç­”æ¡ˆ) 105621ã€‚ Qï¼šä½ ç©è±¡æ£‹å—ï¼Ÿ Aï¼šç©ã€‚ Qï¼šæˆ‘çš„ç‹åœ¨ K1ï¼Œæ²’æœ‰åˆ¥çš„æ£‹å­äº†ï¼Œä½ åªæœ‰ç‹åœ¨ K6ï¼Œè»Šåœ¨ R1ã€‚æ›ä½ èµ°ï¼Œä½ èµ°å“ªæ­¥ï¼Ÿ Aï¼šï¼ˆåäº”ç§’é˜çš„åœé “å¾Œï¼‰è»Šç§»å‹•åˆ° R8ï¼Œå°‡è»ã€‚ é€™ç¨®å•ç­”å½¢å¼å¹¾ä¹é©ç”¨æ–¼æˆ‘å€‘æƒ³è¦åŒ…æ‹¬çš„äººé¡è¡Œç‚ºçš„ä¸€åˆ‡å½¢å¼ã€‚æˆ‘å€‘ä¸å¸Œæœ›å› ç‚ºä¸€å€‹æ©Ÿå™¨ä¸ èƒ½åœ¨é¸ç¾æ¯”è³½ä¸­å‹å‡ºå°±èªç‚ºå®ƒç„¡èƒ½ï¼›æ­£å¦‚æˆ‘å€‘ä¸èƒ½å› ç‚ºä¸€å€‹äººä¸èƒ½åœ¨å’Œé£›æ©Ÿè³½è·‘çš„æ¯”è³½ä¸­å‹ å‡ºå°±èªç‚ºä»–ç„¡èƒ½ä¸€æ¨£ã€‚æˆ‘å€‘çš„éŠæˆ²è¨­å®šè®“é€™äº›ç„¡èƒ½è®Šå¾—ç„¡é—œç·Šè¦ã€‚åªè¦åƒèˆ‡è€…èªç‚ºåˆé© ï¼Œä»–å€‘å¯ä»¥å¹ç‰›ã€‚å¯ä»¥æŠŠè‡ªå·±æè¿°æˆé­…åŠ›ç„¡é™ã€å¼·å£¯ç„¡æ¯”ã€è‹±å‹‡ç„¡ç•ã€‚è€Œ C ç„¡æ³•è¦æ±‚ä»–å€‘ åšå¯¦éš›çš„å±•ç¤ºã€‚\nå°é€™å€‹éŠæˆ²çš„æ‰¹è©•å¯èƒ½æ˜¯ï¼šæ©Ÿå™¨åœ¨éŠæˆ²çš„æˆæ•—ä¸­å æœ‰äº†éå¤šçš„æ¯”é‡ã€‚å¦‚æœä¸€å€‹äººè©¦åœ–å‡è£æˆ ä¸€å€‹æ©Ÿå™¨çš„è©±ï¼Œä»–è‚¯å®šæ˜¯ä¸€å€‹è¹©è…³çš„æ¼”å“¡ã€‚ä»–æœƒç”±æ–¼ç®—è¡“æ–¹é¢çš„ç·©æ…¢å’Œä¸æº–ç¢ºç«‹å³æš´éœ²ã€‚æ©Ÿ å™¨æœƒä¸æœƒè§£æ±ºäº†ä¸€äº›æ‡‰è©²æ˜¯æ€è€ƒçš„å•é¡Œï¼Œå…¶è§£æ±ºæ–¹å¼å»å’Œäººçš„æ–¹å¼ç›¸å·®ç”šé ï¼Ÿé€™å€‹åå°æ„è¦‹ ç¢ºå¯¦å¾ˆæ£˜æ‰‹ã€‚ä½†æ˜¯ï¼Œè‡³å°‘æˆ‘å€‘å¯ä»¥èªªï¼Œå„˜ç®¡å¦‚æ­¤ï¼Œæ©Ÿå™¨å¯ä»¥è¢«è¨­è¨ˆå¾—å¯ä»¥å¾ˆå¥½çš„ç©é€™å€‹æ¨¡ä»¿ è€…éŠæˆ²ã€‚æˆ‘å€‘ä¸éœ€è¦å°é€™å€‹å•é¡Œéåˆ†æ“”å¿ƒã€‚\næœ‰ä¸€ç¨®æƒ…æ³æ˜¯æ©Ÿå™¨åœ¨ç©æ¨¡ä»¿è€…éŠæˆ²æ™‚çš„æœ€ä½³ç­–ç•¥æ˜¯åšåˆ¥çš„äº‹è€Œä¸æ˜¯æ¨¡ä»¿äººçš„è¡Œç‚ºã€‚é€™ç¨®æƒ…æ³ æ˜¯å¯èƒ½çš„ã€‚ä½†æ˜¯æˆ‘èªç‚ºé€™æ¨£çš„æƒ…æ³ä¸¦æ²’æœ‰ä»˜å‡ºå¤šå¤§çš„åŠªåŠ›ã€‚ä¸ç®¡æ€æ¨£ï¼Œæœ¬æ–‡ä¸¦ä¸è©¦åœ–ç ”ç©¶é€™ å€‹éŠæˆ²çš„ç†è«–ã€‚æˆ‘å€‘å‡å®šæ©Ÿå™¨çš„æœ€å„ªç­–ç•¥æ˜¯åŠªåŠ›æä¾›å’Œäººä¸€æ¨£çš„ç­”æ¡ˆã€‚\n3. The Machines Concerned in the Game # åªæœ‰åœ¨æˆ‘å€‘ç¢ºå®šã€Œæ©Ÿå™¨ã€é€™å€‹è©çš„æ„ç¾©ä¹‹å¾Œï¼Œæˆ‘å€‘åœ¨ 1. ä¸­æå‡ºçš„å•é¡Œæ‰æ˜¯å®šç¾©å®Œæˆã€‚\næˆ‘å€‘å¸Œæœ›èƒ½ç¬¦åˆä»¥ä¸‹ä¸‰é»è¦æ±‚ï¼š\nä¸€åˆ‡å·¥ç¨‹ç§‘æŠ€éƒ½å…è¨±ä½¿ç”¨åœ¨æˆ‘å€‘çš„æ©Ÿå™¨ä¸Šã€‚ ä¸€å€‹æˆ–ä¸€çµ„å·¥ç¨‹å¸«è£½é€ å‡ºä¸€å€‹å¯ä»¥å·¥ä½œçš„æ©Ÿå™¨ï¼Œä½†å› ç‚ºä»–å€‘ä½¿ç”¨äº†åŸºæ–¼å¯¦é©—çš„æ–¹æ³•ä¾†è¨­ è¨ˆä»–ï¼Œä»¥è‡³æ–¼é€™å€‹æ©Ÿå™¨çš„å·¥ä½œæ–¹æ³•ä¸èƒ½è¢«å®ƒçš„å»ºé€ è€…å¾ˆå¥½çš„æè¿°ã€‚ æŠŠé€šéç”Ÿè‚²èª•ç”Ÿçš„äººå¾æ©Ÿå™¨çš„æ¦‚å¿µä¸­æ’é™¤å‡ºå»ã€‚ è¦è®“å®šç¾©åŒæ™‚æ»¿è¶³é€™ä¸‰å€‹è¦æ±‚æ˜¯å›°é›£çš„ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœƒè¦æ±‚é€™äº›å·¥ç¨‹å¸«éƒ½æ˜¯åŒä¸€å€‹æ€§åˆ¥ï¼Œ ä½†æ˜¯é€™å¯¦éš›ä¸Šä¹Ÿæ˜¯ç„¡æ³•æ»¿è¶³è¦æ±‚ã€‚å› ç‚ºé€šéå–®å€‹äººçš„ä¸€å€‹çš®è†šç´°èƒç”¢ç”Ÿä¸€å€‹å®Œæ•´çš„å€‹é«”ä¸æ˜¯ å®Œå…¨ä¸å¯èƒ½çš„ã€‚é€™å°‡æ˜¯ç”Ÿç‰©ç§‘æŠ€çš„å…·æœ‰åŠƒæ™‚ä»£æ„ç¾©çš„çªç ´ï¼Œä½†æ˜¯æˆ‘å€‘ä¸¦ä¸å¸Œæœ›æŠŠä»–æ¦‚æ‹¬åœ¨ã€Œ å»ºé€ äº†ä¸€å€‹æ€ç¶­æ©Ÿå™¨ã€ä¸­ã€‚é€™å°±è¦æ±‚æˆ‘å€‘æ”¾æ£„å…è¨±ä¸€åˆ‡çš„ç§‘æŠ€çš„æ‰“ç®—ã€‚æˆ‘å€‘æ›´é¡˜æ„å°‡ã€Œæ€ç¶­ æ©Ÿå™¨ã€çš„ç ”ç©¶é›†ä¸­åœ¨ä¸€ç¨®è¢«ç¨±ç‚ºã€Œé›»å­è¨ˆç®—æ©Ÿã€æˆ–ã€Œæ•¸å­—è¨ˆç®—æ©Ÿã€çš„æ©Ÿå™¨ä¸Šã€‚å› æ­¤ï¼Œæˆ‘å€‘åƒ… åƒ…å…è¨±ã€Œæ•¸å­—è¨ˆç®—æ©Ÿã€åƒåŠ æˆ‘å€‘çš„éŠæˆ²ã€‚\nç¬¬ä¸€çœ¼çœ‹ä¸Šå»ï¼Œé€™å€‹é™åˆ¶éæ–¼åš´æ ¼ã€‚äº‹å¯¦ä¸Šä¸¦éå¦‚æ­¤ã€‚é¦–å…ˆæˆ‘å€‘éœ€è¦ç°¡è¦çš„äº†è§£ä¸€ä¸‹é€™äº›è¨ˆ ç®—æ©ŸåŠå…¶å®ƒå€‘çš„ä¸€äº›æ€§è³ªã€‚\nä½ å¯èƒ½æœƒèªªï¼šå¦‚æœé”ä¸åˆ°æˆ‘å€‘ç‚ºã€Œæ€è€ƒã€å®šçš„è©•åˆ¤æ¨™æº–ï¼Œé€™æ¨£çš„æ•¸å­—è¨ˆç®—æ©Ÿåªæœƒä»¤äººå¤±æœ›ï¼Œ ä¸”åœ¨éŠæˆ²ä¸­è¡¨ç¾ä¸ä½³ã€‚\nç›®å‰å·²ç¶“æœ‰è¨±å¤šæ•¸å­—è¨ˆç®—æ©Ÿåœ¨å·¥ä½œã€‚äººå€‘å¯èƒ½æœƒå•ï¼šã€Œç‚ºä»€éº¼ä¸æ‹¿ä¸€å°ç›´æ¥ä½œå¯¦é©—ï¼Ÿå¾ˆå®¹æ˜“ å°±èƒ½æ»¿è¶³éŠæˆ²çš„è¦æ±‚ã€‚å¯ä»¥åŒæ™‚æœ‰è¨±å¤šçš„ C åƒåŠ éŠæˆ²ï¼Œç„¶å¾Œçµ±è¨ˆå‡ºåˆ¤æ–·æ­£ç¢ºçš„æ©Ÿç‡ã€ã€‚å° é€™å€‹å•é¡Œçš„ç°¡è¦å›ç­”å°±æ˜¯ï¼šæˆ‘å€‘ä¸¦ä¸æ˜¯è¦å•æ˜¯ä¸æ˜¯æ‰€æœ‰çš„æ•¸å­—è¨ˆç®—æ©Ÿéƒ½èƒ½åœ¨éŠæˆ²ä¸­è¡¨ç¾è‰¯å¥½ ï¼Œä¹Ÿä¸æ˜¯è¦å•ç¾åœ¨çš„è¨ˆç®—æ©Ÿä¸­æœ‰æ²’æœ‰æ©Ÿå™¨èƒ½å¤ é€šéå¯¦é©—ã€‚è€Œæ˜¯è¦å•ï¼š\næ˜¯å¦å­˜åœ¨ä¸€å°æƒ³åƒä¸­çš„æ©Ÿå™¨èƒ½å¤ é€šééŠæˆ²ã€‚\né€™åƒ…åƒ…æ˜¯ä¸€å€‹ç°¡è¦å›ç­”ï¼Œå¾Œé¢å°‡å¾å¦ä¸€å€‹è§’åº¦è€ƒæ…®é€™å€‹å•é¡Œã€‚\n4. Digital Computers # æ•¸å­—è¨ˆç®—æ©Ÿå¯ä»¥è¢«è§£é‡‹æˆï¼š\nå¯ä»¥åŸ·è¡Œä¸€åˆ‡è¨ˆç®—äººå“¡èƒ½å¤ é€²è¡Œçš„æ“ä½œã€‚\nä¸€å€‹è¨ˆç®—äººå“¡æ‡‰è©²åš´æ ¼éµå®ˆè¦å‰‡ã€‚ä»–åœ¨ä¸€åˆ‡ç´°ç¯€ä¸Šï¼Œéƒ½æ²’æœ‰ä¸€çµ²åé›¢çš„æ¬ŠåŠ›ã€‚æˆ‘å€‘å¯ä»¥å‡è¨­ é€™äº›è¦å‰‡å¯«åœ¨ä¸€æœ¬æ›¸ä¸Šã€‚æ¯æ¬¡è¢«åˆ†é…æ–°çš„ä»»å‹™çš„æ™‚å€™ï¼Œå°‡æœƒæ”¹è®ŠåŸ·è¡Œæ­¥é©Ÿã€‚ä»–æœ‰ç„¡é™çš„ç´™é€² è¡Œè¨ˆç®—ï¼Œä»–å¯ä»¥ç”¨ã€Œç®—ç›¤ã€é€²è¡Œä¹˜æ³•å’ŒåŠ æ³•é‹ç®—ï¼Œé€™ä¸¦ä¸é‡è¦ã€‚\nå¦‚æœä½¿ç”¨ä¸Šè¿°è§£é‡‹å®šç¾©æ•¸å­—è¨ˆç®—æ©Ÿï¼Œæˆ‘å€‘å¯èƒ½é™·å…¥å¾ªç’°å®šç¾©ã€‚ç‚ºé˜²æ­¢é€™ç¨®æƒ…æ³ç™¼ç”Ÿï¼Œæˆ‘å€‘åˆ— å‡ºæœŸæœ›çµæœå¾—å‡ºçš„æ–¹å¼ã€‚ä¸€å€‹æ•¸å­—è¨ˆç®—æ©Ÿé€šå¸¸ç”±ä¸€ä¸‹ä¸‰å€‹éƒ¨åˆ†çµ„æˆï¼š\ni. å­˜å„²å™¨ï¼ˆStoreï¼‰ ii. åŸ·è¡Œå–®å…ƒï¼ˆExecutive unitï¼‰ iii. æ§åˆ¶å™¨ï¼ˆControlï¼‰\nå­˜å„²å™¨ç”¨ä¾†å­˜è²¯ä¿¡æ¯ï¼Œå°æ‡‰æ–¼è¨ˆç®—å“¡çš„ç´™ã€‚ç´™ä¸Šæ—¢è¨˜éŒ„äº†ä»–çš„è¨ˆç®—éç¨‹ï¼Œä¹Ÿè¨˜éŒ„äº†ä»–æ‰€éµå¾ª çš„è¨ˆç®—æ­¥é©Ÿã€‚åŒæ¨£ï¼Œå¦‚æœè¨ˆç®—å“¡é€²è¡Œå¿ƒç®—çš„è©±ï¼Œä¸€éƒ¨åˆ†å­˜å„²å™¨å°‡å°æ‡‰æ–¼ä»–çš„è¨˜æ†¶ã€‚\nåŸ·è¡Œå–®å…ƒæ˜¯ä¸€æ¬¡è¨ˆç®—ä¸­å–®å€‹æ“ä½œé€²è¡Œçš„å ´æ‰€ã€‚æ“ä½œå°è±¡éš¨è‘—æ©Ÿå™¨çš„ä¸åŒè€Œä¸åŒã€‚é€šå¸¸ä¸€å€‹ç›¸ ç•¶é•·çš„æ“ä½œå¯èƒ½æ˜¯ï¼šã€Œ3540675445 ä¹˜ä»¥ 7076345687ã€ï¼Œä½†æ˜¯ä¸€äº›æ©Ÿå™¨å¯èƒ½åƒ…èƒ½å¤ åŸ·è¡Œã€Œå¯« ä¸‹ 0ã€ä¸€é¡çš„ç°¡å–®æ“ä½œã€‚\nä¸Šé¢æ›¾ç¶“æåˆ°è¨ˆç®—å“¡çš„ã€Œè¨˜éŒ„æ“ä½œæ­¥é©Ÿçš„æ›¸ã€ç”±æ©Ÿå™¨ä¸­çš„ä¸€éƒ¨åˆ†å­˜å„²å™¨ä»£æ›¿ã€‚ä¸å¦¨æŠŠå®ƒå€‘ç¨± ç‚ºã€ŒæŒ‡ä»¤åˆ—è¡¨ã€ã€‚æ§åˆ¶å™¨çš„è·èƒ½å°±æ˜¯ä¿è­‰é€™äº›æŒ‡ä»¤æŒ‰ç…§æ­£ç¢ºçš„é †åºå¾—åˆ°æ­£ç¢ºçš„åŸ·è¡Œã€‚æ§ åˆ¶å™¨çš„è¨­è¨ˆä½¿å¾—é€™æˆç‚ºå¯èƒ½ã€‚\nå­˜å„²å™¨ä¸Šçš„ä¿¡æ¯é€šå¸¸è¢«åˆ†ç‚ºè¨±å¤šçš„å°åŒ…å­˜æ”¾ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€å€‹æ©Ÿå™¨ä¸­ï¼Œä¸€å€‹åŒ…ç”±åå€‹åé€²åˆ¶æ•¸ çµ„æˆã€‚æ¯å€‹å­˜å„²ä¿¡æ¯çš„åŒ…éƒ½ä»¥æŸç¨®ç³»çµ±çš„æ–¹å¼åˆ†é…äº†æ•¸å­—ã€‚\nä»¥ä¸‹ä»‹ç´¹å¹¾ç¨®å…¸å‹çš„æŒ‡ä»¤ï¼ˆæœ‰é»åƒæ˜¯è¨ˆæ¦‚èª²æ‰€æ•™éçš„ï¼‰ï¼š\nadd # 6809 4302 17ï¼šæŠŠå­˜æ”¾åœ¨ 6809 çš„æ•¸å’Œå­˜æ”¾åœ¨ 4302 çš„æ•¸ç›¸åŠ ï¼Œä¸¦æŠŠçµæœå­˜å…¥å¾Œä¸€å€‹å­˜å„² ä½ç½®ã€‚\né€™è£¡ï¼Œ17 æŒ‡çš„æ˜¯å¯ä»¥å°é€™å…©å€‹æ•¸é€²è¡Œçš„æ‰€æœ‰æ“ä½œä¸­çš„å…¶ä¸­ä¸€å€‹æ“ä½œã€‚é€™è£¡çš„æ“ä½œå¦‚ä¸Šæ‰€ç¤º æ˜¯ã€Œé€²è¡ŒåŠ æ³•æ“ä½œã€\nloop # ç¾åœ¨åŸ·è¡Œå­˜å„²åœ¨ 5606 çš„æŒ‡ä»¤ï¼Œä¸¦å¾é‚£è£¡ç¹¼çºŒåŸ·è¡Œã€‚\nå¦‚æœ 4505 ä½ç½®æ˜¯ 0ï¼Œé‚£éº¼åŸ·è¡Œå­˜å„²åœ¨ 6707 çš„æŒ‡ä»¤ï¼Œå¦å‰‡ç¹¼çºŒã€‚\nå¾Œé¢é€™ç¨®æŒ‡ä»¤éå¸¸é‡è¦ï¼Œå› ç‚ºå®ƒä½¿å¾—æˆ‘å€‘èƒ½å¤ åè¦†åŸ·è¡Œä¸€æ®µæŒ‡ä»¤ç›´åˆ°æ»¿è¶³ä¸€äº›æ¢ä»¶ã€‚\nè®€è€…å¿…é ˆæ¥å—è¨ˆç®—æ©Ÿå¯ä»¥æŒ‰ç…§æˆ‘å€‘æ‰€æå‡ºçš„åŸå‰‡æ‰€å»ºé€ çš„ã€‚é€™äº›è¨ˆç®—æ©Ÿå¹¾ä¹èƒ½å¤ å®Œå…¨æ¨¡ä»¿ä¸€ å€‹è¨ˆç®—å“¡ã€‚\nç·¨ç¨‹ï¼ˆprogrammingï¼‰ # ä¸Šé¢æˆ‘å€‘æåˆ°çš„è¨ˆç®—å“¡è¦éµå®ˆçš„å¯«åœ¨æ›¸ä¸Šçš„æ­¥é©Ÿå¯¦éš›ä¸Šåƒ…åƒ…æ˜¯ä¸€å€‹è¨­æƒ³ã€‚ä¸€å€‹çœŸæ­£çš„è¨ˆç®—å“¡ èƒ½å¤ è¨˜å¾—ä»–å€‘éœ€è¦åšä»€éº¼ã€‚å¦‚æœä¸€å€‹äººæƒ³è®“æ©Ÿå™¨æ¨¡ä»¿è¨ˆç®—å“¡åŸ·è¡Œè¤‡é›œçš„æ“ä½œï¼Œä»–å¿…é ˆå‘Šè¨´è¨ˆ ç®—æ©Ÿè¦åšä»€éº¼ï¼Œä¸¦ä¸”æŠŠçµæœç¿»è­¯æˆæŸç¨®å½¢å¼çš„æŒ‡ä»¤è¡¨ã€‚é€™ç¨®æ§‹é€ æŒ‡ä»¤è¡¨çš„è¡Œç‚ºé€šå¸¸è¢«ç¨±ç‚ºã€Œ ç·¨ç¨‹ã€ï¼ˆprogrammingï¼‰ã€‚çµ¦ä¸€å€‹æ©Ÿå™¨ç·¨ç¨‹ä½¿ä¹‹åŸ·è¡Œæ“ä½œ Aï¼Œæ„å‘³è‘—æŠŠåˆé©çš„æŒ‡ä»¤è¡¨æ”¾å…¥æ©Ÿ å™¨ä»¥ä½¿å®ƒèƒ½å¤ åŸ·è¡Œ Aã€‚\nrandom # æ•¸å­—è¨ˆç®—æ©Ÿçš„ä¸€å€‹æœ‰è¶£è®ŠåŒ–æ˜¯è®“å…¶æˆç‚ºã€Œå¸¶æœ‰éš¨æ©Ÿå…ƒç´ çš„æ•¸å­—è¨ˆç®—æ©Ÿã€ã€‚å®ƒå€‘æœ‰ç‰¹å®šçš„æŒ‡ä»¤ é€²è¡Œæ“²è‰²å­æˆ–è€…åˆ¥çš„ç­‰åƒ¹é›»å­éç¨‹ã€‚ä¾‹å¦‚å…¶ä¸­ä¸€å€‹æ˜¯ã€Œæ“²è‰²å­ä¸¦æŠŠçµæœå­˜å…¥ä½ç½® 1000ã€‚ã€ æœ‰äº›æ™‚å€™é€™æ¨£çš„æ©Ÿå™¨è¢«æè¿°ç‚ºå…·æœ‰è‡ªç”±æ„å¿—ï¼Œï¼ˆå„˜ç®¡æˆ‘è‡ªå·±ä¸¦ä¸ä½¿ç”¨é€™å€‹è¡¨è¿°ï¼‰ã€‚é€šå¸¸ä¸¦ä¸ èƒ½é€šéè§€å¯Ÿåˆ¤æ–·å‡ºä¸€å€‹æ©Ÿå™¨æœ‰æ²’æœ‰éš¨æ©Ÿå…ƒç´ ã€‚å› ç‚ºä¸€å€‹ç›¸ä¼¼çš„æ•ˆæœå¯ä»¥é€šéä¾æ“šåœ“å‘¨ç‡ \\(\\pi\\) çš„å°æ•¸éƒ¨åˆ†é€²è¡Œé¸æ“‡ä¾†ç”¢ç”Ÿã€‚\nçµ•å¤§å¤šæ•¸çš„æ•¸å­—è¨ˆç®—æ©Ÿå…·æœ‰æœ‰é™çš„å­˜å„²ç©ºé–“ã€‚è®“ä¸€å€‹è¨ˆç®—æ©Ÿç²å¾—ç„¡é™çš„å­˜å„²ç©ºé–“ä¸¦ä¸å­˜åœ¨ç† è«–å›°é›£ã€‚ç•¶ç„¶ï¼Œåœ¨ä»»ä½•æ™‚å€™éƒ½åªæœ‰æœ‰é™çš„éƒ¨åˆ†è¢«ä½¿ç”¨ã€‚åŒæ¨£ï¼Œåªæœ‰æœ‰é™çš„å­˜å„²ç©ºé–“è¢«å»ºé€ ã€‚ ä¸éæˆ‘å€‘å¯ä»¥æƒ³åƒè¶Šä¾†è¶Šå¤šçš„å­˜å„²ç©ºé–“å¯ä»¥æ ¹æ“šè¦æ±‚æ·»åŠ ã€‚é€™æ¨£çš„è¨ˆç®—æ©Ÿå…·æœ‰ç‰¹æ®Šçš„ç†è«–åƒ¹ å€¼ï¼Œå°‡è¢«ç¨±ç‚ºç„¡é™å®¹é‡è¨ˆç®—æ©Ÿã€‚\næœ‰é—œè¨ˆç®—æ©Ÿè¨­æƒ³çš„å¾ˆæ—©å°±ç”¢ç”Ÿäº†ã€‚åœ¨ 1828 è‡³ 1839 å¹´æ“”ä»»åŠæ©‹å¤§å­¸çš„ Lucasian æ•¸å­¸æ•™æˆ çš„ Charles Babbage è¨­æƒ³äº†é€™æ¨£çš„æ©Ÿå™¨ï¼Œä¸¦ç¨±ä¹‹ç‚ºåˆ†ææ©Ÿï¼Œä½†æ˜¯ä¸¦æ²’æœ‰å®Œæˆå®ƒã€‚å„˜ç®¡ Babbage æœ‰äº†æ‰€æœ‰çš„é—œéµæ€æƒ³ï¼Œä»–çš„æ©Ÿå™¨åœ¨é‚£å€‹æ™‚ä»£å»æ²’æœ‰å¸å¼•äººçš„å‰æ™¯ã€‚å®ƒèƒ½å¤ é”åˆ°çš„é‹ ç®—é€Ÿåº¦è‚¯å®šæ¯”ä¸€å€‹è¨ˆç®—å“¡è¦å¿«ï¼Œä½†æ˜¯åƒ…ç›¸ç•¶æ–¼æ›¼å¾¹æ–¯ç‰¹æ©Ÿçš„ç™¾åˆ†ä¹‹ä¸€ï¼Œè€Œæ›¼å¾¹æ–¯åœ–æ©Ÿä¹Ÿæ˜¯ç¾ ä»£è¨ˆç®—æ©Ÿä¸­ç›¸ç•¶æ…¢çš„ä¸€å€‹ã€‚åˆ†ææ©Ÿçš„å­˜å„²å…¨éƒ¨ç”±ç”¨è¼ªå­å’Œå¡ç‰‡çµ„æˆçš„æ©Ÿæ¢°å¯¦ç¾ã€‚\näº‹å¯¦ä¸Šï¼Œå…¨éƒ¨ç”±æ©Ÿæ¢°çµ„æˆçš„ Babbage åˆ†ææ©Ÿå¹«åŠ©æˆ‘å€‘ç ´é™¤äº†ä¸€å€‹è¿·ä¿¡ã€‚é€šå¸¸æˆ‘å€‘å°ç¾ä»£è¨ˆ ç®—æ©Ÿæ˜¯é›»å­çš„é€™å€‹äº‹å¯¦çµ¦äºˆç›¸ç•¶çš„é‡è¦–ã€‚åŒæ¨£ï¼Œç¥ç¶“ç³»çµ±ä¹Ÿæ˜¯åŸºæ–¼é›»çš„ã€‚å› ç‚º Babbage çš„ æ©Ÿå™¨æ˜¯æ²’æœ‰ä½¿ç”¨é›»ï¼Œåˆå› ç‚ºæ•¸å­—è¨ˆç®—æ©Ÿåœ¨æŸç¨®æ„ç¾©ä¸Šéƒ½æ˜¯ç­‰åƒ¹çš„ï¼Œæˆ‘å€‘å°±æœƒæ˜ç™½æ˜¯å¦ä½¿ç”¨é›» çš„ç†è«–ä¸Šä¸¦ä¸é‡è¦ã€‚ç•¶ç„¶ï¼Œç•¶éœ€è¦é«˜é‹ç®—é€Ÿåº¦çš„æ™‚å€™ï¼Œå°±éœ€è¦ä½¿ç”¨é›»æ°£çµæ§‹ã€‚å› æ­¤ï¼Œæˆ‘ å€‘å°±æœƒç™¼ç¾åœ¨é€™äº›åœ°æ–¹ä½¿ç”¨é›»æ˜¯ç†æ‰€ç•¶ç„¶çš„ã€‚åœ¨ç¥ç¶“ç³»çµ±ä¸­ï¼ŒåŒ–å­¸éç¨‹è‡³å°‘å’Œé›»éç¨‹åŒæ¨£é‡ è¦ã€‚æŸäº›è¨ˆç®—æ©Ÿçš„å­˜å„²å™¨ä¸»è¦åŸºæ–¼è²å­¸åŸç†ã€‚è¨ˆç®—æ©Ÿå’Œç¥ç¶“ç³»çµ±éƒ½ä½¿ç”¨é›»åƒ…åƒ…æ˜¯è¡¨é¢çš„ç›¸ä¼¼ ã€‚å¦‚æœæˆ‘å€‘å¸Œæœ›å°‹æ‰¾é€™æ¨£çš„ç›¸ä¼¼ï¼Œå€’ä¸å¦‚å°å‡½æ•¸é€²è¡Œæ•¸å­¸åˆ†æã€‚\n5. Universality of Digital Computers # ä¸Šä¸€éƒ¨åˆ†çµ¦å‡ºçš„æ•¸å­—è¨ˆç®—æ©Ÿå¯ä»¥è¢«æ­¸é¡ç‚ºã€Œé›¢æ•£ç‹€æ…‹æ©Ÿã€ã€‚é€™é¡æ©Ÿå™¨å¯ä»¥\nå¾ä¸€å€‹ç¢ºå®šç‹€æ…‹å‘å¦ä¸€å€‹ç‹€æ…‹çªç„¶è·³è®Šã€‚\nç‚ºäº†ä¸æœƒæœ‰æ··æ·†é€™äº›ç‹€æ…‹çš„å¯èƒ½ï¼Œå®ƒå€‘ä¹‹é–“è¦æœ‰è¶³å¤ çš„å·®åˆ¥ã€‚åš´æ ¼çš„èªªï¼Œé€™æ¨£çš„æ©Ÿå™¨æ˜¯ä¸å­˜ åœ¨çš„ã€‚ä¸€åˆ‡äº‹ä»¶å¯¦éš›ä¸Šéƒ½æ˜¯é€£çºŒçš„ã€‚ä½†æ˜¯æœ‰è¨±å¤šç¨®æ©Ÿå™¨èƒ½å¤ è¢«çœ‹ä½œé›¢æ•£ç‹€æ…‹æ©Ÿå™¨ã€‚ä¾‹å¦‚ åœ¨ç…§æ˜ç³»çµ±ä¸­çš„é–‹é—œï¼Œæˆ‘å€‘å¯ä»¥æŠŠé–‹é—œçœ‹æˆåªæœ‰é–‹å’Œé—œå…©å€‹ç‹€æ…‹ã€‚å®ƒå€‘ä¹‹é–“è‚¯å®šæœ‰è½‰æ›éç¨‹ ï¼Œä½†æ˜¯åœ¨çµ•å¤§å¤šæ•¸æƒ…æ³ä¸‹å¯ä»¥å¿½ç•¥å®ƒå€‘ã€‚ä½œç‚ºé›¢æ•£ç‹€æ…‹æ©Ÿå™¨çš„ä¾‹å­ï¼Œæˆ‘å€‘å¯ä»¥è€ƒæ…®ä¸€å€‹æ¯ç§’ å˜€å—’ 120 åº¦çš„è¼ªå­ï¼Œé€™å€‹è¼ªå­å¯èƒ½å› ä¸€å€‹æ§“æ¡¿çš„é˜»æ“‹è€Œåœä¸‹ä¾†ï¼Œåœ¨è¼ªå­ä¸Šæœ‰ä¸€å€‹ç™¼å…‰çš„ç‡ˆ ã€‚é€™å€‹æ©Ÿå™¨å¯ä»¥è¢«æŠ½è±¡çš„æè¿°ç‚ºä¸‹é¢çš„å½¢å¼ã€‚æ©Ÿå™¨çš„å…§éƒ¨ç‹€æ…‹ï¼ˆé€šéè¼ªå­çš„ä½ç½®ä¾†æè¿°ï¼‰å¯ ä»¥æ˜¯ \\(q_1\\)ã€\\(q_2\\) å’Œ \\(q_3\\)ã€‚è¼¸å…¥ä¿¡è™Ÿæ˜¯ \\(i_0\\) æˆ– \\(i_1\\)ï¼ˆæ§“æ¡¿ çš„ä½ç½®ï¼‰ã€‚ä»»ä½•æ™‚å€™çš„å…§éƒ¨ç‹€æ…‹å¯ä»¥æ ¹æ“šä¸Šä¸€æ¬¡ç‹€æ…‹å’Œè¼¸å…¥ä¿¡è™Ÿç”±ä¸‹è¡¨æè¿°ï¼šè¼¸å‡ºä¿¡è™Ÿå¯ä»¥ ç”¨ä¸‹è¡¨æè¿°ï¼Œ\n\\begin{array}{c|ccc} \u0026amp; q_1 \u0026amp; q_2 \u0026amp; q_3 \\\\ \\hline i_0 \u0026amp; q_2 \u0026amp; q_3 \u0026amp; q_1 \\\\ i_0 \u0026amp; q_1 \u0026amp; q_2 \u0026amp; q_3 \\end{array}\nè¼¸å‡ºä¿¡è™Ÿï¼Œå”¯ä¸€èƒ½å¤ è¢«å¤–éƒ¨è§€æ¸¬çš„å…§éƒ¨ç‹€æ…‹æŒ‡ç¤ºå™¨ï¼Œå¦‚ä¸‹è¡¨æè¿°ï¼š\n\\begin{array}{c|ccc} \\text{State} \u0026amp; q_1 \u0026amp; q_2 \u0026amp; q_3 \\\\ \\text{Output} \u0026amp; o_0 \u0026amp; o_0 \u0026amp; o_1 \\end{array}\né€™å€‹ä¾‹å­æ˜¯ä¸€å€‹å…¸å‹çš„é›¢æ•£ç‹€æ…‹æ©Ÿã€‚åªè¦å®ƒå€‘çš„ç‹€æ…‹æ˜¯æœ‰é™çš„ï¼Œå®ƒå€‘å°±å¯ä»¥ç”¨é€™æ¨£çš„è¡¨æ ¼æ è¿°ã€‚\nå¯ä»¥çœ‹å‡ºï¼Œåªè¦çµ¦å‡ºåˆå§‹ç‹€æ…‹å’Œè¼¸å…¥ä¿¡è™Ÿï¼Œæ‰€æœ‰çš„æœªä¾†ç‹€æ…‹éƒ½æ˜¯å¯ä»¥é æ¸¬çš„ã€‚é€™è®“æˆ‘å€‘æƒ³èµ· äº† Laplace çš„è§€é»ã€‚é‚£å°±æ˜¯ï¼Œåªè¦çµ¦å‡ºå®‡å®™ä¸­ä»»æ„æ™‚åˆ»æ‰€æœ‰ç²’å­çš„ä½ç½®å’Œé€Ÿåº¦ï¼Œå°±èƒ½å¤ é  çŸ¥æœªä¾†çš„æ‰€æœ‰ç‹€æ…‹ã€‚æˆ‘å€‘è€ƒæ…®çš„é æ¸¬å’Œæ‹‰æ™®æ‹‰æ–¯ç›¸æ¯”è¼ƒæ›´æ¥è¿‘æ–¼å¯¦ç”¨æ€§ã€‚å› ç‚ºã€Œå®‡å®™æ˜¯ä¸€å€‹ æ•´é«”ã€çš„ç³»çµ±ï¼Œæ‰€ä»¥åªè¦åˆå§‹æ¢ä»¶çš„ä¸€å€‹å¾ˆå°çš„èª¤å·®ï¼Œå°±æœƒå¼•èµ·ç³»çµ±åœ¨ä¸€æ®µæ™‚é–“ä»¥å¾Œè®Šå¾—å®Œ å…¨ä¸åŒã€‚æŸå€‹æ™‚åˆ»ä¸€å€‹é›»å­ä½ç½®çš„å„„è¬åˆ†ä¹‹ä¸€å˜ç±³çš„åç§»ï¼Œå°‡æ±ºå®šä¸€å€‹äººæœƒåœ¨é›ªå´©ä¸­æ­»å»é‚„ æ˜¯é€ƒç”Ÿã€‚æˆ‘å€‘ç¨±ç‚ºã€Œé›¢æ•£ç‹€æ…‹æ©Ÿã€çš„æ©Ÿæ¢°ç³»çµ±çš„ä¸€å€‹æ ¸å¿ƒæ€§è³ªå°±æ˜¯ï¼Œé€™æ¨£çš„ç¾è±¡ä¸¦ä¸æœƒç™¼ ç”Ÿã€‚å³ä½¿æ˜¯è€ƒæ…®ä¸€å€‹å¯¦éš›çš„ç‰©ç†ç³»çµ±ï¼Œè€Œä¸æ˜¯ç†æƒ³æ©Ÿå™¨ï¼Œåªè¦çŸ¥é“äº†æŸå€‹æ™‚åˆ»è¶³å¤ ç²¾ç¢ºçš„ ç‹€æ…‹ä¿¡æ¯ï¼Œå°±å¯ä»¥è¶³å¤ ç²¾ç¢ºçš„é æ¸¬æœªä¾†çš„ä¸€åˆ‡ç‹€æ…‹ã€‚\næ­£å¦‚æˆ‘å€‘æ‰€æåˆ°çš„ï¼Œæ•¸å­—è¨ˆç®—æ©Ÿå±¬æ–¼é›¢æ•£ç‹€æ…‹æ©Ÿã€‚ä½†æ˜¯é€™æ¨£çš„æ©Ÿå™¨æ‰€èƒ½å¤ é”åˆ°çš„ç‹€æ…‹é€šå¸¸æ˜¯ ç›¸ç•¶å¤§çš„ã€‚ä¾‹å¦‚ï¼Œç¾åœ¨åœ¨æ›¼å¾¹æ–¯ç‰¹å·¥ä½œçš„æ©Ÿå™¨å¯ä»¥æœ‰ \\(2^{165000}\\) å€‹ç‹€æ…‹ï¼Œä¹Ÿå°±æ˜¯å¤§ ç´„ \\(10^{50000}\\)ã€‚è€Œåœ¨ä¸Šé¢çš„å˜€å—’è¼ªçš„ä¾‹å­ä¸­ï¼Œåƒ…æœ‰ä¸‰å€‹ç‹€æ…‹ã€‚æ‰¾åˆ°æœ‰å¦‚æ­¤å¤šç‹€æ…‹çš„ åŸå› ä¸¦ä¸å›°é›£ã€‚è¨ˆç®—æ©Ÿå…·æœ‰ä¸€å€‹å­˜å„²å™¨ï¼Œå°æ‡‰æ–¼è¨ˆç®—å“¡çš„ç´™ã€‚é€™äº›å­˜å„²å™¨ä¸­æ‡‰è©²èƒ½å¤ å¯«å…¥ä»» ä½•èƒ½å¤ å¯«å…¥è¨ˆç®—å“¡æ‰€ç”¨ç´™ä¸Šçš„ç¬¦è™Ÿã€‚ç‚ºäº†ç°¡å–®èµ·è¦‹ï¼Œå‡è¨­åƒ…åƒ…ä½¿ç”¨å¾ 0 åˆ° 9 çš„æ•¸å­—ä½œç‚ºç¬¦ è™Ÿã€‚å¿½ç•¥æ‰‹å¯«é«”çš„å·®åˆ¥ã€‚\nå‡å¦‚è¨ˆç®—æ©Ÿå…·æœ‰ 100 å¼µã€æ¯å¼µ 50 è¡Œã€æ¯è¡Œ 30 å€‹æ•¸å­—çš„å­˜å„²ç©ºé–“ã€‚é‚£éº¼ç‹€æ…‹çš„æ•¸ç›®å°±æœƒ æ˜¯ \\(10^{100 \\times 50 \\times 30}\\)ï¼Œå³ \\(10^{150000}\\)ã€‚é€™å¤§ç´„æ˜¯ä¸‰å€‹æ›¼å¾¹æ–¯ ç‰¹æ©Ÿç‹€æ…‹çš„ç¸½å’Œã€‚ç‹€æ…‹æ•¸çš„åŸºç‚º 2 çš„å°æ•¸é€šå¸¸è¢«ç¨±ç‚ºæ©Ÿå™¨çš„ã€Œå­˜å„²å¤§å°ã€ã€‚å› æ­¤æ›¼å¾¹æ–¯ç‰¹ æ©Ÿçš„å­˜å„²å¤§å°æ˜¯ 165000 è€Œä¸Šé¢ä¾‹å­ä¸­è¼ªå­çš„å­˜å„²å¤§å°æ˜¯ 1.6ã€‚å¦‚æœå…©å€‹æ©Ÿå™¨åŠ åœ¨ä¸€èµ·ï¼Œä»– å€‘çš„å­˜å„²å¤§å°æ‡‰è©²æ˜¯åŸä¾†å­˜å„²å¤§å°çš„å’Œã€‚å› æ­¤æˆ‘å€‘å¯ä»¥èªªã€æ›¼å¾¹æ–¯ç‰¹æ©Ÿå…·æœ‰ 64 å€‹ç£å¸¶å­˜å„² å™¨æ¯å€‹å­˜å„²å™¨çš„å¤§å°æ˜¯ 2560ï¼Œé‚„æœ‰ 8 å€‹é›»å­ç®¡ï¼Œæ¯å€‹å®¹é‡ç‚º 1280ã€‚å„ç¨®å„æ¨£å­˜å„²å™¨åŠ åœ¨ ä¸€èµ·å¤§ç´„æ˜¯ 300 å€‹ï¼Œç¸½å…± 174380ã€‚\nåªè¦çµ¦å‡ºå°æ‡‰æ–¼é›¢æ•£ç‹€æ…‹æ©Ÿå™¨çš„è¡¨æ ¼ï¼Œå°±èƒ½å¤ é æ¸¬å‡ºæ©Ÿå™¨å°‡æœƒåšä»€éº¼ã€‚é€™æ¨£çš„è¨ˆç®—ç•¶ç„¶èƒ½å¤  é€šéé›»å­è¨ˆç®—æ©Ÿé€²è¡Œã€‚åªè¦åŸ·è¡Œçš„è¶³å¤ å¿«ï¼Œé›»å­è¨ˆç®—æ©Ÿå°±èƒ½å¤ æ¨¡æ“¬ä»»ä½•é›¢æ•£ç‹€æ…‹æ©Ÿçš„è¡Œç‚ºã€‚ é€™æ¨£ï¼Œæ¨¡ç¯„è€…éŠæˆ²å°±è®Šæˆæ©Ÿå™¨ä½œè¢«å•è€… Bï¼Œå–„æ–¼æ¨¡æ“¬çš„è¨ˆç®—æ©Ÿä½œ Aï¼Œé‚£éº¼è©¢å•è€… C å°±ä¸èƒ½ å€åˆ†å®ƒå€‘ã€‚ç•¶ç„¶ï¼Œæ•¸å­—è¨ˆç®—æ©Ÿå¿…é ˆæœ‰è¶³å¤ çš„å­˜å„²ç©ºé–“ï¼Œé‹è¡Œçš„è¶³å¤ å¿«ã€‚è€Œä¸”å®ƒåœ¨æ¨¡ç¯„ä¸åŒçš„ æ©Ÿå™¨ä¹‹å‰å¿…é ˆè¢«é‡æ–°ç·¨ç¨‹ã€‚\né€™æ¨£å¯ä»¥æ¨¡æ“¬ä»»æ„é›¢æ•£ç‹€æ…‹æ©Ÿå™¨çš„æ€§è³ªçš„æ•¸å­—è¨ˆç®—æ©Ÿè¢«è¡¨è¿°ç‚ºä»–å€‘æ˜¯é€šç”¨æ©Ÿå™¨ã€‚å…·æœ‰é€™æ¨£æ€§ è³ªæ©Ÿå™¨çš„å­˜åœ¨å¸¶ä¾†çš„ä¸€å€‹é‡è¦çµæœå°±æ˜¯ï¼Œä¸è€ƒæ…®é€Ÿåº¦ï¼Œæˆ‘å€‘ä¸¦ä¸éœ€è¦è¨­è¨ˆå‡ºä¸åŒçš„æ–°æ©Ÿå™¨ä¾† åŸ·è¡Œä¸åŒçš„å•é¡Œã€‚å®ƒå€‘éƒ½å¯ä»¥ç”¨ä¸€å€‹æ•¸å­—è¨ˆç®—æ©Ÿä¾†å¯¦ç¾ï¼Œåªè¦æ ¹æ“šæ¯ç¨®æƒ…æ³é€²è¡Œé©ç•¶çš„ç·¨ç¨‹ ã€‚é€™è¡¨æ˜æ‰€æœ‰çš„æ•¸å­—è¨ˆç®—æ©Ÿåœ¨æŸç¨®æ„ç¾©ä¸Šæ˜¯ç›¸äº’ç­‰åƒ¹çš„ã€‚\nç¾åœ¨é‡æ–°è€ƒæ…®åœ¨ç¬¬ä¸‰éƒ¨åˆ†æœ«å°¾æå‡ºçš„å•é¡Œã€‚æš«æ™‚æŠŠå•é¡Œ \u0026ldquo;Can machines think?\u0026rdquo; ç”¨ã€Œæ˜¯å¦ å­˜åœ¨å‡æƒ³ä¸­çš„æ©Ÿå™¨èƒ½å¤ åœ¨æ¨¡ç¯„éŠæˆ²ä¸­è¡¨ç¾è‰¯å¥½ã€ä»£æ›¿ã€‚å¦‚æœæˆ‘å€‘é¡˜æ„ï¼Œæˆ‘å€‘é‚„å¯ä»¥å•ã€Œæ˜¯å¦ å­˜åœ¨èƒ½å¤ è¡¨ç¾è‰¯å¥½çš„é›¢æ•£ç‹€æ…‹æ©Ÿã€ï¼Œä½†æ˜¯ç”±æ–¼é€šç”¨æ€§ï¼Œæˆ‘å€‘å¯ä»¥çœ‹å‡ºé€™å…©å€‹å•é¡Œéƒ½ç­‰åƒ¹æ–¼ã€Œ è®“æˆ‘å€‘æŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨ä¸€å€‹æ•¸å­—è¨ˆç®—æ©Ÿ $C$ä¸Šã€‚å¦‚æœæˆ‘å€‘å¯ä»¥è®“å®ƒå…·æœ‰è¶³å¤ å¤§çš„å­˜å„²ç©ºé–“ï¼Œ è¶³å¤ å¿«çš„è¨ˆç®—é€Ÿåº¦ï¼Œè€Œä¸”å°å®ƒé€²è¡Œé©ç•¶çš„ç·¨ç¨‹ã€‚$C$ æ‰®æ¼”æ¨¡ä»¿éŠæˆ²ä¸­ A çš„è§’è‰²ï¼Œäººæ‰®æ¼” B çš„è§’è‰²ï¼Œ$C$ èƒ½ä¸èƒ½åœ¨é€™å€‹éŠæˆ²ä¸­è¡¨ç¾è‰¯å¥½ï¼Ÿã€\n6. Contrary Views on the Main Question # 6.1. The Theological Objection # æ€ç¶­æ˜¯äººçš„ä¸æœ½éˆé­‚çš„ä¸€ç¨®åŠŸèƒ½ã€‚ä¸Šå¸è³¦äºˆæ¯ä¸€å€‹ç”·äººå’Œå¥³äººä»¥ä¸€é¡†ä¸æœ½çš„éˆé­‚ï¼Œä½†å¾æœª å°‡å®ƒè³¦äºˆä»»ä½•å…¶ä»–çš„å‹•ç‰©æˆ–æ©Ÿå™¨ã€‚å› æ­¤ï¼Œå‹•ç‰©æˆ–è€…æ©Ÿå™¨ä¸èƒ½æ€ç¶­ã€‚\n6.2. The \u0026ldquo;Heads in the Sand\u0026rdquo; Objection # æ©Ÿå™¨æ€ç¶­å¾Œæœå¤ªä»¤äººææ‡¼äº†ã€‚ä½†é¡˜æ©Ÿå™¨æ°¸é ä¸æœƒæœ‰æ€ç¶­ã€‚\n6.3. The Mathematical Objection # åœ¨æ•¸å­¸é‚è¼¯é‡Œæœ‰ä¸€äº›çµè«–ï¼Œå¯ä»¥ç”¨ä¾†è­‰æ˜é›¢æ•£ç‹€æ…‹æ©Ÿå™¨çš„èƒ½åŠ›æœ‰ä¸€å®šé™åº¦ã€‚é€™äº›çµè«–ä¸­æœ€ è‘—åçš„æ˜¯ Godel\u0026rsquo;s theorem (1931)ï¼Œæ­¤å®šç†è²ç¨±ï¼Œåœ¨ä»»ä½•ä¸€å€‹è¶³å¤ æœ‰åŠ›çš„é‚è¼¯ç³»çµ±é‡Œï¼Œ éƒ½èƒ½å½¢æˆé™³è¿°ï¼Œè€Œæ‰€è©²é™³è¿°åœ¨è©²ç³»çµ±ç¯„åœä¹‹å…§æ—¢ä¸èƒ½è¢«è­‰æ˜æ˜¯å°çš„ï¼Œä¹Ÿä¸èƒ½è¢«è­‰æ˜æ˜¯éŒ¯çš„ ï¼Œé™¤éé€™å€‹ç³»çµ±æœ¬èº«å°±ä¸ä¸€è‡´ã€‚\n6.4. The Argument from Consciousness # Professor Jefferson\u0026rsquo;s Lister for 1949\nè‹¥è¦æˆ‘å€‘æ‰¿èªæ©Ÿå™¨èˆ‡å¤§è…¦æ˜¯ä¸€æ¨£çš„ï¼Œé™¤éæ©Ÿå™¨èƒ½å¤ å› ç‚ºæ„Ÿå—äº†æ€æƒ³èˆ‡æ„Ÿæƒ…ï¼Œè€Œä¸æ˜¯ç¬¦è™Ÿçš„ å¶ç„¶å¡—æŠ¹å¯«å‡ºåå››è¡Œè©©æˆ–å”å¥æ›²ä¾†ã€‚ä¹Ÿå°±æ˜¯èªªï¼Œå®ƒä¸åƒ…å¯«äº†ï¼Œè€Œä¸”ä¹Ÿæ‡‰çŸ¥é“è‡ªå·±ç¢ºå¯¦é€™æ¨£ åšäº†ã€‚ä»»ä½•æ©Ÿå™¨éƒ½æ„Ÿè¦ºä¸åˆ°ï¼ˆä¸åªæ˜¯å±¬æ–¼ç°¡æ˜“ç™¼æ˜ä¹‹é¡çš„äººå·¥ä¿¡è™Ÿï¼‰æˆåŠŸçš„å–œæ‚…ï¼Œä¹Ÿä¸æœƒ å› å›°é›£è€Œæ²®å–ªï¼Œå› å—å¥‰æ‰¿è€Œæ²¾æ²¾è‡ªå–œï¼Œå› çŠ¯éŒ¯èª¤è€Œæ‚¶æ‚¶ä¸æ¨‚ï¼Œå› è¦‹ç•°æ€§è€Œç¥é­‚é¡›å€’ï¼Œä¹Ÿä¸ æœƒå› æ…¾æœ›å¾—ä¸åˆ°æ»¿è¶³è€Œæš´è·³å¦‚é›·æˆ–ä¸€è¹¶ä¸æŒ¯ã€‚\n6.5. Arguments from Various Disabilities # æˆ‘æ“”ä¿ï¼Œä½ å¯ä»¥ä½¿æ©Ÿå™¨å¹²ä»»ä½•ä½ å‰›æ‰æåˆ°çš„äº‹æƒ…ï¼Œå¯ä½ æ°¸é ä¹Ÿä¸èƒ½ä½¿ä¸€å°æ©Ÿå™¨æœ‰ ï¼¸ é¡çš„ è¡Œç‚ºã€‚\n6.6. Lady Lovelace\u0026rsquo;s Objection # åˆ†æå¼•æ“æ²’æœ‰ä»»ä½•æ„åœ–è¦æƒ³å‰µä½œä»€éº¼æ±è¥¿ã€‚å®ƒèƒ½åšæˆ‘å€‘çŸ¥é“è©²æ€æ¨£å»æŒ‡æ®å®ƒåšçš„ä»»ä½•äº‹ã€‚\n6.7. Argument from Continuity in the Nervous System # ç¥ç¶“ç³»çµ±ä¸åƒé›¢æ•£ç‹€æ…‹çš„æ©Ÿå™¨ã€‚è‹¥æ˜¯é—œæ–¼æ’æ“Šç¥ç¶“åŸçš„ç¥ç¶“è„ˆæ²–è¦æ¨¡çš„ä¿¡æ¯æœ‰èª¤ï¼Œé‚£éº½é—œ æ–¼å¤–æ²–è„ˆæ²–çš„è¦æ¨¡çš„ä¿¡æ¯å°±æœƒæœ‰å¾ˆå¤§èª¤å·®ã€‚æ—¢ç„¶é€™æ¨£ï¼Œå°±å¯ä»¥è«–è­‰ï¼šæˆ‘å€‘ä¸å¯èƒ½ç”¨ä¸€å€‹é›¢ æ•£ç‹€æ…‹ç³»çµ±å»æ¨¡ä»¿ç¥ç¶“ç³»çµ±çš„è¡Œç‚ºã€‚\n6.8. The Argument from Informality of Behaviour # æˆ‘å€‘ä¸å¯èƒ½ç¸½çµå‡ºä¸€å¥—è¦å‰‡ä¾†å›Šæ‹¬ä¸€å€‹äººåœ¨æ‰€æœ‰å¯æƒ³è±¡çš„ç’°å¢ƒä¸­çš„è¡Œç‚ºã€‚æ¯”æ–¹èªªï¼Œæˆ‘å€‘å¯ ä»¥æœ‰é€™æ¨£ä¸€æ¢è¦å‰‡ï¼šè¡Œäººè¦‹åˆ°ç´…ç‡ˆæ­¢æ­¥ï¼Œè¦‹åˆ°ç¶ ç‡ˆè¡Œèµ°ï¼Œä½†æ˜¯ï¼Œç”±æ–¼æŸç¨®éŒ¯èª¤ï¼Œç´…ç¶ ç‡ˆåŒ æ™‚äº®äº†ï¼Œé‚£è©²æ€éº½è¾¦ï¼Ÿæˆ‘å€‘ä¹Ÿè¨±æœƒé€™æ¨£æ±ºå®šï¼Œç‚ºå®‰å…¨èµ·è¦‹ï¼Œæœ€å¥½æ­¢æ­¥ã€‚ä½†æ˜¯ï¼Œé€™å€‹æ±ºå®šé‚„ æœƒæœ‰å…¶ä»–å•é¡Œã€‚è¦æƒ³ç¸½çµå‡ºä¸€å¥—å¯è¡Œå›Šæ‹¬ä¸€åˆ‡äººé¡è¡Œç‚ºçš„è¦å‰‡ï¼Œå“ªæ€•æ˜¯æœ‰é—œç´…ç¶ ç‡ˆçš„è¦å‰‡ ï¼Œçœ‹ä¾†éƒ½æ˜¯ä¸å¤§å¯èƒ½çš„ã€‚å°é€™äº›çœ‹æ³•æˆ‘å…¨è´ŠåŒã€‚\n6.9. The Argument from Extrasensory Perception # æˆ‘æƒ³è®€è€…éƒ½å¾ˆç†Ÿæ‚‰è¶…æ„Ÿå®˜çŸ¥è¦ºçš„èªªæ³•ï¼Œç†Ÿæ‚‰å®ƒçš„å››ç¨®æ–¹å¼å³å¿ƒéˆæ„Ÿæ‡‰ã€åƒé‡Œçœ¼ã€å…ˆçŸ¥å’Œç²¾ ç¥é‹å‹•çš„æ„ç¾©ã€‚\n7. Learning Machines # åœ¨æ¨¡æ“¬ä¸€å€‹æˆäººçš„æ€æƒ³çš„å·¥ä½œä¸­ï¼Œæˆ‘å€‘å°‡é›†ä¸­æ–¼æ€è€ƒä¸€å€‹å¥½è¾¦æ³•ä¾†ä½¿å®ƒæˆé•·åˆ°æ­¤ç‹€æ…‹ã€‚æˆ‘å€‘ å¯èƒ½éœ€è¦è¨»æ„é€™æ¨£ä¸‰å€‹çµ„ä»¶ï¼š\næ€æƒ³çš„åˆå§‹ç‹€æ…‹ï¼Œå°±åƒå‡ºç”Ÿ èƒ½å¤ å½±éŸ¿å®ƒçš„æ•™è‚² å…¶ä»–çš„èƒ½å¤ å½±éŸ¿å®ƒçš„éæ•™è‚²çš„ç¶“é©— ","date":"25 November 2018","externalUrl":null,"permalink":"/posts/paper/paper-turing/","section":"Posts","summary":"","title":"è«–æ–‡ç­†è¨˜ Computing Machinery and Intelligence","type":"posts"},{"content":"","date":"27 October 2018","externalUrl":null,"permalink":"/tags/cvpr/","section":"Tags","summary":"","title":"CVPR","type":"tags"},{"content":" Paper Link ss Convolutional å’Œ recurrent operations éƒ½æ˜¯ä¸€æ¬¡è™•ç†ä¸€å€‹ local é„°åŸŸï¼Œæ­¤ç¯‡ paper æå‡ºäº† non-local operations çš„æƒ³æ³•ï¼Œç›®çš„å°±æ˜¯è¦è§£æ±ºå³ä½¿ç›¸è·å¾ˆé çš„çš„ blocksï¼Œä»ç„¶ æœ‰å¯èƒ½æ˜¯å½¼æ­¤æœ‰é—œè¯çš„ã€‚\n1. Introduction # ç‚ºä»€éº¼è¦ä½¿ç”¨æ·±å±¤ç¥ç¶“ç¶²è·¯ï¼Ÿ\nè£œæ‰ long-range dependencies\nå¯èƒ½æ˜¯ä¸€å€‹å¤§å®¶æœƒå¸¸çµ¦å‡ºçš„ç­”æ¡ˆã€‚\nèˆ‰ä¾‹ä¾†èªªï¼š\nsequential data (e.g., in speech, language) ä¸€èˆ¬ä¾†èªªæœƒæ¡ç”¨ recurrent operationsï¼Œä¹Ÿæ˜¯ç‚ºäº†é”æˆ long-range dependency modeling image data å‰‡å¸¸å¸¸æ¡ç”¨æ·±å±¤çš„ convolutional operations å› ç‚º convolutional å’Œ recurrent operations éƒ½åªæœƒå° local é„°åŸŸè³‡æ–™åšé‹ç®—ï¼ˆè·é›¢ã€ æ™‚é–“ï¼‰ï¼Œå› æ­¤è¦å‚³éè¨Šæ¯åˆ°è¼ƒé è™•å°±åªèƒ½é€éé‡è¤‡åœ°æ“ä½œã€‚\né‡è¤‡åœ°åš local operations æœ‰å¹¾å€‹é™åˆ¶ï¼š\nè¨ˆç®—ä¸Šæ²’æœ‰æ•ˆç‡ é›£ä»¥å„ªåŒ– non-local ç‰¹å¾µè¨Šæ¯å‚³éä¸éˆæ´» ç•¶ç„¶ï¼ŒCNN å’Œ RNN çš„åˆè¡·æœ¬ä¾†å°±ä¸æ˜¯ä¾†è™•ç† non-local è¨Šæ¯çš„ã€‚\næœ¬ç¯‡ paper å°±æ˜¯è¦è§£æ±ºä¸Šè¿°å•é¡Œï¼Œæ‰€ä»¥æå‡ºäº† non-local operations é€™å€‹æ¦‚å¿µï¼Œç›´è§€ ä¾†èªªï¼š\nä¸€å€‹ non-local çš„å€¼ï¼ˆ\\(\\textbf x_i\\)ï¼‰ä¾†è‡ªæ–¼ï¼Œä½œç‚ºè¼¸å…¥ input feature maps ä¸­æ‰€æœ‰ä½ç½®ï¼ˆ\\(\\textbf x_j\\)ï¼‰çš„åŠ æ¬Šå’Œï¼Œå¦‚ä¸‹åœ– Figure 1ã€‚\nFigure 1. A spacetime non-local operation in our network trained for video classification in Kinetics. A position $\\textbf x_i$\u0026rsquo;s response is computed by the weighted average of the features of all positions $\\textbf x_j$ (only the highest weighted ones are shown here). In this example computed by our model, note how it relates the ball in the first frame to the ball in the last two frames. More examples are in Figure 3. 2. Related Work # Non-local image processing # Graphical models # Feedforward modeling for sequences # Self-attention # Interaction networks # Video classification architectures # 3. Non-local Neural Networks # æ¥ä¸‹ä¾†å°±ä¾†ä»‹ç´¹ï¼Œæ­¤ç¯‡ paper çš„æ–¹æ³•ã€‚\n3.1. Formulation # é€ééå±€éƒ¨å¹³å‡ï¼Œä½œè€…åœ¨æ·±å±¤ç¥ç¶“ç¶²è·¯ä¸­ ï¼Œå®šç¾©äº†å¦‚ä¸‹çš„ non-local operationï¼š\n$$ \\textbf y_i = \\frac{1}{\\mathcal C(\\textbf x)} \\sum_{\\forall j} f(\\textbf x_i, \\textbf x_j) g(\\textbf x_j). \\tag{1} $$\nå…¶ä¸­ï¼Œ\n\\(i\\)ï¼šè¼¸å‡ºä½ç½®çš„ indexï¼ˆin space, time, or spacetimeï¼‰ \\(j\\)ï¼šæ‰€æœ‰ enumerates å‡ºä¾†å¯èƒ½ä½ç½®çš„ index \\(\\textbf x\\)ï¼šè¼¸å…¥ä¿¡è™Ÿï¼ˆimage, sequence, video; often their featuresï¼‰ \\(\\textbf y\\)ï¼šè¼¸å‡ºä¿¡è™Ÿï¼Œå¤§å°å’Œ \\(\\textbf x\\) ç›¸åŒ \\(f\\)ï¼šè¨ˆç®— \\(i\\) å’Œæ‰€æœ‰ \\(j\\) ä¹‹é–“çš„ affinity \\(g\\)ï¼šè¨ˆç®—ä½ç½® \\(j\\) è™•çš„è¼¸å…¥ä¿¡è™Ÿè¡¨ç¤ºæ–¹æ³• \\(\\mathcal C\\)ï¼šnormalizer å¾ä¸Šè¿°çš„å¼ (1) ï¼Œæˆ‘å€‘å¯ä»¥æ¸…æ¥šçœ‹å‡º non-local çš„ç‰¹æ€§ï¼Œå› ç‚ºæ‰€æœ‰ä½ç½®ï¼ˆ\\(\\forall j\\ï¼‰åœ¨æ¯ä¸€å€‹ operation ä¸­éƒ½æœƒè¢«è€ƒæ…®ã€‚\nç›¸æ¯” convolutional operation åªé—œå¿ƒé„°å±…å’Œ recurrent operation åªé—œå¿ƒå‰ä¸€å€‹æ™‚é–“é» ã€‚\næ­¤å¤–ï¼Œnon-local operation å’Œ fully-connected ($fc$) ç›¸æ¯”æœ‰è¨±å¤šå„ªé»ï¼š\nnon-local op $fc$ è€ƒæ…®ä¸åŒä½ç½®çš„é—œä¿‚ å–®ç´”å­¸ç¿’æ¬Šé‡ æ”¯æŒä¸åŒçš„ input size fixed-size input/output å¯è¢«è¼•æ˜“çš„é‹ç”¨åœ¨å„ç¨® convolutional/recurrent å±¤ä¸­ï¼Œèƒ½è¢«æ¥åœ¨æœ€å‰é¢ åªèƒ½æ¥åœ¨ç¶²è·¯æœ€å¾Œé¢ 3.2. Instantiations # æ¥ä¸‹ä¾†ï¼Œè®“æˆ‘å€‘ä¾†æè¿°ä¸åŒç‰ˆæœ¬çš„ $f$ å’Œ $g$ï¼Œä½œè€…é€éå¯¦é©—ç™¼ç¾ï¼Œé€™äº›ä¸åŒç‰ˆæœ¬ä¹‹é–“çš„ æ±ºå®šä¸¦ä¸å¤ªå½±éŸ¿ modelsï¼Œé€™è¡¨ç¤ºäº†ï¼šnon-local é€™å€‹æƒ³æ³•æ‰æ˜¯çµæœæ”¹å–„çš„ä¸»å› ã€‚\nç‚ºäº†æ–¹ä¾¿æè¿°ï¼Œæˆ‘å€‘åªè€ƒæ…® $g$ æ˜¯ä¸€å€‹ linear embeddingï¼š$g(\\textbf x_j) = W_g \\textbf x_j$ï¼Œå…¶ä¸­ $W_g$ æ˜¯ä¸€å€‹ weight matrixï¼Œæ¥ä¸‹ä¾†è®“æˆ‘å€‘åˆ—èˆ‰å‡ºå„ç¨®ä¸åŒçš„ $f$ï¼ˆåŸºæœ¬ä¸Šï¼Œå°±æ˜¯æ‰¾å‡ºä½ç½® $i$ å’Œæ‰€æœ‰ä½ç½® $j$ çš„é—œä¿‚ï¼‰ï¼Œå’Œä»–å€‘å°æ‡‰çš„ normalizer $\\mathcal C$ã€‚\nGaussian # $$ f(\\textbf x_i, \\textbf x_j) = e^{\\textbf x_i^T \\textbf x_j}. \\tag{2} $$\nå…¶ä¸­ï¼Œ\n$\\textbf x_i^T \\textbf x_j$ï¼šé»ç©ç›¸ä¼¼åº¦ï¼ˆæ­å¼è·é›¢ä¹Ÿ okï¼Œä½†é»ç©è¼ƒå¥½å¯¦ä½œï¼‰ $\\mathcal C(\\textbf x) = \\sum_{\\forall j} f(\\textbf x_i, \\textbf x_j)$ã€‚ Embedded Gaussian # $$ f(\\textbf x_i, \\textbf x_j) = e^{\\theta(\\textbf x_i)^T \\phi(\\textbf x_j)}. \\tag{3} $$\nå…¶ä¸­ï¼š\n$\\theta(\\textbf x_i) = W_\\theta \\textbf x_i$ï¼šembedding $\\phi(\\textbf x_j) = W_\\phi \\textbf x_j$ï¼šembedding $\\mathcal C(\\textbf x) = \\sum_{\\forall j} f(\\textbf x_i, \\textbf x_j)$ åœ¨é€™è£¡æˆ‘å€‘å¯ä»¥è§€å¯Ÿåˆ°ï¼Œçµ¦å®šä¸€å€‹ $i$ï¼Œ$\\frac{1}{\\mathcal C(x)} f(\\textbf x_i, \\textbf x_j)$ å³æ˜¯é€éç¶­åº¦ $j$ çš„ softmaxã€‚\nDot product # $$ f(\\textbf x_i, \\textbf x_j) = \\theta(\\textbf x_i)^T \\phi(\\textbf x_j). \\tag{4} $$\nå…¶ä¸­ï¼š\n$\\theta(\\textbf x_i) = W_\\theta \\textbf x_i$ï¼šembedding $\\phi(\\textbf x_j) = W_\\phi \\textbf x_j$ï¼šembedding $\\mathcal C(\\textbf x) = N$ ($N$ï¼š#positions in $\\textbf x$) Concatenation # $$ f(\\textbf x_i, \\textbf x_j) = \\text{ReLU} (\\textbf w_f^T[\\theta(\\textbf x_i), \\phi(\\textbf x_j)]). \\tag{5} $$\nå…¶ä¸­ï¼Œ\n$[\\cdot, \\cdot]$ï¼šconcatenation $\\textbf w_f$ï¼šå°‡ concatenated vector æŠ•å°„æˆ scalar çš„ weight vector $\\mathcal C(\\textbf x) = N$ ($N$ï¼š#positions in $\\textbf x$) åœ¨é€™è£¡ $f$ å¤šæ¡ç”¨äº†ä¸€å€‹ ReLU 3.3. Non-local Block # æˆ‘å€‘å°‡å¼ (1) ä¸­çš„ non-local operation åŒ…è£åˆ° non-local block ä¸­ï¼Œè©² block å¯ä»¥åˆ ä½µåˆ°è¨±å¤šç¾æœ‰é«”ç³»çš„æ¶æ§‹ä¸­ï¼Œnon-local block å®šç¾©å¦‚ä¸‹ï¼š\n$$ \\textbf z_i = W_z \\textbf y_i + \\textbf x_i, \\tag{6} $$\nå…¶ä¸­ï¼Œ\n$\\textbf y_i$ å’Œ $+\\textbf x_i$ï¼šresidual connection é€™ç¨® residual connection è®“æˆ‘å€‘å¯ä»¥åœ¨ä»»ä½•äº‹å…ˆ train å¥½çš„ model æ’å…¥ä¸€å€‹ non-local blockã€‚\nFigure 2. A spacetime non-local block. The feature maps are shown as the shape of their tensors, e.g., $T \\times H \\times W \\times 1024$ for $1024$ channels (proper reshaping is performed when noted). \u0026ldquo;$\\otimes$\u0026rdquo; denotes matrix multiplication, and \u0026ldquo;$\\oplus$\u0026rdquo; denotes element-wise sum. The softmax operation is performed on each row. The blue boxes denote $1 \\times 1 \\times 1$ convolutions. Here we show the embedded Gaussian version, with a bottleneck of $512$ channels. The vanilla Gaussian version can be done by removing $\\theta$ and $\\phi$, and the dot-product version can be done by replacing softmax with scaling by $1 / N$. é€™è£¡é™„ä¸Šæˆ‘ç•«çš„ non-local operation çš„ç¤ºæ„åœ–ï¼š\n5. Experiments on Video Classification # å¯¦é©—æ•¸æ“šå¾ˆå¤šï¼Œé€™è£¡ç°¡å–®è²¼å¹¾å€‹æ˜“æ‡‚çš„ã€‚\nFigure 4. Curves of the training procedure on Kinetics for the ResNet-50 C2D baseline (blue) vs. non-local C2D with 5 blocks (red). We show the top-1 training error (dash) and validation error (solid). The validation error is computed in the same way as the training error (so it is 1-clip testing with the same random jittering at training time); the ï¬nal results are in Table 2c (R50, 5-block). 6. Extension: Experiments on COCO # åœ¨ COCO æ•¸æ“šåº«ä¸Šçš„å¯¦é©—çµæœå¦‚ä¸‹æ‰€ç¤ºã€‚é‘’æ–¼ non-local block çµæ§‹çš„æ˜“ç”¨æ€§ï¼Œåœ¨å¹³æ™‚è¨­ è¨ˆç¶²çµ¡æ™‚æ·»åŠ é€™æ¨£çš„æ¨¡å¡Šè®Šå¾—å¾ˆå®¹æ˜“ã€‚\nTable 5. Adding 1 non-local block to Mask R-CNN for COCO object detection and instance segmentation. The backbone is ResNet-50/101 or ResNeXt-152, both with FPN. ","date":"27 October 2018","externalUrl":null,"permalink":"/posts/paper/paper-nonlocal-nn/","section":"Posts","summary":"","title":"è«–æ–‡ç­†è¨˜ Non-local Neural Networks","type":"posts"},{"content":"Paper Link\n1 Introduction # PointNet å°å±€éƒ¨ç‰¹å¾µçš„è™•ç†ä¸¦ä¸å®Œå–„ï¼Œåœ¨ 3D Object Part Segmentation å’Œ Semantic Segmentation in Scenes ä¸­ï¼ˆå³ï¼šéœ€è¦å¾—åˆ°æ¯ä¸€å€‹é»çš„åˆ†æ•¸æ™‚ï¼‰ï¼ŒåŸæ–¹æ³•æ˜¯å°‡å…¨å±€ç‰¹å¾µ concatenate åœ¨å–®é»ç‰¹å¾µå¾Œé¢ï¼Œä¸­é–“å¿½ç•¥äº†å±€éƒ¨ç‰¹å¾µçš„æ­¥é©Ÿï¼Œæ–¼æ˜¯ä½œè€…æå‡ºäº† PointNet++ æ¡ç”¨åˆ†å±¤ç¥ç¶“ç¶²è·¯ï¼ˆhierarchical neural networkï¼‰ä¾†å°æ­¤æ”¹å–„ã€‚\nå¦å¤–ï¼Œé»é›²çš„å¯†åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œå› æ­¤ä½œè€…ä¹Ÿåœ¨ PointNet++ ä¸­æå‡ºäº†å¯†åº¦é©æ‡‰çš„ç¶²è·¯çµ æ§‹ã€‚\nå°±å…¨å±€ä¾†çœ‹ï¼ŒPointNet++ æ¯” PointNet å¤šäº†ï¼š\nå±€éƒ¨ç‰¹å¾µæå– å¯†åº¦é©æ‡‰ç¶²è·¯ 2 Problem Statement # å‡è¨­ \\(X = (M, d)\\) æ˜¯ç¹¼æ‰¿æ­åŸºé‡Œå¾·ç©ºé–“ \\(\\mathbb R^n\\) çš„é›¢æ•£åº¦é‡ç©ºé–“ï¼Œ\nå…¶ä¸­ï¼š\n\\(M \\subseteq \\mathbb R^n\\)ï¼šé»é›† \\(d\\)ï¼šæ˜¯è·é›¢åº¦é‡ã€‚ å¦å¤–ï¼Œæ­åŸºé‡Œå¾·ç©ºé–“ä¸­çš„ $M$ å¯†åº¦åœ¨å„è™•å¯èƒ½ä¸å‡å‹»ã€‚æˆ‘å€‘æ„Ÿèˆˆè¶£çš„æ˜¯å­¸ç¿’ set function $f$ï¼Œ$f$ çš„è¼¸å…¥ç‚º $\\mathcal X$ï¼ˆä»¥åŠæ¯å€‹é»çš„é™„åŠ ç‰¹å¾µï¼‰ä¸¦ç”¢ç”Ÿé‡æ–°åŠƒåˆ† $\\mathcal X$ çš„ semantic è¨Šæ¯ã€‚\n3 Method # 3.1 Review of PointNet [20]: A Universal Continuous Set Function Approximator # 3.2 Hierarchical Point Set Feature Learning # Figure 2: Illustration of our hierarchical feature learning architecture and its application for set segmentation and classiï¬cation using points in 2D Euclidean space as an example. Single scale point grouping is visualized here. For details on density adaptive grouping, see Fig. 3 é€™è£¡ç°¡å–®èªªæ˜ä¸€ä¸‹ç¶²è·¯æ¶æ§‹ï¼š\nset abstraction:\nå°é»é›²ä¸­çš„é»é€²è¡Œå±€éƒ¨åŠƒåˆ† æå–æ•´é«”ç‰¹å¾µ ç°¡å–®ä¾†èªªï¼šset abstraction = sampling + grouping + pointnet\nSampling layer # è—‰ç”± farthes point sampling (FPS) ä¾†é¸å–ä¸€ points å­é›†ï¼Œç›¸è¼ƒèˆ‡éš¨æ©Ÿé¸å–ï¼ŒFPS èƒ½æ›´ å¥½çš„è¦†è“‹çµ¦å®š centroid çš„é»é›†ã€‚\nGrouping layer # æ¡ç”¨äº† 3.3 ç¯€çš„ MSG å’Œ MRG æ–¹æ³•ã€‚\n3.3 Robust Feature Learning under Non-Uniform Sampling Density # Figure 3: (a) Multi-scale grouping (MSG); (b) Multi-resolution grouping (MRG). Multi-scale grouping (MSG) # æŠŠæ¯ç¨®ä¸åŒåŠå¾‘çš„ç‰¹å¾µåˆ°æŠ“å‡ºä¾†ï¼Œä½† MSG æœ‰ä¸€å€‹é‹ç®—æ•ˆèƒ½ä¸Šçš„å•é¡Œï¼Œå› æ­¤ä½œè€…æå‡ºäº† MRGã€‚\nMulti-resolution grouping (MRG) # MRG ç”±å…©éƒ¨åˆ†å‘é‡æ§‹æˆï¼š\nä¸Šä¸€å±¤å³ $L_{i - 1}$ å±¤çš„å‘é‡ è¼¸å…¥é»é›²ä¸Šæå–çš„ç‰¹å¾µ æ¬Šé‡èª¿é…æ–¹å¼ï¼š\né»ç¨€ç–æ™‚ï¼Œçµ¦å¾é»é›²æå–çš„ç‰¹å¾µè¼ƒé«˜æ¬Šé‡ é»ç¨ å¯†æ™‚ï¼Œå‰‡çµ¦ $L_{i - 1}$ å±¤æå–çš„å‘é‡è¼ƒé«˜çš„æ¬Šé‡ï¼Œå› ç‚ºæ­¤æ™‚é»é›²çš„æŠ½è±¡ç¨‹åº¦å¯èƒ½ ä¸å¤ ï¼Œè€Œå¾ $L_{i - 1}$ å±¤èƒ½è®“æˆ‘å€‘çœ‹çš„æ›´å»£äº›ã€‚ 3.4 Point Feature Propagation for Set Segmentation # ","date":"14 October 2018","externalUrl":null,"permalink":"/posts/paper/paper-pointnet++/","section":"Posts","summary":"","title":"è«–æ–‡ç­†è¨˜ PointNet++: Deep Hierarchical Feature Learning on Point Sets in a Metric Space","type":"posts"},{"content":" Paper Link\n1. Introduction # é€™ç¯‡æ˜¯ Stanford åœ¨ CVPR 2017 æ‰€ç™¼è¡¨çš„ PointNetï¼Œå¾åå­—ä¸­å¯ä»¥çŸ¥é“æ˜¯æœ‰é—œè™•ç† 3D è³‡ æ–™çš„è«–æ–‡ã€‚å…¨æ–‡ç›®æ¨™å°±æ˜¯è¦å°é»é›²ï¼ˆpoint cloudï¼‰åšå„ç¨®åˆ†é¡ï¼Œæœ€é—œéµçš„æ–¹æ³•ç‚ºï¼š\nsingle symmetric function max poolingï¼ˆè§£æ±ºç„¡åºæ€§ï¼‰ Figure 1. Applications of PointNet. We propose a novel deep net architecture that consumes raw point cloud (set of points) without voxelization or rendering. It is a unified architecture that learns both global and local point features, providing a simple, efficient and effective approach for a number of 3D recognition tasks. 2. Related Work # Point Cloud Features # é»é›²æœ‰ local å’Œ global featuresï¼Œè€Œæ‰¾å°‹é©æ°çš„ç‰¹å¾µçµ„åˆæ–¹å¼æ˜¯å¾ˆé‡è¦çš„ã€‚\nDeep Learning on 3D Data # 3D data çš„è¡¨ç¤ºæ–¹ç¤ºï¼ŒåŠè¨˜æ†¶é«”è€—è²» issueã€‚\nDeep Learning on Unordered Sets # é»é›²å…·æœ‰ç„¡åºçš„ç‰¹æ€§ï¼Œä½†é †åºå¾€å¾€æ˜¯åšå·ç©å¾ˆé—œéµçš„ä¸€ç’°ã€‚\n3. Problem Statement # ä»¥ Classification ä¾†èªªï¼š\nè¼¸å…¥ï¼š\\(\\{P_i \\mid i = 1, \\dots, n\\}\\)ï¼Œå…¶ä¸­ \\(P_i\\) ç‚ºæ¯å€‹é»çš„åº§æ¨™ \\((x, y, z)\\) è¼¸å‡ºï¼šåˆ†é¡æ¯ä¸€å€‹é» \\(P_i\\) åˆ° class \\(k\\) 4. Deep Learning on Point Sets # 4.1. Properties of Point Sets in \\(\\mathbb R^n\\) # æœ¬æ–‡ç¶²è·¯ä¸­è¼¸å…¥è³‡æ–™çš„æ˜¯ 3D ç©ºé–“ä¸­çš„é»é›²ï¼ˆpoint cloudï¼‰ï¼Œåœ¨ Pointwise Convolutional Neural Networks ä¸­ ï¼Œå·²ç¶“æœ‰å°é»é›²åšäº†åŸºæœ¬ä»‹ç´¹ï¼Œé€™è£¡é‡æ–°ç°¡å–®æä¸€æ¬¡é»é›²çš„å¹¾å€‹é‡è¦ç‰¹æ€§ï¼š\nç„¡åºæ€§ï¼šå¯ä»¥ç†è§£é»é›²ç‚ºä¸€ \\(n \\times 3\\) çš„çŸ©é™£ï¼ˆ\\(n\\)ï¼šé»æ•¸ï¼‰ã€‚å› ç‚ºç›¸ åŒçš„é»é›²å¯ä»¥ç”±å…©å€‹ä¸åŒçš„çŸ©é™£æ‰€è¡¨ç¤ºã€‚è¦çŸ¥é“ï¼Œé›–ç„¶è¼¸å…¥é€²ä¾†çš„è³‡æ–™æ˜¯ç„¡åºæ€§çš„ï¼Œä½† åœ¨è¡¨ç¤ºä¸€å¼µç«‹é«”åœ–æ™‚ï¼Œæ¯å€‹é»ä¹‹é–“å…¶å¯¦æ˜¯æœ‰é †åºé—œä¿‚çš„ï¼Œè€Œä¸”æœƒé¸æ“‡ä½¿ç”¨å·ç©ï¼Œä¹Ÿæ˜¯è¦ è€ƒé‡æœ‰åºçš„ç‰¹å¾µæ‰æœ‰æ„ç¾©ã€‚\né»èˆ‡é»ä¹‹é–“çš„é—œä¿‚ï¼šé€™äº›é»åœ¨æ­å¼ç©ºé–“ä¸­ï¼Œå½¼æ­¤æœ‰å›ºå®šçš„è·é›¢ã€‚é€™æ„å‘³è‘—é»ä¸æ˜¯å­¤ ç«‹çš„ï¼Œç›¸é„°é»å½¢æˆä¸€å€‹æœ‰æ„ç¾©çš„å­é›†ã€‚å› æ­¤ï¼Œæ¨¡å‹éœ€è¦èƒ½å¤ æ•ç²é™„è¿‘é»çš„å±€éƒ¨çµæ§‹ï¼Œä»¥ åŠå±€éƒ¨çµæ§‹ä¹‹é–“çš„çµ„åˆç›¸äº’é—œä¿‚ã€‚\nè½‰æ›ä¸è®Šæ€§ï¼šåŒä¸€æ—‹è½‰å’Œå¹³ç§»ä¸æ‡‰å½±éŸ¿ä»»ä½•é»çš„åˆ†é¡çµæœã€‚\n4.2. PointNet Architecture # Figure 2. PointNet Architecture. The classification network takes \\(n\\) points as input, applies input and feature transformations, and then aggregates point features by max pooling. The output is classification scores for \\(k\\) classes. The segmentation network is an extension to the classification net. It concatenates global and local features and outputs per point scores. \u0026ldquo;mlp\u0026rdquo; stands for multi-layer perceptron, numbers in bracket are layer sizes. Batchnorm is used for all layers with ReLU. Dropout layers are used for the last mlp in classification net. Symmetry Function for Unordered Input # ç‚ºäº†è¦ä½¿ model ä¸æœƒå—åˆ°è¼¸å…¥è³‡æ–™ç„¡åºæ€§çš„å½±éŸ¿ï¼Œå‚³çµ±ä¸Šæœ‰ä¸‰å€‹æ–¹æ³•ï¼š\nsorting RNNï¼Œä½†æœƒå›  permutation çš„ç·£æ•…å›ºè€Œ train å¾ˆä¹… symmetric functionï¼ˆæœ¬æ–‡ä¸»è§’ï¼‰ æ­¤ç¯‡ paper æœ‰æåˆ°æ–¹æ³• 1. å’Œæ–¹æ³• 2. çš„å…©å€‹ä¸»è¦ç¼ºé»ï¼Œä»¥è‡´æ–¼ä¸å¤§å¯è¡Œï¼š\nsorting çš„ç¼ºé»ï¼šnoiseï¼Œè‹¥ noise æ•¸é‡éå¤šï¼Œå‰‡æœƒé™ä½ sorting å¾Œï¼Œè³‡æ–™æœ‰åºçš„æ„ç¾© æ€§ï¼ RNNï¼šåœ¨ OrderMatters ä¸­ï¼Œä½œè€…æåˆ°é †åº æ€§é‚„æ˜¯æœ‰å¿…è¦çš„ï¼Œè€Œä¸”ä¸èƒ½è¢«å®Œç¾çš„åˆªå»ã€‚ ç‚ºäº†è§£æ±º 4.1. ä¸­æ‰€æåˆ°ç„¡åºæ€§çš„å•é¡Œï¼Œä½œè€…ä¾¿æå‡ºäº†ä½¿ç”¨ max pooling çš„æ–¹æ³•ï¼š\n$$ f(\\{x_1, \\dots, x_n\\}) \\approx g(h(x_1), \\dots, h(x_n)), \\tag{1} $$\nå…¶ä¸­ï¼Œ\n\\(f\\)ï¼š\\(2^{\\mathbb R^N} \\to \\mathbb R\\) \\(h\\)ï¼š\\(\\mathbb R^N \\to \\mathbb R^K\\) \\(g\\)ï¼š\\(\\underbrace{\\mathbb R^K \\times \\cdots \\times \\mathbb R^K}_{n} \\to \\mathbb R\\)ï¼šå°ç¨±å‡½æ•¸ é€™è£¡ç°¡å–®åšå€‹åƒæ•¸ä¸Šçš„èªªæ˜ï¼š\n\\(N\\)ï¼šæ¯ä¸€å€‹é»çš„ç¶­åº¦ï¼Œåœ¨é€™è£¡æ˜¯ \\(3\\)ï¼Œå³ \\((x, y, z)\\) ä¸‰ç¶­ã€‚ \\(h\\)ï¼šmlp (multi-layer perceptron) è¦é€¼è¿‘çš„ functionï¼Œå³ï¼šç‰¹å¾µæå–ï¼Œå°‡ \\(N (3)\\) ç¶­ mapping åˆ° \\(K (1024)\\) ç¶­ï¼Œé€™è£¡çš„ \\(1024\\) æ˜¯ä½œè€…é¸å–ä¸€å€‹è¶³å¤  å¤§çš„æ•¸å­—ï¼Œä¾†é™ä½èª¤å·®ã€‚ \\(g\\)ï¼šä»£è¡¨çš„æ˜¯å°ç¨±å‡½æ•¸ï¼Œåœ¨é›¢æ•£æ•¸å­¸çš„é—œä¿‚ï¼ˆRelationï¼‰ä¸­ï¼Œsymmetric æ˜¯ä¸€ å€‹é›™å‘çš„è¡¨ç¤ºï¼Œé€éå° \\(K (1024)\\) å€‹ features ä¸­ï¼Œæ¯ \\(n\\) å€‹é»åš max poolï¼Œå…¨éƒ¨åšå®Œå¾Œæœƒå¾—åˆ°ç¶­åº¦ç‚º \\(K (1024)\\) çš„ global featureã€‚ä½œè€…åœ¨é™„éŒ„ä¸­æœ‰ å°æ­¤è™•ï¼šã€Œç‚ºä½• mlp æå–å¤ å¤š features èª¤å·®å°±æœƒä½ã€åšæ•¸å­¸è­‰æ˜ï¼Œç¶²è·¯ä¸Šè¨±å¤šæ–‡ç« æ²’ æœ‰å°æ­¤åšè©³ç´°çš„è§£è®€ï¼Œæœ¬æ–‡æœƒè©¦è‘—ç›¡é‡è§£é‡‹ä¹‹ã€‚ paper æåˆ°é€éå¯¦é©—ï¼Œå¯ä»¥è—‰ç”± mlp å»é€¼è¿‘ \\(h\\) å’Œé€é single variable function åŠ max poolinig function å»é€¼è¿‘å°ç¨±å‡½æ•¸ \\(g\\)ï¼Œé€éä¸€é€£ä¸²çš„ \\(h\\)ï¼Œæˆ‘å€‘å¯ä»¥ å­¸ç¿’åˆ°ä¸€å€‹ä¸éŒ¯çš„ \\(f\\)ï¼Œå…¶ä¸­\n$$f = [f_1, \\dots, f_K].$$\nLocal and Global Information Aggregation # ç”± Fig 2 å¯ä»¥çœ‹å‡ºï¼Œglobal feature åªèƒ½åš Classificationã€‚é€éå¼ (1)ï¼Œå¯ä»¥å¾—åˆ°ä¸€ å€‹å‘é‡ \\([f_1, \\dots, f_K]\\)ï¼Œé€é Fig 2ï¼ˆSegmentation Networkï¼‰ï¼Œæˆ‘å€‘å°‡ global é»é›²ç‰¹å¾µï¼ˆ\\(1024\\)ï¼‰æ¥åœ¨æ¯ä¸€å€‹é»æœ¬ä¾†çš„ \\(64\\) å€‹ç‰¹å¾µç¶­åº¦ï¼Œå°±å¯ä»¥å¾—åˆ° per point çš„æ–° featureï¼Œè€Œé€™å€‹æ–° feature èƒ½å¤ åŒæ™‚è¡¨ local å’Œ global çš„è¨Šæ¯ï¼Œä¸¦ä¸” èƒ½è¢«æ‡‰ç”¨åœ¨ Segmentation ä¸Šã€‚\nJoint Alignment Network # é€éé æ¸¬ä¸€å€‹ã€Œè½‰ç½®çŸ©é™£ã€ï¼ˆFig 2 ä¸­ T-netï¼Œå¤§å°åˆ†åˆ¥ç‚º \\(3 \\times 3\\) å’Œ \\(64 \\times 64\\)ï¼‰ï¼ŒåŒæ™‚ç‚ºäº†é¿å… loss éå¤§ï¼Œæœ‰äº†ä»¥ä¸‹çš„ regulationï¼š\n$$ L_{reg} = ||I - AA^T||_F^2, \\tag{2} $$\nå…¶ä¸­ï¼Œ\n\\(A\\)ï¼šç”±è¿·ä½ ç¶²çµ¡é æ¸¬çš„ features alignment çŸ©é™£ æœ€å¾Œå°æ•´å€‹ç¶²è·¯åšå€‹ç°¡å–®çš„èªªæ˜ï¼š\nmlpï¼šå…±äº«æ¬Šé‡çš„å·ç©\nç¬¬ä¸€å±¤çš„ kernel size ç‚º \\(1 \\times 3\\)ï¼Œå› ç‚ºæ¯å€‹é» \\((x, y, z)\\) å¾Œé¢æ¯ä¸€å±¤çš„ kernel å¤§å°éƒ½æ˜¯ \\(1 \\times 1\\) å³ï¼šç‰¹å¾µæå–å±¤åªæ˜¯æŠŠæ¯å€‹é»é€£æ¥èµ·ä¾†è€Œå·²ã€‚ç¶“éå…©çµ„ T-net + mlp å¾Œï¼Œå°æ¯ä¸€å€‹é»æ å– \\(1024\\) ç¶­ç‰¹å¾µï¼Œç¶“é max pool å¾Œï¼Œè®Šæˆ \\(1 \\times 1024\\) çš„å…¨åŸŸç‰¹å¾µã€‚ å†ç¶“éä¸€å€‹ mlp å¾—åˆ° \\(k\\) å€‹ scoreã€‚\n4.3. Theoretical Analysis # Universal approximation # æ­¤ paper é¦–å…ˆå±•ç¤ºäº†ç¥ç¶“ç¶²çµ¡å°é€£çºŒ set functions çš„é€¼è¿‘èƒ½åŠ›ã€‚é€šé set functions çš„é€£çºŒæ€§ï¼Œè¼¸å…¥ point set çš„å°èª¤å·®ä¸æœƒåš´é‡çš„å½±éŸ¿åˆ°å‡½æ•¸å€¼ï¼Œä¾‹å¦‚ classification æˆ– segmentation çš„åˆ†æ•¸ã€‚\nTheorem 1. Suppose \\(f: \\mathcal X \\to \\mathbb R\\) is a continuous set function w.r.t Hausdorff distance \\(d_H(\\cdot, \\cdot)\\). \\(\\forall \\epsilon \u0026gt; 0\\), \\(\\exists\\) a continuous function \\(h\\) and a symmetric function \\(g(x_1, \\dots, x_n) = \\gamma \\circ MAX\\), such that for any \\(S \\in \\mathcal X\\),\n$$\\Bigg |f(S) - \\gamma \\Big (MAX_{x_i \\in S} \\{h(x_i)\\} \\Big) \\Bigg | \u0026lt; \\epsilon$$ where \\(x_1, \\dots, x_n\\) is the full list of elements in \\(S\\) ordered arbitrarily, \\(\\gamma\\) is a continuous function, and \\(MAX\\) is a vector max operator that takes \\(n\\) vectors as input and returns a new vector of the element-wise maximum.\næ­¤å®šç†å‘Šè¨´æˆ‘å€‘ï¼Œç•¶åœ¨ max pooling å±¤æ™‚ï¼Œçµ¦å®šå¤ å¤šçš„ç¥ç¶“å…ƒï¼ˆå³ï¼šæœ¬ç¯‡ paper çš„ $K$ æ˜¯å¤ å¤§çš„ï¼‰ï¼Œ$f$ èƒ½è¼•é¬†çš„è¢«é€¼è¿‘ã€‚\nBottleneck dimension and stability # ç†è«–ä¸Šå’Œå¯¦é©—ä¸Šï¼Œé€é max poolingï¼Œéƒ½æœƒå½±éŸ¿åˆ°ç¶²è·¯çš„è¡¨é”èƒ½åŠ›ï¼Œä½†é€éä»¥ä¸‹å®šç†å¯ä»¥åˆ† æå‡ºæ­¤ç¶²è·¯çš„ç©©å®šæ€§ï¼š\nTheorem 2. Suppose \\(\\textbf u: \\mathcal X \\to \\mathbb R^K\\) such that \\(\\textbf u = MAX_{x_i \\in S} \\{h(x_i)\\}\\) and \\(f = \\gamma \\circ \\textbf u\\). Then,\n(a) \\(\\forall S\\), \\(\\exists \\mathcal C_S\\), \\(\\mathcal N_S \\subseteq \\mathcal X\\), \\(f(T) = f(S)\\) if \\(\\mathcal C_S \\subseteq T \\subseteq \\mathcal N_S\\)\n(b) \\(|\\mathcal C_S| \\le K\\)\n5. Experiment # 5.1. Applications # 3D Object Classification # Table 1. Classification results on ModelNet40. Our net achieves state-of-the-art among deep nets on 3D input. 3D Object Part Segmentation # Table 2. Segmentation results on ShapeNet part dataset. Metric is mIoU(%) on points. We compare with two traditional methods and and a 3D fully convolutional network baseline proposed by us. Our PointNet method achieved the state-of-the-art in mIoU. Figure 3. Qualitative results for part segmentation. We visualize the CAD part segmentation results across all 16 object categories. We show both results for partial simulated Kinect scans (left block) and complete ShapeNet CAD models (right block). Semantic Segmentation in Scenes # Table 3. Results on semantic segmentation in scenes. Metric is average IoU over 13 classes (structural and furniture elements plus clutter) and classification accuracy calculated on points. Table 4. Results on 3D object detection in scenes. Metric is average precision with threshold IoU 0.5 computed in 3D volumes. Figure 4. Qualitative results for semantic segmentation. Top row is input point cloud with color. Bottom row is output semantic segmentation result (on points) displayed in the same camera viewpoint as input. 5.2. Architecture Design Analysis # 5.3. Visualizing PointNet # 5.4. Time and Space Complexity Analysis # Table 6. Time and space complexity of deep architectures for 3D data classification. PointNet (vanilla) is the classification PointNet without input and feature transformations. FLOP stands for floating-point operation. The \u0026ldquo;M\u0026rdquo; stands for million. Subvolume and MVCNN used pooling on input data from multiple rotations or views, without which they have much inferior performance. ","date":"9 October 2018","externalUrl":null,"permalink":"/posts/paper/paper-pointnet/","section":"Posts","summary":"","title":"è«–æ–‡ç­†è¨˜ PointNet: Deep Learning on Point Sets for 3D Classification and Segmentation","type":"posts"},{"content":" Paper Link\næ­¤ç¯‡ paper çš„ä¸»è¦ç›®çš„æ˜¯è¦è§£æ±ºï¼Œä½†é€é€²ç¶²è·¯ training çš„ 3D è³‡æ–™æ˜¯ç¨€ç–çš„ï¼ˆsparseï¼‰ ï¼Œç”¨åŸæœ¬çš„æè¿°æ–¹å¼æœƒå¤ªè€—è²»è¨˜æ†¶é«”è€Œé›£ä»¥å¯¦ä½œï¼Œå› ç‚ºå¯¦éš›ä¸Šå¾ˆå¤šåœ°æ–¹éƒ½æ˜¯æ²’æœ‰å€¼çš„ï¼Œæœ¬ç¯‡ paper é‡é»æ˜¯ï¼šä½¿ç”¨ octree çš„æ–¹æ³•ä¾†è¡¨ç¤ºé«˜è§£æåº¦çš„ã€Œç«‹é«”åœ–åƒã€ï¼Œå»åˆä¸å¤±æœ¬ä¾†ã€Œå®Œæ•´ åœ°ã€è¡¨ç¤ºæ–¹å¼ã€‚\n1. Introduction # ç¾æœ‰çš„ 3D ç¶²è·¯æ¶æ§‹ï¼Œå¤§å¤šæœƒç”¨åƒé¡ä¼¼ 2D pixels çš„è¡¨ç¤ºæ–¹ç¤ºï¼Œåœ¨ 2D æˆ‘å€‘ç¨±ä¹‹ç‚º pixelï¼Œåœ¨ 3D çš„è©±å°±ç¨±ä¹‹ç‚º voxelã€‚åŒç†ï¼Œåœ¨ 2D ä¸–ç•Œçš„ convolution kernel åœ¨ 3D å°± æœƒè®Šæˆä¸€å€‹é•·æ–¹é«”ï¼Œå¤§å°å¯èƒ½æ˜¯ \\(3 \\times 3 \\times 3\\) ä¹‹é¡ã€‚\nå¼•è¿°åŸ paper ä¸­çš„æè¿°ï¼š\na dense and regular 3D voxel grid, and process this grid using 3D convolution and pooling operations.\nä¸¦ä¸”ç¾ä»Šçš„ 3D networks å—é™æ–¼è¨˜æ†¶é«”å¤§å°ï¼Œæ•¸é‡ç´šæ•¸é€šå¸¸å¤§ç´„åœ¨ \\(30^3\\) voxelsã€‚\nå¾ä¸‹åœ–ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒOctNet å¯ä»¥ç”¨ã€Œæ˜é¡¯è¼ƒå°‘ã€çš„ä½å…ƒæ•¸å»è¡¨ç¤ºåˆ°ä¸€æ¨¡ä¸€æ¨£çš„ notationï¼ˆ åœ–ä¸­æ¯ 1 å€‹å°æ­£æ–¹å‹è€—è²»çš„è¨˜æ†¶é«”ç‚º 1 å–®ä½ï¼‰\nFigure 1: Motivation. å¤§éƒ¨åˆ† 3D è³‡æ–™å¸¸å¸¸æ˜¯ç¨€ç–çš„ï¼Œä¾‹å¦‚ï¼š\npoint clouds meshes æ‰€ä»¥å…¶å¯¦åœ¨å¤§å¤šæ™‚é–“ï¼Œ3D convolution çš„è¨ˆç®—éƒ½æµªè²»äº†ä¸å°‘è³‡æºã€‚ä¸¦ä¸”çœŸçš„åœ¨è¨ˆç®—æ™‚ ï¼Œhigh activations å¤§å¤šéƒ½æ˜¯ç™¼åœ¨åœ¨é‚Šç•Œæƒ…æ³ï¼ˆå› ç‚ºå¾ˆå¤šåœ°æ–¹æ²’å€¼å•Šï¼ï¼‰\n2. Related Work # Sparse Models # Engelckeï¼šé€éå°‡å€¼æ¨é€åˆ°å…¶ç›®æ¨™ä½ç½®ä¾†è¨ˆç®—ç¨€ç–è¼¸å…¥ä½ç½®è™•çš„å·ç© prosï¼šé™ä½æ‰€éœ€è¦çš„è¨ˆç®—æ¬¡æ•¸ consï¼šè¨˜æ†¶é«”è³‡æºé‚„æ˜¯éå¸¸è€— reducing sparse convolutions to matrix operations consï¼šåªå…è¨± \\(2 \\times 2\\) çš„å·ç©ï¼Œè€Œä¸”éœ€ä¾†ä¾†å› indexing æ‹·è²ï¼Œæ‰€ä»¥ä»æœ‰ overheadï¼Œæœ€é«˜è§£æåº¦å¤§æ¦‚åªèƒ½åšåˆ° \\(80^3\\) voxelsã€‚ Liï¼šfield probing networks (FBL)ï¼šå…ˆå° 3D data é€²è¡Œ sampleï¼Œå†é¤µé€²ç¶²è·¯ prosï¼šçµçœè¨˜æ†¶é«”ã€è¨ˆç®—é‡ consï¼šå› ç‚º FBL è¢«ï¼Œstackedã€convolvedã€pooledï¼Œæ‰€ä»¥ç„¡æ³•å®Œç¾ç™¼æ® ConvNets çš„ åŠ›é‡ã€‚ 3. Octree Networks # ç‚ºäº†æ¸›å°‘è¡¨ç¤º sparse 3D data æ‰€éœ€è¦çš„è¨˜æ†¶é«”ç©ºé–“ï¼Œpaper æå‡ºäº†ä¸€ç¨®é‡å°æ•´å€‹ç«‹æ–¹é«”çš„ åŠƒåˆ†æ–¹æ³•ï¼šå°‡è¨ˆç®—é›†ä¸­åœ¨ç›¸é—œå€åŸŸä¸Šã€‚è€Œ octrees å°±æ˜¯ä¸€å€‹å¾ˆæ£’çš„åŠƒåˆ† 3D voxel çš„ è¡¨ç¤ºæ³•ã€‚\nä¸€èˆ¬ä¾†èªªï¼Œoctrees æœƒä½¿ç”¨ pointers ä¾†å¯¦ä½œï¼Œå¦‚æ­¤å°±èƒ½é”åˆ°ã€ŒçœŸå¯¦ã€åœ°é™ä½è¨˜æ†¶é«”éœ€æ±‚é‡ ï¼Œä½† ConvNet çš„ operation é€šå¸¸éœ€è¦é »ç¹åœ°è¨ªå•é„°å±…çš„å€¼ï¼Œå› æ­¤å¤ªæ·±çš„ octrees æœƒè®“è¨ª å•æ™‚é–“éå¤§ï¼Œç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼Œæœ¬ç¯‡ paper æå‡ºäº†ä¸‹ç¯€çš„ hybrid grid octree data structureã€‚\n3.1. Hybrid Grid-Octree Data Structure # ç‚ºäº†è§£æ±ºä¸Šè¿°æ‰€æå‡ºçš„æ·±åº¦å•é¡Œï¼ˆæ·±åº¦æœƒå¢åŠ è¨ªå•çš„æ™‚é–“è¤‡é›œåº¦ï¼‰ï¼Œæ­¤ç¯‡ paper æå‡º äº†ã€Œé™åˆ¶ octree æœ€å¤§æ·±åº¦ã€çš„æƒ³æ³•ã€‚\nFigure 2: Hybrid Grid-Octree Data Structure. This example illustrates a hybrid grid-octree consisting of $8$ shallow octrees indicated by different colors. Using $2$ shallow octrees in each dimension with a maximum depth of $3$ leads to a total resolution of $16^3$ voxels. Fig. 2 ä¸­å°‡æœ€å¤§æ·±åº¦é™åˆ¶ç‚º \\(3\\)ï¼Œæ‰€ä»¥æœ¬ä¾† \\(1\\) æ£µæ¨™æº–çš„å…«å‰æ¨¹å°±éœ€è¦ç”¨ \\(8\\) æ£µæ·ºå…«å‰æ¨¹ï¼ˆshallow octreesï¼Œä»¥ä¸‹ç°¡ç¨±æ·ºæ¨¹ï¼‰ä¾†è¡¨ç¤ºï¼Œé›–ç„¶é€™å€‹è³‡æ–™çµæ§‹ä¸æœƒ åƒæ¨™æº–çš„å…«å‰æ¨¹é‚£éº¼çœè¨˜æ†¶é«”ï¼Œå› ç‚ºæˆ‘å€‘éœ€è¦æ›´å¤šçš„æ·ºæ¨¹ä¾†è¡¨ç¤ºï¼Œä½†æ˜¯æˆ‘å€‘æˆåŠŸçš„å°‡æœ¬ä¾†è¦ \\(\\log_2 16 = 4\\) å±¤çš„ pointers é™åˆ°äº† \\(\\log_2 8 = 3\\) å±¤çš„ pointersï¼Œè€Œä¸” è¨˜æ†¶é«”é‚„æ˜¯è€—è²»åœ¨ä¸€å€‹ \\(O(1)\\) ä¹‹å…§ï¼Œä¸¦ä¸”é‚„èƒ½å†åšå£“ç¸®ã€‚\nä¾‹å¦‚åƒè‹¥æœ‰ä¸€æ£µæ·ºæ¨¹æ²’æœ‰ä»»ä½• input dataï¼Œä»–å°±åªè¦ç”¨ä¸€å€‹ \\(\\textbf 0\\) å‘é‡ä¾†è¡¨ ç¤ºæœ¬ä¾† \\(8^3 = 512\\) å€‹ \\(\\textbf 0\\) å‘é‡ï¼ˆå‡è¨­æ·±åº¦ä¸€æ¨£æ˜¯ \\(3\\)ï¼‰ï¼\nå…«å‰æ¨¹çš„ä¸€å€‹å¤§å„ªé»å°±æ˜¯å¯ä»¥æœ‰æ•ˆç‡åœ°ç·¨ç¢¼æˆ bit string representationï¼Œä¸åƒ…æœ‰æ•ˆé™ä½ è¨ªå•æ¬¡æ•¸ï¼Œä¹Ÿå¯é‹ç”¨ GPGPU æœ‰ æ•ˆåœ°å¯¦ä½œã€‚\n3(a) Shallow Octree 3(b) Bit-Representation Figure 3: Bit Representation. Shallow octrees can be efficiently encoded using bit-strings. the bit-string 1 01010000 00000000 01010000 00000000 010100000\u0026hellip; defines the octree in (a) ä½¿ç”¨é€™ç¨® bit-representationï¼Œæ·ºå…«å‰æ¨¹ä¸­çš„å–®å€‹ voxel å®Œå…¨ç”±å…¶ bit index è¡¨ç¤ºã€‚æ­¤ index ç¢ºå®šï¼š\nvoxel çš„æ·±åº¦ voxel çš„å¤§å°ï¼ˆè¶Šæ·±è¶Šå°ï¼‰ å¯ä»¥ä½¿ç”¨ç°¡å–®çš„ç®—æ³•ä¾†æª¢ç´¢ index \\(i\\) çš„ voxel çš„ç›¸æ‡‰çš„çˆ¶ã€å­ç´¢å¼•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æŒ‡ å‘çˆ¶ç¯€é»å’Œå­ç¯€é»çš„ pointerï¼š\n$$ \\text{pa}(i) = \\Bigg \\lfloor \\frac{i - 1}{8} \\Bigg \\rfloor, \\tag{1} $$\n$$ \\text{ch}(i) = 8 \\cdot i + 1. \\tag{2} $$\næˆ‘å€‘å°‡æ·ºæ¨¹çš„ data (storgin features vectors) æ”¾åœ¨ä¸€å€‹é€£çºŒçš„é™£åˆ—ï¼Œå› æ­¤æˆ‘å€‘è¦èƒ½å¿« é€Ÿçš„è¨ˆç®—ï¼šç•¶çµ¦å®šä¸€å€‹ bit-representation ä¸­çš„ index \\(i\\) æ™‚ï¼Œç®—å‡ºä»–å°æ‡‰çš„ data indexï¼Œå…¬å¼å¦‚ä¸‹ï¼š\n$$ \\text{data\\_idx}(i) = \\underbrace{8 \\sum_{j = 0}^{\\text{pa}(i) - 1} \\text{bit}(j) + 1}_{\\#\\text{nodes above }i} - \\underbrace{\\sum_{j = 0}^{i - 1} \\text{bit}(j)}_{\\#\\text{split nodes pre }i} + \\underbrace{\\text{mod}(i - 1, 8)}_{\\text{offset}}. \\tag{3} $$\nçœ‹èµ·ä¾†å¾ˆè¤‡é›œï¼Œå°å§ï¼Ÿ\nå¼•è¿° A.3. Efficient Convolution çš„èªªæ˜ï¼š\npaper æœ‰æä¾›äº† Appendix çš„ä¾‹å­ä¾›åƒè€ƒï¼Œé€™è£¡åšå€‹ç­†è¨˜ï¼Œç‚ºäº†èƒ½å¤ åœ–åƒåŒ–ï¼Œå°‡å…«å‰æ¨¹æ”¹ç‚º å››å‰æ¨¹ï¼Œå°æ‡‰çš„å…¬å¼ä¿®æ­£å¦‚ä¸‹ï¼š\n$$ \\text{data\\_idx}_4(i) = \\underbrace{4 \\sum_{j = 0}^{\\text{pa}(i) - 1} \\text{bit}(j) + 1}_{\\#\\text{nodes above }i} - \\underbrace{\\sum_{j = 0}^{i - 1} \\text{bit}(j)}_{\\#\\text{split nodes pre }i} + \\underbrace{\\text{mod}(i - 1, 4)}_{\\text{offset}}. \\tag{14} $$\nå’Œ\n$$ \\text{pa}_4(i) = \\Bigg \\lfloor \\frac{i - 1}{4} \\Bigg \\rfloor. $$\n13(a) Bit-String 13(b) Split and Leaf Nodes 13(c) Bit Index 13(d) Data Index ä¾‹å¦‚æˆ‘å€‘è¦æ‰¾çš„ bitï¼Œindex ç‚º \\(51\\)ï¼Œæˆ‘å€‘é¦–å…ˆæ ¹æ“šæ‰¾ parent çš„å…¬å¼ï¼š\n$$ \\text{pa}_4(51) = \\Bigg \\lfloor \\frac{51 - 1}{4} \\Bigg \\rfloor = 12. $$\nå¾—åˆ° parent bit index ç‚º \\(12\\)ï¼Œå†ä¾†è¨ˆç®— parent \\(12\\) çš„ç¬¬ä¸€å€‹ childï¼š\n$$ 12 \\cdot 4 + 1 = 49. $$\nå†æ ¹æ“šå¼ (14) ç¬¬ä¸€é …ï¼šæ‰¾å‡ºç”± bit \\(0\\) åˆ° bit \\(11\\) çš„ bit value æ˜¯ \\(1\\) çš„æ•¸é‡ï¼ˆå³ï¼šæœ‰å‰é–‹è™•ï¼‰ï¼Œä»¥é€™è£¡ä¾†èªªå…±æœ‰ \\(4\\) å€‹ï¼Œåˆ†åˆ¥åœ¨ bit index \\(0\\), \\(2\\), \\(4\\) å’Œ \\(9\\)ï¼Œæ‰€ä»¥å¾—åˆ°åœ¨ bit \\(49\\) ä»¥å‰çš„é»å…±æœ‰ \\(4 \\cdot 4 + 1 = 17\\) å€‹\nå¼ (14) ç¬¬äºŒé …ï¼šåœ¨ bit \\(51\\) å‰ bit value æ˜¯ \\(1\\) çš„æ•¸é‡ï¼Œä»¥é€™è£¡ä¾†èªªå…±æœ‰ \\(6\\) å€‹ï¼Œåˆ†åˆ¥åœ¨ bit index \\(0\\), \\(2\\), \\(4\\), \\(9\\), \\(12\\) å’Œ \\(18\\)ï¼Œæ‰€ä»¥é€™äº›å¾…æœƒè¦æ‰£æ‰ \\(6\\)\nå¼ (14) ç¬¬ä¸‰é …å–®ç´”çš„æ‰¾å‡º offset ç‚º\n$$ \\text{mod}(51 - 1, 4) = 2. $$\næœ€å¾Œå°±èƒ½æ±‚å¾— bit $51$ çš„ data index ç‚º $17 - 6 + 2 = 13$ã€‚\n3.2. Networks Operations # ä¾†è¬›è¬› notation çš„è¡¨ç¤ºæ–¹æ³•ï¼š\n\\(T_{i, j, k}\\)ï¼šåœ¨ä½ç½® \\((i, j, k)\\) çš„ 3D tensor \\(T\\)\nçµ¦å®š hybrid grid-octree structure å’Œå¤§å°ç‚º \\(D \\times H \\times W\\) çš„æ·ºæ¨¹ï¼Œ ä¸¦ä¸”æ·±åº¦ \\(\\le 3\\)\n\\(O[i, j, k]\\)ï¼šæ‰€æœ‰èƒ½å¤ åŒ…ä½ voxel \\((i, j, k)\\) ä¸­ï¼Œæœ€å° cell çš„ value\næ‰€ä»¥å³ä¾¿ \\(i_1 \\ne i_2 \\lor j_1 \\ne j_2 \\lor k_1 \\ne k_2\\)ï¼Œ\\(O[i_1, j_1, k_1]\\) å’Œ \\(O[i_2, j_2, k_2]\\) ä»æœ‰å¯èƒ½å°æ‡‰åˆ°åŒä¸€å€‹ hybrid grid-octree ä¸­çš„ voxelï¼Œé€™æ˜¯ç”± voxels çš„å¤§å°æ‰€æ±ºå®šçš„ã€‚\nå¦å¤–æˆ‘å€‘å¯ä»¥å¾—åˆ°æ·ºæ¨¹çš„ index ç‚º \\((\\big\\lfloor \\frac i 8 \\big\\rfloor, \\big\\lfloor \\frac j 8 \\big\\rfloor, \\big\\lfloor \\frac k 8 \\big\\rfloor)\\)ï¼Œä¸”å°å…¶ ä¸­ä¸€å€‹æ·ºæ¨¹çš„ local index ç‚º \\((\\text{mod}(i, 8), \\text{mod}(j, 8), \\text{mod}(k, 8))\\)ã€‚\næœ‰äº†ä¸Šè¿°çš„ notation å¾Œï¼Œæˆ‘å€‘å¯ä»¥å¾—åˆ°ç”± grid-octree \\(O\\) åˆ° tensor \\(T\\) çš„ mapping å¦‚ä¸‹ï¼š\n$$ \\text{oc2ten}: T_{i, j, k} = O[i, j, k]. \\tag{4} $$\né€™è£¡å¯ä»¥ç†è§£æˆï¼šæˆ‘å€‘è¦æ‰¾ \\((i, j, k)\\) çš„å€¼ï¼Œå³ï¼š\n\\(\\forall\\) cell \\(\\in O\\)ï¼Œ\nèƒ½åŒ…ä½ \\((i, j, k)\\) å¤§å°åˆæ˜¯æœ€å°çš„ cell è©² cell çš„ value å°±æ˜¯ä½ç½® \\((i, j, k)\\) çš„ tensorã€‚\nå› æ­¤å¯èƒ½æœƒæœ‰å¥½å¹¾å€‹ä¸åŒçš„ä½ç½®ï¼Œå› ç‚ºéƒ½åœ¨åŒä¸€å€‹ cell ä¹‹ä¸­ï¼Œä»–å€‘çš„ value å°±ä¸€æ¨£ã€‚\nåŒæ™‚ä¹Ÿå¯å¾—åˆ°é€†å‘çš„ mappingï¼š\n$$ \\text{ten2oc}: O[i, j, k] = \\text{pool\\_voxels}_{(\\bar i, \\bar j, \\bar k) \\in \\Omega[i, j, k]} (T_{\\bar i, \\bar j, \\bar k}), \\tag{5} $$\nå…¶ä¸­ï¼Œ\n\\(\\text{pool\\_voxels}(\\cdot)\\)ï¼špooling function (e.g., average or max-pooling)ï¼Œå°æ‰€æœ‰åœ¨ \\(T\\) ä¸­çš„ voxels åš pooling å¯ä»¥ç†è§£æˆï¼š\\(\\forall (\\bar i, \\bar j, \\bar k)\\) åœ¨ \\((i, j, k)\\) æ‰€å°æ‡‰åˆ°çš„ ç¯„åœå…§ï¼ˆè©² cellï¼Œæœ€å¤§æœƒæ˜¯ \\(8^3 = 512\\)ï¼‰ï¼Œå°ä»–å€‘æ¯å€‹ voxels æ‰€å°æ‡‰çš„ tensor \\(T_{\\bar i, \\bar j, \\bar k}\\) åš pooling\nConvolution # Convolution ç„¡ç–‘æ˜¯æœ€é‡è¦ä¹Ÿæœ€åƒè¨ˆç®—è³‡æºçš„ï¼Œå°åªæœ‰å–®ä¸€ feature map çš„æ¯å€‹ voxels ä¾†èªªï¼Œå°æ¯ä¸€å€‹é€é€²ä¾†çš„ input tensor \\(T_{\\hat i, \\hat j, \\hat k}^\\text{in}\\) å’Œ 3D kernel \\(W \\in \\mathbb R^{L \\times M \\times N}\\) å¯ä»¥è¢«å¯«æˆï¼š\n$$ T_{i, j, k}^\\text{out} = \\sum_{l = 0}^{L - 1} \\sum_{m = 0}^{M - 1} \\sum_{n = 0}^{N - 1} W_{l, m, n} \\cdot T_{\\hat i, \\hat j, \\hat k}^\\text{in}, \\tag{7} $$\nå…¶ä¸­ï¼š\n\\(\\hat i = i - l + \\lfloor L / 2 \\rfloor\\) \\(\\hat j = j - m + \\lfloor M / 2 \\rfloor\\) \\(\\hat k = k - n + \\lfloor N / 2 \\rfloor\\) åŒæ¨£çš„ï¼Œå° grid-octree åš convolutionsï¼š\n$$ \\text{ten2oc}: O^\\text{out}[i, j, k] = \\text{pool\\_voxels}_{(\\bar i, \\bar j, \\bar k) \\in \\Omega[i, j, k]} (T_{\\bar i, \\bar j, \\bar k}) \\tag{8} $$\n$$ T_{i, j, k} = \\sum_{l = 0}^{L - 1} \\sum_{m = 0}^{M - 1} \\sum_{n = 0}^{N - 1} W_{l, m, n} \\cdot O^\\text{in}[\\hat i, \\hat j, \\hat k]. $$\nå° \\(\\forall (i, j, k) \\in \\text{cell } \\Omega[i, j, k]\\) åšå·ç©çš„è©±ï¼Œè‹¥ octree cell å¤§å°ç‚º \\(8^3\\)ï¼Œkernel å¤§å°ç‚º \\(3^3\\) çš„è©±ï¼Œå…±è¦åš\n\\(8^3 \\cdot 3^3 = 13,824\\) æ¬¡ä¹˜æ³•ã€‚ä½†æ˜¯ï¼Œæˆ‘å€‘å¯ä»¥æ›´æœ‰æ•ˆåœ°è¨ˆç®—ï¼Œå¦‚ Fig. 14 çš„ä¾‹ å­æ‰€ç¤ºï¼š\n14(a) Constant 14(b) Corners 14(c) Edges 14(d) Faces Fig. 14aï¼šè§€å¯Ÿåˆ°å¤§éƒ¨åˆ†ä¸­å¿ƒçš„å€¼æ˜¯å›ºå®šçš„ã€‚å› æ­¤ï¼Œæˆ‘å€‘åªéœ€è¦åœ¨ä¸­å¿ƒå…§ä¸€æ¬¡è¨ˆç®—ä¸€æ¬¡å· ç©ä¸¦å°‡çµæœä¹˜ä»¥ \\(8^3\\)\nFig. 14b-dï¼šå¦å¤–ï¼Œæˆ‘å€‘åªéœ€è¦åœ¨ voxel çš„ cornerrã€edges å’Œ faces ä¸Šè¨ˆç®— kernel çš„æˆªæ–·ç‰ˆæœ¬ã€‚é€™æ¨£çš„å¯¦ä½œæ–¹æ³•å¾ˆæœ‰æ•ˆç‡ï¼Œå› ç‚ºæˆ‘å€‘ç¸½å…±åªéœ€è¦ï¼š\nå°ä¸­å¿ƒ constant éƒ¨åˆ†é€²è¡Œ \\(3^3 = 27\\) æ¬¡ä¹˜æ³• å° corners é€²è¡Œ \\(8 \\cdot 19 = 152\\) æ¬¡ä¹˜æ³• å° edges é€²è¡Œ \\(12 \\cdot 6 \\cdot 15 = 1080\\) æ¬¡ä¹˜æ³• å° faces é€²è¡Œ \\(6 \\cdot 6^2 \\cdot 9 = 1944\\) æ¬¡ä¹˜æ³• ç¸½å…±ç”¢ç”Ÿ \\(27 + 152 + 1080 + 1944 = 3203\\) æ¬¡ä¹˜æ³•ï¼Œæ˜¯æœ¬ä¾† \\(13,824\\) çš„ \\(23.17%\\)ï¼Œèƒ½æœ‰æ•ˆé™ä½è¨ˆç®—çš„æ™‚é–“è¤‡é›œåº¦ã€‚\næ‰€ä»¥å¯ä»¥å¾—åˆ°ä¸‹é¢çš„ Fig. 4ï¼Œæœ‰åˆ¥æ–¼å‚³çµ±çš„ voxel by voxel convolutionï¼Œpaper ä¸­æå‡º ä¾†ï¼šé€éåˆ†é–‹è¨ˆç®—å„å€‹ voxel\nconstant èˆ‡é„°å±…çš„æˆªæ–· convolution å†ç›¸åŠ æ˜é¡¯æœ‰æ•ˆç‡å¾ˆå¤šã€‚\n4(a) Standard Convolution 4(b) Efficient Convolution Pooling # Pooling ä¾åºå¾æœ€å°çš„ cell é–‹å§‹ï¼Œæ¯ \\(2^3\\) å€‹ç•¶å‰æœ€å°çš„ cell åšä¸€æ¬¡ poolingï¼Œ å…¬å¼å¯å¯«æˆå¦‚ä¸‹ï¼š\n$$ T_{i, j, k}^\\text{out} = \\max_{l, m, n \\in [0, 1]} (T_{2i + l, 2j + m, 2k + n}^\\text{in}), \\tag{9} $$\nå…¶ä¸­ï¼š\n\\(T^\\text{in} \\in \\mathbb R^{2D \\times 2H \\times 2W}\\) \\(T^\\text{out} \\in \\mathbb R^{D \\times H \\times W}\\) å°ä¸€å€‹æœ‰ \\(2D \\times 2H \\times 2W\\) æ£µæ·ºæ¨¹çš„ input grid octree \\(O^\\text{in}\\) è€Œè¨€ï¼Œ\\(O^\\text{out}\\) æœƒæœ‰ \\(D \\times H \\times W\\) æ£µæ·ºæ¨¹ ï¼Œæ¯ä¸€å€‹ \\(O^\\text{in}\\) ä¸­çš„ voxel éƒ½å¤§å°éƒ½æœƒå°åŠå†è¤‡è£½åˆ°æ›´æ·± 1 å±¤çš„æ·ºæ¨¹ï¼Œä¾‹ å¦‚ä»¥æ·±åº¦ç‚º \\(3\\) çš„ \\(O^\\text{in}\\) åšä¸€æ¬¡ poolingï¼Œå…¬å¼å¯ä»¥å¯«æˆï¼š\n$$ O^\\text{out}[i, j, k] = \\begin{cases} O^\\text{in}[2i, 2j, 2k] \u0026amp; \\text{ if vxd}(2i, 2j, 2k) \u0026lt; 3; \\\\ P \u0026amp; \\text{ else} \\end{cases} $$\n$$ P = \\max_{l, m, n \\in [0, 1]} (O^\\text{in}[2i + l, 2j + m, 2k + n]), \\tag{10} $$\nå…¶ä¸­ \\(\\text{vxd}(\\cdot)\\) è¨ˆç®—åœ¨æ·ºæ¨¹ä¸­ indexed voxel çš„æ·±åº¦ã€‚\né€é Fig. 5 èƒ½æœ‰æ›´æ·±çš„äº†è§£ï¼š\nFigure 5: Pooling. The \\(2^3\\) pooling operation on the grid-octree structure combines \\(8\\) neighbouring shallow octrees (a) into one shallow octree (b). The size of each voxel is halved and copied to the new shallow octree structure. Voxels on the finest resolution are pooled. Different shallow octrees are depicted in different colors. Unpooling # æœ‰äº† pooling çš„æ¦‚å¿µå¾Œï¼Œunpooling å°±åªæ˜¯é€†å‘å›å»ï¼Œä¹Ÿå–®ç´”å¾ˆå¤šï¼Œå¯«æˆå…¬å¼å¦‚ä¸‹ï¼š\n$$ T_{i, j, k}^\\text{out} = T_{\\lfloor i / 2 \\rfloor, \\lfloor j / 2 \\rfloor, \\lfloor k / 2 \\rfloor}^\\text{in}. \\tag{11} $$\n$$ O^\\text{out}[i, j, k] = O^\\text{in}[\\lfloor i / 2 \\rfloor, \\lfloor j / 2 \\rfloor, \\lfloor k / 2 \\rfloor]. \\tag{12} $$\nFigure 6: Unpooling. The \\(2^3\\) unpooling operation transforms a single shallow octree of depth \\(d\\) as shown in (a) into \\(8\\) shallow octrees of depth \\(d - 1\\), illustrated in (b). For each node at depth zero one shallow octree is spawned. All other voxels double in size. Different shallow octrees are depicted in different colors. 4. Experimental Evaluation # 4.1. 3D Classification # Figure 7: Results on ModelNet10 Classification Task. Figure 8: Voxelized 3D Shapes from ModelNet10. å¾ Fig. 7 ä¸­å¯ä»¥çœ‹å‡ºï¼ŒOctNet åœ¨å„é … metrics ä¸­éƒ½æœ‰å¾ˆå¼·å¤§çš„èƒ½åŠ›ï¼ŒFig. 7c æ˜¯æŒ‡æ¯å€‹ block çš„å·ç©å±¤æ•¸åˆ†åˆ¥å›ºå®šåœ¨ \\(1\\)ã€\\(2\\) å’Œ \\(3\\)ã€‚Fig 7d ä¸­ï¼Œç”šè‡³å¯ç™¼ç¾ DenseNet åªèƒ½åšåˆ° \\(64^3\\) çš„æœ€å¤§è§£æåº¦ï¼Œé é ä¸åŠ OctNet èƒ½åšåˆ° \\(256^3\\) çš„ è§£æåº¦ã€‚\n4.2. 3D Orientation Estimation # Figure 9: Confusion Matrices on ModelNet10. Figure 10: Orientation Estimation on ModelNet10. Figure 11: Orientation Estimation on ModelNet10. This figure illustrates $10$ rotation estimates for \\(3\\) chair instances while varying the input resolution from \\(16^3\\) to \\(128^3\\). Darker colors indicate larger deviations from the ground truth. 4.3. 3D Semantic Segmentation # Table 1: Semantic Segmentation on RueMonge2014. Figure 12: OctNet \\(256^3\\) Facade Labeling Results. 5. Conclusion and Future Work # OctNet æ˜¯ä¸€ç¨®æ–°ç©çš„ 3D representationï¼Œå¯ä»¥è®“é«˜è§£æåº¦è¼¸å…¥æ·±åº¦å­¸ç¿’ã€‚æˆ‘å€‘åˆ†æäº†é«˜ è§£æåº¦è¼¸å…¥å°å¹¾å€‹ 3D å­¸ç¿’ä»»å‹™çš„é‡è¦æ€§ï¼Œä¾‹å¦‚å°è±¡åˆ†é¡ã€å§¿å‹¢ä¼°è¨ˆå’Œèªç¾©åˆ†å‰²ã€‚æˆ‘å€‘çš„å¯¦ é©—è¡¨æ˜ï¼Œå°æ–¼ ModelNet10 åˆ†é¡ï¼Œä½è§£æåº¦ç¶²çµ¡è­‰æ˜æ˜¯è¶³å¤ çš„ï¼Œè€Œé«˜è¼¸å…¥ï¼ˆå’Œè¼¸å‡ºï¼‰è§£æåº¦ å°æ–¼ 3D æ–¹å‘ä¼°è¨ˆå’Œ 3D point cloud æ¨™è¨˜å¾ˆé‡è¦ã€‚ä½†æ­¤ç¯‡ paper ä½œè€…ç›¸ä¿¡ï¼ŒOctNet èƒ½å¤  å°‡ 3D çš„æ·±åº¦å­¸ç¿’å¸¶å‘æ›´é«˜è§£æåº¦çš„ä¸–ç•Œã€‚\n","date":"5 October 2018","externalUrl":null,"permalink":"/posts/paper/paper-octnet/","section":"Posts","summary":"","title":"è«–æ–‡ç­†è¨˜ OctNet: Learning Deep 3D Representations at High Resolutions","type":"posts"},{"content":" Paper Link\nåœ¨é€™ç¯‡ paper ä¸­ï¼Œå±•ç¤ºäº†ä½¿ç”¨ CNNs å»è™•ç† 3D point cloudsï¼Œä¸¦ä¸”æ‡‰ç”¨åœ¨ semantic segmentation å’Œ object recognition ä¸­ã€‚\nMathWorks å®˜ç¶²æœ‰å° Semantic Segmantation åšäº†ä¸€å€‹åŸºç¤ çš„ä»‹ç´¹ï¼š\nåˆ†å‰²ï¼ˆSegmantationï¼‰å°æ–¼åœ–åƒåˆ†æä»»å‹™éå¸¸é‡è¦ã€‚èªç¾©åˆ†å‰²ï¼ˆSegmantic Segmantationï¼‰ æè¿°äº†å°‡åœ–ç‰‡ä¸­çš„æ¯å€‹åƒç´ èˆ‡é¡æ¨™ç±¤ï¼ˆclass labelï¼‰ï¼Œä¾‹å¦‚ï¼šèŠ±ã€äººã€é“è·¯ã€å¤©ç©ºã€æµ·æ´‹ æˆ–æ±½è»Šï¼Œç›¸é—œè¯çš„éç¨‹ã€‚\n1. Introduction # ç¾æœ‰çš„æ·±åº¦å­¸ç¿’åœ¨è™•ç† 3D è³‡æ–™ï¼Œåƒæ˜¯é«”ç©ã€point cloudsã€æˆ– multi-view åœ–ç‰‡ä»æœ‰ä¸å°‘ å›°é›£ã€‚\nVolume representation æœ€èƒ½å¤ ã€Œå®Œæ•´åœ°ã€æè¿°ä¸€å¼µåœ–ç‰‡ï¼Œç›´è§€ä¸Šä¹Ÿæ˜¯æœ€å®¹æ˜“å¯¦åšçš„ï¼Œä½† æ˜¯ç¤™æ–¼ç¡¬é«”è³‡æºï¼ˆè¨˜æ†¶é«”ã€å®¹é‡ç­‰ï¼‰ï¼Œæ‰€ä»¥ä¸å¤§å¯è¡Œã€‚ Multi-view representation é›–ç„¶ä¸æ˜¯æœ€çœŸå¯¦çš„æè¿°æ–¹å¼ï¼Œä½†èƒ½å¤ é€éäº‹å…ˆè¨“ç·´å¥½çš„ 2D æ¨¡å‹ä¾†åŠ ä»¥å¯¦ç¾ã€‚ Point clouds ä¸ä½†è³‡è¨Šé‡è¼ƒå°ï¼Œè€Œä¸”è¼ƒç‚ºå½ˆæ€§ï¼Œä½† point clouds èˆ‡ç¥ç¶“ç¶²è·¯çš„æ‡‰ç”¨é‚„ æœªè¢«æ·±å…¥æŒ–æ˜ï¼Œé€™ä¹Ÿæ˜¯æ­¤ç¯‡ paper èª•ç”Ÿçš„åŸå› ã€‚ ç¶œåˆä¾†èªªï¼Œæ•´ç¯‡ paper çš„é‡é»åœ¨æ–¼ï¼š\nA pointwise convolution operator that can output features at each point in a point cloud; Two pointwise convolutional neural networks for semantic scene segmentation and object recognition. 2. Related Works # 2.1. Shape descriptors # Hand-crafted çš„ shape descriptors åœ¨æ·±åº¦å­¸ç¿’èª•ç”Ÿä»¥å‰ï¼Œæ™‚å¸¸è¢«é‹ç”¨åœ¨å„ç¨®ä¸åŒçš„ computer vision æ‡‰ç”¨ä¸Šï¼Œç›´åˆ°æ·±åº¦å­¸ç¿’çš„å‡ºç¾ï¼Œå‚³çµ±æ–¹æ³•çš„çœ¼æ·šä¹Ÿæ»´ä¸‹ä¾†äº†ã€‚\n2.2. Object recognition # çµèªï¼šCNNs è¢«å»£æ³›é‹ç”¨åœ¨ CV å’Œ AI é ˜åŸŸå·²ç¶“ä¸æ˜¯ä¸€å…©å¤©çš„äº‹äº†ã€‚\nåƒ ImageNet å°±æ˜¯ä¸€å€‹è‘—åçš„å¤§å‹ RGB 3 ç¶­ image datasetï¼ŒCNNs èƒ½å¤ å¾ä¸­æˆåŠŸåœ°å­¸ç¿’åˆ° image descriptors ä¸¦å¤§å‹å‚³çµ±æ–¹æ³•ã€‚\nè€Œ PointNet æ˜¯ç¬¬ä¸€å€‹èƒ½å¤ è™•ç† point cloud data çš„ç¶²è·¯æ¶æ§‹ï¼Œä»–èƒ½å¤ å­¸ç¿’åˆ°é †åºä¸è®Šæ€§ï¼ˆorder-invarianceï¼‰çš„å‡½å¼ã€‚\næ­¤å¤–ï¼ŒPointCNN ä¹Ÿæ¢ç´¢äº† equivariance è€Œä¸æ˜¯ invariance çš„è§€é»ï¼Œä¸¦ä¸”å¾—åˆ°å’Œ PointNet å¯æ¯”çš„æ•ˆèƒ½ã€‚\nç‚ºäº†é”æˆç¸®æ”¾çš„ç›®çš„ï¼Œé€šéå»ºç«‹è¨ˆç®—åœ–å‹ï¼Œä¾‹å¦‚ï¼š\noctree kd-tree ä¹Ÿå¾ˆå¸¸è¦‹ã€‚\nStanford æå‡ºçš„ PointNet é›–ç„¶æ•ˆèƒ½å¾ˆçŒ›ï¼Œä½†ç¶²è·¯è¤‡é›œï¼Œé€™ç¯‡ paper æå‡ºäº†ç›¸å°ç°¡å–®çš„ pointwise convolutionï¼Œä¸”èƒ½é”åˆ°å’Œ PointNetã€PointCNN ç­‰ç›¸ä»¿çš„æº–ç¢ºåº¦ã€‚\n2.3. Semantic segmentation # ç”± Silberman æ‰€æå‡º NYUv2 datasetï¼Œå¸¶ä¾† äº† RGB-D semantic segmentation çš„é¢¨æ½®ã€‚\nRGB-D åœ–ç‰‡å…¶å¯¦æ˜¯å…©å¼µåœ–ç‰‡ï¼š\næ™®é€šçš„ RGB 3 ç¶­åœ–ç‰‡ Depth åœ–ç‰‡ï¼ˆé¡ä¼¼ç°éšåœ–ç‰‡ï¼Œåªæ˜¯æ¯å€‹åƒç´ å€¼æ˜¯è·é›¢ç‰©é«”çš„å¯¦éš›è·é›¢ï¼‰ SegNet å°±åœ¨æ­¤ dataset å¾—åˆ°ä¸éŒ¯çš„æ•ˆæœï¼Œä»–ä½¿ç”¨ çš„æ–¹æ³•ç‚ºï¼š\nencoder-decoder dilation filter McCormac å‰‡èƒ½é€é 2D é æ¸¬ 3D domainï¼Œä½†é€™äº› é æ¸¬ä¸¦ç„¡æ³•è¢«ç›´æ¥æ‡‰ç”¨åœ¨ 3D domainã€‚\nSSCNet æ‡‰ç”¨ CNN åœ¨ 3D volume representation å»åˆ†é¡æ¯å€‹åƒç´ ã€‚\n3. Pointwise Convolution # å…ˆä¾†è«‡è«‡è¦éº¼æè¿°ä¸€å€‹ 3D ç‰©ä»¶ï¼ŒVoxNet ä½¿ç”¨äº† \\(64 \\times 64 \\times 64\\) çš„è§£æåº¦å»æè¿°ä¸€å€‹ç‰©ä»¶ï¼Œä½†é€™æœ‰ä¸€å€‹å¾ˆå¤§çš„ç¼ºé»ï¼Œå¾ˆè€—è²»è¨˜æ†¶é«”ï¼Œå› ç‚ºå…¶å¯¦å¤§éƒ¨åˆ†çš„åƒç´  ï¼ˆç«‹é«”ä¸‰ç¶­ç©ºé–“ä¸­çš„ï¼‰çš†æ˜¯ \\(0\\)ï¼Œä½†é€™å¯ä»¥è¢« sparse representation è§£æ±ºã€‚\nPoint clouds èƒ½å¤ è¢« RGB-D reconstruction å’Œ CAD modeling çš„ç‰¹æ€§ï¼Œå› æ­¤ä¹Ÿæ˜¯ä¸€å€‹ä¸ éŒ¯çš„è¡¨ç¤ºæ³•ï¼ŒPointNet å°±æ˜¯åŸºæ–¼æ­¤ç”¢ç”Ÿçš„ï¼Œä½†å°‡ point cloud é¤µçµ¦ç¥ç¶“ç¶²è·¯æ˜¯ä¸è‡ªç„¶çš„ï¼Œ å› ç‚ºå‚³çµ±çš„ convolution operators åªè¨­è¨ˆçµ¦ grid å’Œ volumesã€‚\nConvolution # æ¯ä¸€å€‹ kernel\nä»¥ point cloud ä¸­æ¯ä¸€å€‹é»ç‚ºä¸­å¿ƒ æœ‰ä¸€å€‹ size æˆ– radius valueï¼ˆå¯è¢«èª¿æ•´ï¼‰ æ•¸å­¸ç¤ºå¯è¡¨ç¤ºæˆï¼š\n$$ x_i^\\ell = \\sum_k w_k \\frac{1}{|\\Omega_i(k)|} \\sum_{p_j \\in \\Omega_i(k)} x_j^{\\ell - 1}, \\tag{1} $$\nå…¶ä¸­ï¼Œ\n\\(k\\)ï¼šæ‰€æœ‰ sub-domains \\(\\Omega_i(k)\\)ï¼šç•¶ kernel ä»¥ point \\(i\\) ç‚ºä¸­å¿ƒæ™‚ï¼Œç¬¬ \\(k\\)-th sub-domain \\(p_i\\)ï¼špoint \\(i\\) çš„åº§æ¨™ \\(|\\cdot|\\)ï¼šè¨ˆç®—æ‰€æœ‰ sub-domain è£¡çš„ points æ•¸é‡ \\(w_k\\)ï¼š\\(k\\)-th sub-domain çš„ kernel weight \\(x_i\\) å’Œ \\(x_j\\)ï¼špoint \\(i\\) å’Œ \\(j\\) çš„å€¼ \\(\\ell - 1\\) å’Œ \\(\\ell\\)ï¼šinput å’Œ output index Gradient backpropagation # ä»¤ \\(L\\) ç‚º loss functionï¼Œgradient å¯è¢«è¡¨ç¤ºæˆï¼š\n$$ \\frac{\\partial L}{\\partial x_j^{\\ell - 1}} = \\sum_{i \\in \\Omega_j} \\frac{\\partial L}{\\partial x_i^\\ell} \\frac{\\partial x_i^\\ell}{\\partial x_j^{\\ell - 1}}, \\tag{2} $$\næˆ‘å€‘éæ­·æ‰€æœ‰é» \\(j\\) çš„ é„°å±…é» \\(i\\)ï¼ŒåŒæ™‚ \\(\\partial x_i^\\ell / \\partial x_j^{\\ell - 1}\\) å¯è¢«å¯«æˆï¼š\n$$ \\frac{\\partial x_i^\\ell}{\\partial x_j^{\\ell - 1}} = \\sum_k w_k \\frac{1}{|\\Omega_i(k)|} \\sum_{p_j \\in \\Omega_i(k)} 1 \\tag{3} $$\n$$ \\frac{\\partial L}{\\partial w_k} = \\sum_i \\frac{\\partial L}{\\partial x_i^\\ell} \\frac{\\partial x_i^\\ell}{\\partial w_k} \\tag{4} $$\nå…¶ä¸­ï¼Œ\n$$ \\frac{\\partial x_i^\\ell}{\\partial x_k} = \\frac{1}{|\\Omega_i(k)|} \\sum_{p_j \\in \\Omega_i(k)} x_j^{\\ell - 1} \\tag{5} $$\nä¸Šæ–¹çš„å…¬å¼ä¸¦æ²’æœ‰å‡å®š convolution kernel æœ‰å›ºå®šçš„å½¢ç‹€ï¼Œåœ¨æ­¤ç¯‡ paper ä¸­ï¼Œæ‰€æœ‰çš„ convolution kernels å¤§å°çš†ç‚º \\(3 \\times 3 \\times 3\\)ï¼Œè€Œæ‰€æœ‰é»çš„ weights çš†ä¸€ æ¨£å¤§ã€‚\nå’Œå‚³çµ±ç«‹é«” convolution ä¸åŒçš„æ˜¯ï¼Œä»–ä¸ä½¿ç”¨ poolingã€‚paper æå‡ºä»¥ä¸‹çš„å„ªé»ï¼š\nä¸å†éœ€è¦è™•ç† downsampling å’Œ upsampling é„°å±… query çš„åŠ é€Ÿçµæ§‹åªéœ€è¦å»ºæ§‹ä¸€æ¬¡ Point order # å’Œ PointNet é¡¯è‘—ä¸åŒçš„æ˜¯ï¼Œå¦‚ä½•å°‡é»é¤µé€²ç¶²è·¯ä¸­ï¼Ÿ\nåœ¨ PointNet ä¸­ï¼Œpoint cloud æ˜¯æ²’æœ‰é †åºæ€§çš„ï¼Œä½†åœ¨æ­¤ç¯‡ paper ä¸­ï¼Œä»–èªç‚ºé †åºæ˜¯æœ‰å¿… è¦çš„ã€‚ä»–å°‡ input points æ ¹æ“šç‰¹å®šçš„ order åšæ’åºï¼Œä¾‹å¦‚ï¼šXYZ æˆ– Morton curveã€‚\nåœ¨ object recognition ä¸­ï¼Œé †åºæ€§æ˜¯å¿…è¦çš„ï¼Œä½†åœ¨ semantic segmentation ä¸­ï¼Œåˆ©ç”¨æ¯ å€‹é»çš„å±€éƒ¨ç‰¹å¾µï¼Œå› æ­¤ä¸éœ€è¦é»é †åºã€‚\nÃ€-trous convolution # é€éæ–°å¢ä¸€é … stride åƒæ•¸ï¼Œå¯ä»¥å°‡åŸå§‹é€é»å·ç©æ“´å±•åˆ° Ã -trous (dilated) å·ç©ã€‚é€é å¢å¤§ kernel sizeï¼Œæ„ŸçŸ¥ç¯„åœäº†ï¼Œé€™æœ‰åŠ©æ–¼åŠ åº¦è¨“ç·´å»ä¸å¤±ç²¾åº¦ã€‚\nGIF ä¾†æº\nPadding, strides No padding, no stride, dilation Point attributes # ç‚ºäº†æ–¹ä¾¿å¯¦ç¾å·ç©ï¼Œæˆ‘å€‘åˆ†åˆ¥å„²å­˜é»åæ¨™å’Œå…¶ä»–é»å±¬æ€§ï¼Œä¾‹å¦‚é¡è‰²ã€æ³•ç·šæˆ–å¾å…ˆå‰å·ç©å±¤è¼¸ å‡ºçš„å…¶ä»–é«˜ç¶­ç‰¹å¾µã€‚\n4. Evaluations # Semantic segmantation # Table 1: Comparison of scene segmentation on S3DIS dataset Table 2: Per-class accuracy of semantic segmentation on S3DIS dataset Table 3: Per-class accuracy of semantic segmentation on SceneNN dataset Semantic segmentation on the S3DIS dataset Semantic segmentation on SceneNN dataset Object recognition # Table 4: Comparison of performance of network architectures using 3D object representations on the ModelNet40 dataset Table 5: Comparison of object recognition accuracy on the ObjectNN dataset ","date":"27 September 2018","externalUrl":null,"permalink":"/posts/paper/paper-pointwise-cnn/","section":"Posts","summary":"","title":"è«–æ–‡ç­†è¨˜ Pointwise Convolutional Neural Networks","type":"posts"},{"content":"","date":"19 September 2018","externalUrl":null,"permalink":"/tags/eccv/","section":"Tags","summary":"","title":"ECCV","type":"tags"},{"content":" Paper Link\nè¬›åˆ° image clusteringï¼Œå°±å¿…éœ€å…ˆä¾†è«‡è«‡ä»€éº¼æ˜¯ cluster analysisï¼ˆèšé¡åˆ†æï¼‰ï¼Œåœ¨ç¶­åŸº ç™¾ç§‘ä¸Šçµ¦å‡ºäº†ä¸‹åˆ—ä¸€æ®µçš„å®šç¾©ï¼š\nèšé¡åˆ†æï¼ˆè‹±èªï¼šCluster analysisï¼Œäº¦ç¨±ç‚ºç¾¤é›†åˆ†æï¼‰æ˜¯å°æ–¼çµ±è¨ˆæ•¸æ“šåˆ†æçš„ä¸€é–€æŠ€è¡“ ï¼Œåœ¨è¨±å¤šé ˜åŸŸå—åˆ°å»£æ³›æ‡‰ç”¨ï¼ŒåŒ…æ‹¬æ©Ÿå™¨å­¸ç¿’ï¼Œæ•¸æ“šæŒ–æ˜ï¼Œæ¨¡å¼è­˜åˆ¥ï¼Œåœ–åƒåˆ†æä»¥åŠç”Ÿç‰©ä¿¡ æ¯ã€‚èšé¡æ˜¯æŠŠç›¸ä¼¼çš„å°è±¡é€šééœæ…‹åˆ†é¡çš„æ–¹æ³•åˆ†æˆä¸åŒçš„çµ„åˆ¥æˆ–è€…æ›´å¤šçš„å­é›†ï¼ˆsubsetï¼‰ ï¼Œé€™æ¨£è®“åœ¨åŒä¸€å€‹å­é›†ä¸­çš„æˆå“¡å°è±¡éƒ½æœ‰ç›¸ä¼¼çš„ä¸€äº›å±¬æ€§ï¼Œå¸¸è¦‹çš„åŒ…æ‹¬åœ¨åæ¨™ç³»ä¸­æ›´åŠ çŸ­ çš„ç©ºé–“è·é›¢ç­‰ã€‚\nä¸€èˆ¬æŠŠæ•¸æ“šèšé¡æ­¸ç´ç‚ºä¸€ç¨®éç›£ç£å¼å­¸ç¿’ã€‚\nç‚ºé¿å…æ··æ·†ï¼Œæ­¤ç¯‡æ–‡ç« ä¸€å¾‹ä½¿ç”¨åŸæ–‡ image clusteringï¼Œè€Œä¸å¤šåšç„¡è¬‚çš„ç¿»è­¯ã€‚\n1 Introduction # Image clustering çš„ä¸»è¦ç›®çš„ç‚ºï¼š\nç™¼ç¾åœ–ç‰‡è¡¨ç¤ºçš„è‡ªç„¶å’Œå¯è§£é‡‹çµæ§‹ å°‡å½¼æ­¤ç›¸ä¼¼çš„åœ–ç‰‡åˆ†çµ„åˆ°åŒä¸€å€‹ç¾¤é›†ä¸­ ç¾æœ‰çš„ clustering methods ä¸»è¦æœ‰ä»¥ä¸‹å…©ç¨®ï¼š\nsingle-view image clustering (SVIC) multi-view image clustering (MVIC) è€Œç¾åœ¨ MVIC è¼ƒå»£æ³›çš„è¢«ä½¿ç”¨ï¼Œå› ç‚ºä»–æœ‰ã€Œå¾å–®å¼µåœ–ç‰‡ä¸­æå–å¤šå€‹ä¸åŒç‰¹å¾µçš„éˆæ´»æ€§ã€ã€‚\nå†æ›´ç´°åˆ†ä¸‹å»ï¼Œç¾æœ‰çš„ MVIC å¯å†è¢«åˆ†æˆä¸‰é¡ï¼š\nmulti-view spectral clusting multi-view subspace clustering multi-view matrix factorization é€™æ˜¯æ•´å€‹ paper æ‰€æåˆ°çš„æµç¨‹ï¼š\né€é paper ä¸­çš„æ–¹æ³•ï¼Œèƒ½å¤ å°‡æœ¬ä¾†çš„è³‡æ–™å¾ã€Œæ­åŸºé‡Œå¾·è·é›¢æ™‚é–“è¤‡é›œåº¦ \\(O(Nd)\\)ã€é™ åˆ°ã€Œ\\(O(1)\\)ã€ï¼ˆå› ç‚ºç·¨ç¢¼æˆ Binary Codes å¾Œåªéœ€åš XOR operationsï¼‰ï¼\nå…¶ä¸­ï¼Œ\n\\(N\\): data sizeï¼ˆä¾‹å¦‚ä¸€å¼µåœ–æœ‰å¹¾å€‹ pixelsï¼‰ \\(d\\): dimensionï¼ˆä¾‹å¦‚ä½¿ç”¨ Rã€Gã€B ä¸‰å€‹ç¶­åº¦ä¾†æè¿°ä¸€å€‹ pixelï¼‰ å¦å¤–è£œå……ä¸€ä¸‹ LBP å’Œ HOG çš„ç”¨é€”ï¼š\nLBP (Local Binary Pattern) HOG (Histogram of Oriented Gradient) å„ªé» 1. å°å…‰ä¸æ•æ„Ÿ 2. é‹ç®—é€Ÿåº¦å¿« å¿½ç•¥äº†å…‰ç…§é¡è‰²å°åœ–ç‰‡é€ æˆçš„å½±éŸ¿ï¼Œä½¿å¾—åœ–ç‰‡æ‰€éœ€è¦çš„ features ç¶­åº¦è¼ƒä½ ç¼ºé» å°æ–¹å‘è³‡è¨Šè¼ƒæ•æ„Ÿ 1. æè¿°å­ç”Ÿæˆéç¨‹å†—é•·ï¼Œå°è‡´é€Ÿåº¦æ…¢ï¼Œé›£ä»¥ realtime 2. é›£è™•ç†é®æ“‹å•é¡Œ 3. ç”±æ–¼æ¢¯åº¦çš„æ€§è³ªï¼Œå°å™ªéŸ³å¾ˆæ•æ„Ÿ ç”¨é€” äººè‡‰è­˜åˆ¥ã€ç…§ç‰‡åˆ†é¡ è¡Œäººæª¢æ¸¬ 2 Highly-economized Scalable Image Clustering (HSIC) # çµ¦å®šä¸€å€‹ multi-view image features çš„é›†åˆï¼š\n$$\\mathcal X = \\{\\boldsymbol X^1, \\dots, \\boldsymbol X^m\\},$$\nå…¶ä¸­ \\(m\\) ä»£è¡¨æœ‰ \\(m\\) å€‹ viewsï¼Œè€Œæ¯ä¸€å€‹ \\(\\boldsymbol X^v\\)ï¼ˆ\\(m\\) å€‹ views ä¸­çš„ç¬¬ \\(v\\) å€‹ viewï¼‰ï¼Œ\\(1 \\le v \\le m\\) åˆå¯ä»¥è¡¨ç¤ºæˆï¼š\n$$\\boldsymbol X^v = [\\boldsymbol x_1^v, \\dots, \\boldsymbol x_N^v] \\in \\mathbb R^{d_v \\times N},$$\nå…¶ä¸­ï¼Œ\n\\(d_v\\)ï¼šdimensionality \\(N\\): \\(\\boldsymbol X^v\\) ä¸­çš„ data points æ•´ç¯‡è«–æ–‡çš„ä¸»è¦ç›®æ¨™æ˜¯ï¼šã€Œå°‡ \\(\\mathcal X\\) åˆ†æˆ \\(c\\) å€‹ç¾¤é›†ï¼ˆclustersï¼‰ã€‚ ã€\nè€Œ HSIC çš„æ–¹æ³•æ˜¯ï¼šé€éæ›´ä½ç¶­åº¦ çš„æ¼¢æ˜è·é›¢ï¼ˆHamming spaceï¼‰é€²è¡Œ binary clusteringã€‚\næ›´ç²¾ç¢ºä¾†èªªï¼Œé€éå°‡ multi-view features æŠ•å½±åˆ° Hamming space ä¸­å»å­¸ç¿’ä»¥ä¸‹å…©é»ï¼š\ncommon binary representation robust binary cluster structures åœ¨è³‡æ–™é è™•ç†çš„æ­¥é©Ÿå¦‚ä¸‹ï¼š\nå°‡æ¯å€‹ view ä¸­çš„ç‰¹å¾µï¼Œæ¨™æº–åŒ–ç‚ºé›¶ä¸­å¿ƒå‘é‡ï¼ˆzero-centered vectorsï¼‰\næ¯ä¸€å€‹ feature vector éƒ½æœƒç”± nonlinear RBF (Radial Basis Function) kernel mapping ç·¨ç¢¼ï¼Œå³ï¼š\nï¼ˆé€™è£¡è£œå……èªªæ˜ä¸€ä¸‹ä»€éº¼æ˜¯ nonlinear kernel mappingï¼Œä¸»è¦ç”¨é€”ç‚ºï¼šmapping data åˆ° higher dimensionsï¼Œé€™æ¨£ä¸€ä¾†ä»–å°±æœ‰äº†ç·šæ€§çš„æ€§è³ªï¼Œè®“åœ¨ä½ç¶­åº¦ç„¡æ³•ç·šæ€§åˆ†å‰²çš„ dataï¼Œåœ¨é«˜ç¶­åº¦æ™‚å°±èƒ½ç·šæ€§åˆ†å‰²ã€‚ï¼‰\n$$\\psi(\\boldsymbol x_i^v) = \\Bigg [e^{\\frac{-||\\boldsymbol x_i^v - \\boldsymbol a_1^v||^2}{\\gamma}}, \\dots, e^{\\frac{-||\\boldsymbol x_i^v - \\boldsymbol a_l ^v||^2}{\\gamma}} \\Bigg]^\\top \\in \\mathbb R^{l \\times 1},$$\nå…¶ä¸­ï¼Œ\n\\(\\gamma\\): äº‹å…ˆå®šç¾©å¥½çš„ kernel width \\(\\psi(\\boldsymbol x_i^v) \\in \\mathbb R^{l \\times 1}\\)ï¼ˆæˆ‘å€‘å¯ä»¥å°‡ \\(\\psi\\) å‡½æ•¸ç†è§£æˆä¸€å€‹å°‡ \\(\\boldsymbol x_i^v\\) ç”± \\(\\mathbb R^{d_v \\times 1}\\) mapping åˆ° \\(\\psi(\\boldsymbol x_i^v) \\in \\mathbb R^{l \\times 1}\\) çš„ç·šæ€§è½‰æ›ï¼Œå…¶ç›®çš„æ˜¯å› ç‚ºæ¯ä¸€å€‹ \\(\\boldsymbol x_i^v\\) çš„ç¶­åº¦ ï¼ˆ\\(d^v\\)ï¼‰ä¸åŒï¼Œä¸€åŒ mapping è‡³ \\(\\mathbb R^{l \\times 1}\\) è¼ƒæœ‰åˆ©æ–¼é‹ ç®—ã€‚ï¼‰ \\(\\{a_i^v\\}_{i = 1}^l\\): ç”± \\(\\boldsymbol X^v\\) ä¸­éš¨æ©Ÿé¸å– \\(l\\) å€‹ anchor pointsï¼ˆæ­¤ç¯‡ paper å– \\(l = 1000\\)ï¼‰ æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘æ›´é€²ä¸€æ­¥çš„æ•˜è¿°è©³ç´°çš„æ–¹æ³•ï¼š\n2.1 Common Binary Representation Learning # åœ¨ HSIC ä¸­è¦å­¸ç¿’çš„ hashing functions å…±æœ‰ $K$ å€‹ã€‚\nï¼ˆè£œå……ä¸€ä¸‹ï¼šhashing functions åœ¨ paper ä¸­ä¸¦æ²’æœ‰æ˜ç¢ºæŒ‡å‡ºæ˜¯ä»€éº¼ï¼Œè€Œæˆ‘å€‹äººç†è§£ ç‚ºæŠ•å½±çŸ©é™£ \\(\\boldsymbol (P^v)^\\top = [\\boldsymbol p_1^v, \\dots, \\boldsymbol p_K^v]^\\top \\in \\mathbb R^{K \\times l}\\)ï¼ŒæŒ‡çš„æ˜¯æ‰¾åˆ°é‚£ \\(K\\) å€‹ ç¶­åº¦ç‚º \\(\\mathbb R^{1 \\times l}\\) çš„ hashing functions \\(p_k^v\\), \\(1 \\le k \\le K\\)ï¼Œèƒ½å¤ å°‡ \\(\\psi(\\boldsymbol x_i^v) \\in \\mathbb R^{l \\times 1}\\) è½‰æ›æˆä¸€å€‹å–®ä¸€çš„ Binary Codeï¼Œä½†å…±è¦åš \\(K\\) æ¬¡ï¼Œå¾—åˆ°ä¸€å€‹ \\(\\boldsymbol b_i \\in \\mathbb R^{K \\times 1}\\) çš„å‚ç›´å‘é‡ï¼‰\nHSIC åŒæ™‚ä¹Ÿæœƒå°‡å¤šå€‹ views çš„ features æŠ•å°„åˆ°å…±åŒçš„ Hamming spaceï¼Œæ‰€ä»¥æˆ‘å€‘å¯å¾—åˆ° \\(\\boldsymbol b_i\\)ï¼ˆBinary Codesï¼‰çš„ç®—æ³•å¦‚ä¸‹ï¼š\n$$\\boldsymbol b_i = sgn((\\boldsymbol P^v)^\\top \\psi(\\boldsymbol x_i^v)) \\in \\mathbb R^{K \\times 1},$$\nå…¶ä¸­ï¼Œ\n\\(\\boldsymbol b_i\\): ä¸åŒ views ä¸­ï¼Œç¬¬ \\(i\\)-th ç‰¹å¾µçš„å…±åŒ Binary Codeï¼ˆå³ ï¼š\\(\\boldsymbol x_i^v, \\forall v = 1, \\dots, m\\)ï¼‰\nï¼ˆæˆ‘çš„ç†è§£æ˜¯ï¼š\\(\\forall\\) views ä¸­ï¼ˆ\\(1, \\dots, m\\)ï¼‰ï¼Œç¬¬ \\(i\\)-th column çš„ \\(d^v \\times 1\\) å€‹å‘é‡ï¼Œå…±åŒä»£è¡¨ä»–å€‘çš„ \\(\\mathbb b_i \\in \\mathbb R^{K \\times 1}\\) Binary Codesï¼‰\n\\(sgn(\\cdot)\\): element-wise sign function\n\u0026lt; 0 å– -1 \u0026gt; 0 å– 1 \\((\\boldsymbol P^v)^\\top = ([\\boldsymbol p_1^v, \\dots, \\boldsymbol p_K^v])^\\top \\in \\mathbb R^{K \\times l}\\): ç¬¬ \\(v\\)-th view çš„æ˜ å°„çŸ©é™£ ï¼ˆmapping matrixï¼‰ï¼Œå¯æƒ³åƒæˆä¸€å€‹å°‡ç¶­åº¦ç‚º \\(\\mathbb R^{l \\times 1}\\) çš„ \\(\\psi(\\boldsymbol x_i^v)\\) mapping åˆ°ç¶­åº¦ç‚º \\(K\\) çš„å‘é‡ç©ºé–“ï¼ˆdim(hashing functions) = \\(K\\)ï¼‰\nç”±ä¸Šï¼Œæˆ‘å€‘èƒ½é€éæœ€å°åŒ–ä»¥ä¸‹çš„ quantization loss ä¾†å»ºç«‹å­¸ç¿’å‡½æ•¸ï¼š\n$$ \\min_{\\boldsymbol P^v, \\boldsymbol b_i} \\sum_{v = 1}^m \\sum_{i = 1}^N ||\\boldsymbol b_i - (\\boldsymbol P^v)^\\top \\psi(\\boldsymbol x_i^v)||_F^2. $$\n\\(\\sum_{i = 1}^N\\) ä»£è¡¨å…±æœ‰ \\(N\\) å€‹ \\(b_i\\) è¦è¢«å­¸ç¿’ï¼Œå…¶ä¸­é€™äº› \\(b_i\\) ä¾†è‡ª \\(\\sum_{v = 1}^m\\)ã€‚\næŠ•å½± \\(\\{\\boldsymbol P^v\\}_{v = 1}^m\\) å¯ä»¥è£œæ‰åˆ°èƒ½å¤ ä½¿ç›¸ä¼¼åº¦æœ€å¤§åŒ–çš„å…±äº«è³‡ è¨Šï¼Œæ‰€ä»¥æˆ‘å€‘åˆå¯ä»¥å¾—åˆ°\n$$\\boldsymbol P^v = [\\boldsymbol P_S, \\boldsymbol P_I^v],$$\nå…¶ä¸­ï¼Œ\n\\(\\boldsymbol P_S \\in \\mathbb R^{l \\times K_S}\\): the shared projection across multiple views\n\\(\\boldsymbol P_I^v \\in \\mathbb R^{l \\times K_I}\\): the individual projection for the \\(v\\)-th view\n\\(K = K_S + K_I\\)\n\\(\\boldsymbol P_I^v \\in \\mathbb R^{l \\times K_I}\\): the individual projection for the \\(v\\)-th view\n\\(K = K_S + K_I\\)\nå› æ­¤ï¼ŒHSIC å¯ä»¥è—‰ç”± multiple views å­¸åˆ° common binary representationï¼š\n$$ \\min_{\\boldsymbol P^v, \\boldsymbol B, \\alpha^v} \\sum_{v = 1}^m (\\alpha^v)^r (||\\boldsymbol B - (\\boldsymbol P^v)^\\top \\psi(\\boldsymbol X^v)||_F^2 + \\lambda_1||\\boldsymbol P^v||_F^2), $$\n$$ s.t. \\sum_v \\boldsymbol \\alpha^v = 1, \\boldsymbol \\alpha^v \u0026gt; 0, \\boldsymbol B = [\\boldsymbol B_s; \\boldsymbol B_I] \\in \\{-1, 1\\}^{K \\times N}, \\boldsymbol P^v = [\\boldsymbol P_s, \\boldsymbol P_I^v], $$\nå…¶ä¸­ï¼Œ\n\\(\\boldsymbol B = [\\boldsymbol b_1, \\dots, \\boldsymbol b_N]\\) å’Œ \\(\\boldsymbol \\alpha = [\\alpha^1, \\dots, \\alpha^m] \\in \\mathbb R^m\\) èƒ½å¤ æ±º å®šæ¯ä¸€å€‹ä¸åŒçš„ viewsï¼ˆ\\(m\\) viewsï¼‰çš„æ¬Šé‡ \\(r \u0026gt; 1\\): æ§åˆ¶æ¬Šé‡çš„åˆ†å¸ƒ \\(\\lambda_1\\): regularization parameter åˆé€é maximum entropy principleï¼Œå³ï¼š\n$$ \\max \\sum_k \\mathbb E[||(\\boldsymbol p_i^v)^\\top \\psi(\\boldsymbol x_i^v)||^2] = \\frac 1 N tr((\\boldsymbol P^v)^\\top \\psi(\\boldsymbol X^v) \\psi(\\boldsymbol X^v)^\\top \\boldsymbol P^v) = g(\\boldsymbol P^v). $$\nå°‡ (2)ã€(3) å¼åˆä½µèƒ½å¾—åˆ°ï¼š\n$$ \\min_{\\boldsymbol P^v, \\boldsymbol B} \\sum_{v = 1}^m (\\alpha^v)^r (||\\boldsymbol B - (\\boldsymbol P^v)^\\top \\psi(\\boldsymbol X^v)||_F^2 + \\lambda_1||\\boldsymbol P^v||_F^2 - \\lambda_2 g(\\boldsymbol P^v)), $$\n$$ s.t. \\sum_v \\alpha^v = 1, \\alpha^v \u0026gt; 0, \\boldsymbol B = [\\boldsymbol B_s; \\boldsymbol B_I] \\in \\{-1, 1\\}^{K \\times N}, \\boldsymbol P^v = [\\boldsymbol P_s, \\boldsymbol P_I^v], $$\nå…¶ä¸­ï¼Œ\n\\(\\lambda_2\\): weighting parameter 2.2 Robust Binary Clust Structure Learning # ï¼ˆæš«æ™‚ç•¥éï¼‰\n","date":"19 September 2018","externalUrl":null,"permalink":"/posts/paper/paper-hsic/","section":"Posts","summary":"","title":"è«–æ–‡ç­†è¨˜ Highly-Economized Multi-View Binary Compression for Scalable Image Clustering","type":"posts"},{"content":" Paper Link\n1. Introduction # é€™ç¯‡ paper æ˜¯å¡å…§åŸºç¾éš†å¤§å­¸ï¼ˆCarnegie Mellon Universityï¼‰åœ¨ CVPR 2017 æ‰€ç™¼è¡¨çš„ï¼Œè«–æ–‡ä¸­é¦–å…ˆæŒ‡å‡ºäº† Pose Estimation ä¸­ä¸‰å€‹å…·æŒ‘æˆ°æ€§çš„é—œéµï¼š\nä¸€å¼µåœ–ç‰‡è£¡æœ‰å¤šå°‘äººï¼Œè€Œé€™äº›äººæ“ºä»€éº¼å§¿å‹¢å’Œäººçš„å¤§å°ï¼Ÿ æœ‰å¹¾å€‹äººæ˜¯ç›¸äº’ç–Šåœ¨ä¸€èµ·ï¼ˆoverlapï¼‰çš„ï¼Œä»–å€‘å½¼æ­¤æ‘­è“‹é¢ç©ï¼Ÿ ç„¡æ³•å³æ™‚ï¼ˆrealtimeï¼‰ å¦å¤–è«–æ–‡ä¸­ä¹Ÿæåˆ°äº†ä¸€äº›ç¾æœ‰æ–¹æ³•å­˜åœ¨çš„ç“¶é ¸ï¼Œç¾æœ‰æ–¹æ³•ä¸»è¦æ˜¯é€é top-down çš„æ–¹å¼ï¼š\nperson detector single-person pose estimation ä¾†è§£æ±ºæ­¤é¡å•é¡Œï¼Œè€Œé€™å¾ˆä¾è³´æ•ˆèƒ½ï¼Œå¦‚æœ person detector å¤±æ•—äº†ï¼Œé‚£æ–¹æ³•å°±æ²’ç”¨äº†ï¼Œå¦ å¤–æ™‚é–“ä¹Ÿæ˜¯ä¸€é …è€ƒé©—ã€‚\n2. Method # Figure 2:\nFig. 2 çµ¦å‡ºäº†æ¨¡å‹çš„æ•´å€‹è™•ç†éç¨‹ï¼š\nè®€é€²ä¸€å¼µåœ–ç‰‡å¤§å°ç‚º \\(w \\times h\\) çš„åœ–ç‰‡ \\(\\textbf I\\)ã€‚ é€é€² model VGG-19 çš„å‰ 10 å±¤ layer train å‡ºå¤§å°ä¸€æ¨£ç‚º \\(w \\times h\\) çš„ features \\(\\textbf F\\)ã€‚ \\(\\textbf S = (\\textbf S_1, \\textbf S_2, \\dots, \\textbf S_J)\\)ï¼Œå…¶ä¸­ \\(J\\) ä»£è¡¨äººé«”å…±æœ‰ \\(J\\) å€‹éƒ¨ä½ï¼ˆpartï¼‰ã€‚\n$$\\textbf S_j \\in \\mathbb R^{w \\times h}, j \\in \\{1 \\dots J\\}.$$\n\\(\\textbf L = (\\textbf L_1, \\textbf L_2, \\dots, \\textbf L_C)\\) ï¼Œå…¶ä¸­ \\(C\\) ä»£\n$$\\textbf L_c \\in \\mathbb R^{w \\times h \\times 2}, c \\in \\{1, \\dots, C\\}.$$\nå†å°‡ confidence maps \\(\\textbf S\\) å’Œ affinity fields \\(\\textbf L\\) é€ åˆ° greedy \\(\\textbf S\\) å’Œ affinity fields \\(\\textbf L\\)ã€‚\næ¯å€‹åˆ†æ”¯éƒ½æ˜¯ä¸€å€‹éè¿´çš„é æ¸¬çµæ§‹ï¼Œæ•´å€‹ model åŒ…å«äº† \\(T\\) å€‹ stageï¼Œæ¯å€‹ stage ä¸­éƒ½\nåœ–ç‰‡é¦–å…ˆç¶“ç”±å¾®èª¿éçš„ VGG19 å‰åå±¤å¾—åˆ°ä¸€çµ„å¤§å°ç‚º \\(w \\times h\\) çš„ feature maps \\(\\textbf F\\)ï¼Œå°‡å…¶åšç‚º input è¼¸å…¥åˆ°å…©å€‹åˆ†æ”¯è£¡ç¬¬ä¸€å€‹ stageã€‚ detection confidence maps \\(\\textbf S^1 = \\rho^1(\\textbf F)\\) part affinity fields \\(\\textbf L^1 = \\phi^1(\\textbf F)\\) å…¶ä¸­ \\(\\rho^1\\) å’Œ \\(\\phi^1\\) è¡¨ç¤ºç¬¬ä¸€å€‹ stage çš„ CNN æ¶æ§‹ã€‚ åœ¨å¾€å¾Œæ¯å€‹ stage ä¸­ï¼Œæ¨¡å‹æœƒå°‡æ¯å‰å€‹éšæ®µçš„è¼¸å‡ºå’Œ \\(\\textbf F\\)ï¼ˆåŸæœ¬çš„ feature $$\\textbf S^t = \\rho^t(\\textbf F, \\textbf S^{t - 1}, \\textbf L^{t - 1}), \\forall t \\ge 2,$$\n$$\\textbf L^t = \\phi^t(\\textbf F, \\textbf S^{t - 1}, \\textbf L^{t - 1}), \\forall t \\ge 2,$$\nå…¶ä¸­ \\(\\rho^t\\) å’Œ \\(\\phi^t\\) ç‚ºç¬¬ \\(t\\) éšæ®µçš„ CNNã€‚\nFigure 4:\nFig. 4 ç§€å‡ºäº†æ¯ä¸€ å€‹éšæ®µ confidence maps å’Œ affinity fields æ”¹å–„çš„æƒ…æ³ã€‚\nåœ¨é æ¸¬çš„ predictions å’Œ groundtruth maps and fileds ä½¿ç”¨äº† loss function \\(L_2\\)ï¼Œè«–æ–‡ä¸­ç‰¹åˆ¥æåˆ° loss functions æ˜¯éš¨è‘—ç©ºé–“è€Œè®Šçš„ï¼ˆspatiallyï¼‰ï¼Œå› ç‚ºæœ‰äº› datasets ä¸è¦‹å¾—æœƒå®Œæ•´åœ°æ¨™ç¤ºæ‰€æœ‰äººã€‚\nåœ¨ \\(t\\) éšæ®µä¸­çš„ loss functions å¦‚ä¸‹ï¼š\n$$f_{\\textbf S}^t = \\sum_{j = 1}^J \\sum_{\\textbf p} \\textbf W(\\textbf p) \\cdot || \\textbf S_j^t(\\textbf p) - \\textbf S_j^*(\\textbf p)||_2^2,$$ $$f_{\\textbf L}^t = \\sum_{c = 1}^C \\sum_{\\textbf p} \\textbf W(\\textbf p) \\cdot || \\textbf L_c^t(\\textbf p) - \\textbf L_c^*(\\textbf p)||_2^2,$$ $$f = \\sum_{t = 1}^T (f_\\textbf S^t + f_\\textbf L^t).$$\n\\(\\textbf S_j^*\\): groundtruth part confidence map \\(\\textbf L_c^*\\): groundtruth part affinity vector field \\(\\textbf W\\): binary mask ä¸” \\(\\textbf W(\\textbf p) = 0\\) ç•¶ annotation åœ¨ä½ç½® \\(\\textbf p\\) ä¸å­˜åœ¨ï¼Œé€™æ˜¯ç”¨ä¾†é¿å…åœ¨ training çš„éç¨‹ä¸­ï¼Œ å³ä½¿æ­£ç¢ºé æ¸¬äº†ï¼Œä»æœ‰ 2.2 Confidence Maps for Part Detection # ä¸‹é‚Šçµ¦å‡ºæ ¹æ“š annotation è¨ˆç®— groundtruth confidence maps \\(\\textbf S^*\\) çš„ æ–¹æ³•ï¼Œæ¯å€‹ confidence map éƒ½æ˜¯ä¸€å€‹ 2D çš„è¡¨ç¤ºã€‚ç†æƒ³æƒ…æ³ä¸‹ï¼Œ\nç•¶åœ–ç‰‡ä¸­åªåŒ…å«ä¸€å€‹äººæ™‚ï¼šå¦‚æœä¸€å€‹ keypoint æ˜¯å¯è¦‹çš„è©±ï¼Œå°æ‡‰çš„ confidence map ä¸­ åªæœ‰ä¸€å€‹å³°å€¼ã€‚ ç•¶åœ–ç‰‡ä¸­æœ‰å¤šå€‹äººæ™‚ï¼šå°æ–¼æ¯ä¸€å€‹äºº \\(k\\) çš„æ¯ä¸€å€‹å¯è¦‹ keypoint \\(j\\)ï¼Œåœ¨å°æ‡‰ çš„ confidence map ä¸­éƒ½æœƒæœ‰ä¸€å€‹å³°å€¼ã€‚ è©³ç´°æ–¹æ³•å¦‚ä¸‹ï¼š\nå…ˆæ‰¾å‡ºæ¯å€‹äºº \\(k\\) çš„æŸä¸€éƒ¨ä½ \\(j\\)\næ¯ä¸€å€‹äºº \\(k\\) çš„å–®å€‹ confidence maps \\(\\textbf S_{j, k}^*\\) å’Œ \\(\\textbf x_{j, k} \\in \\mathbb R^2\\) è¡¨ç¤ºåœ–ç‰‡ä¸­äºº \\(k\\) çš„ part \\(j\\) å°æ‡‰çš„ groundtruth position è¨ˆç®—æ–¹å¼å¦‚å¼ (6) æ‰€ç¤ºï¼Œå…¶ä¸­ \\(\\sigma\\) ç”¨ä¾†æ§åˆ¶å³°å€¼åœ¨ confidence map ä¸­çš„ å‚³æ’­ç¯„åœã€‚\nï¼ˆé€™è£¡å¯ä»¥ç†è§£æˆï¼Œ\\(\\forall \\textbf p \\in \\mathbb R^2\\)ï¼Œ\\(\\textbf p\\) é»è¶Šæ¥è¿‘ \\(\\textbf x_{j, k} \\in \\mathbb R^2\\)ï¼Œ\\(||\\textbf p - \\textbf x_{j, k}||\\_2^2\\) å€¼è¶¨è¿‘æ–¼ \\(0\\)ï¼Œ\\(\\textbf S_{j, k}^*(\\textbf p)\\) ä¹Ÿå°±è¶Šé è¿‘æ¥µå¤§å€¼ \\(1\\)ã€‚ï¼‰\n$$\\textbf S_{j, k}^*(\\textbf p) = \\exp \\Big(- \\frac{||\\textbf p - \\textbf x_{j, k}||\\_2^2}{\\sigma^2}\\Big),$$\nå†æ‰¾å‡ºæ‰€æœ‰äººçš„éƒ¨ä½ \\(j\\)ï¼Œé€™è£¡å–æœ€å¤§å€¼è€Œä¸æ˜¯å¹³å‡å€¼èƒ½å¤ æ›´æº–ç¢ºåœ°å°‡åŒä¸€å€‹ confidence map ä¸­çš„å³°å€¼ä¿å­˜ä¸‹ä¾†ï¼Œå³ï¼šå°æ•´å¼µåœ– \\(w \\times h\\) æ¯ä¸€å€‹é»ï¼Œæ‰¾ è©²é»åœ¨æ‰€æœ‰äººä¹‹ä¸­çš„æœ€å¤§å€¼ï¼\n$$\\textbf S_j^*(\\textbf p) = \\max_k \\textbf S_{j, k}^*(\\textbf p).$$\n2.3 Part Afï¬nity Fields for Part Association # çµ¦å®šä¸€çµ„ keypointsï¼Œå¦‚ Fig.5(a) æ‰€ç¤ºï¼Œæˆ‘å€‘å¦‚ä½•æŠŠå®ƒå€‘çµ„è£æˆï¼ŒæœªçŸ¥æ•¸é‡äººçš„æ•´å€‹èº«é«” çš„ pose å‘¢ï¼Ÿ\næˆ‘å€‘éœ€è¦ä¸€å€‹å¥½æ–¹æ³•ä¾†ç¢ºå®šæ¯å° keypoints ä¹‹é–“çš„é€£æ¥ï¼Œå³ï¼šå®ƒå€‘å±¬æ–¼åŒä¸€å€‹äººã€‚\nä¸€å€‹å¯èƒ½çš„æ–¹æ³•æ˜¯æ‰¾åˆ°ä¸€å€‹ä½æ–¼æ¯ä¸€å° keypoints ä¹‹é–“çš„ä¸€å€‹ä¸­é–“é»ï¼Œå¾Œæª¢æŸ¥ä¸­é–“é»æ˜¯çœŸ æ­£çš„ä¸­é–“é»çš„æ©Ÿç‡ï¼Œå¦‚ Fig. 5(b) æ‰€ç¤ºã€‚ä½†æ˜¯ç•¶äººå€‘æ“ åœ¨ä¸€èµ·æ™‚ï¼Œä¸­é–“é»å¯èƒ½æ˜¯éŒ¯èª¤çš„é€£ ç·šï¼Œå¦‚ Fig. 5(b) ä¸­ç¶ ç·šæ‰€ç¤ºã€‚å‡ºç¾é€™ç¨®æƒ…æ³çš„åŸå› æœ‰å…©å€‹ï¼š\né€™ç¨®æ–¹å¼åªç·¨ç¢¼äº†ä½ç½®è³‡è¨Šï¼Œæ²’æœ‰æ–¹å‘ èº«é«”çš„æ”¯æ’å€åŸŸå·²ç¶“ç¸®å°åˆ°ä¸€å€‹é»ä¸Šã€‚ ç‚ºè§£æ±ºé€™äº›é™åˆ¶ï¼Œæˆ‘å€‘æå‡ºäº†ç¨±ç‚º PAF(part affinity fields) çš„ç‰¹å¾µè¡¨ç¤ºä¾†ä¿å­˜èº«é«”çš„ æ”¯æ’å€åŸŸçš„ä½ç½®ä¿¡æ¯å’Œæ–¹å‘ä¿¡æ¯ï¼Œå¦‚ Fig. 5(c) æ‰€ç¤ºã€‚å°æ–¼æ¯ä¸€æ¢è»€å¹¹ä¾†èªªï¼Œthe part affinity æ˜¯ä¸€å€‹ 2D çš„å‘é‡å€åŸŸã€‚åœ¨å±¬æ–¼ä¸€å€‹è»€å¹¹ä¸Šçš„æ¯ä¸€åƒç´ éƒ½å°æ‡‰ä¸€å€‹ 2D çš„å‘é‡ï¼Œ é€™å€‹å‘é‡è¡¨ç¤ºè»€å¹¹ä¸Šå¾ä¸€å€‹ keypoint åˆ°å¦ä¸€å€‹ keypoint çš„æ–¹å‘ã€‚\nè€ƒæ…®ä¸‹åœ–ä¸­çµ¦å‡ºçš„ä¸€å€‹è»€å¹¹ï¼ˆæ‰‹è‡‚ï¼‰ï¼Œä»¤ \\(\\textbf x_{j_1, k}\\) å’Œ \\(\\textbf x_{j_2, k}\\) è¡¨ç¤ºåœ–ä¸­çš„æŸå€‹äºº \\(k\\) çš„å…©å€‹ keypoints å°æ‡‰çš„çœŸå¯¦åƒç´ é»ï¼Œå¦‚æœ ä¸€å€‹åƒç´ é» \\(\\textbf p\\) ä½æ–¼é€™å€‹è»€å¹¹ä¸Šï¼Œ\\(\\textbf L_{c, k}^*(\\textbf p)\\) è¡¨ç¤ºä¸€å€‹å¾ keypoint \\(j_1\\) åˆ° keypoints \\(j_2\\) çš„å–®ä½å‘é‡ï¼Œå°æ–¼ä¸åœ¨è»€å¹¹ä¸Š çš„åƒç´ é»ï¼Œå°æ‡‰çš„å‘é‡å‰‡æ˜¯ \\(\\textbf 0\\)ã€‚\nä¸‹é¢é€™å€‹å…¬å¼çµ¦å‡ºäº† the groundtruth part affinity vectorï¼Œå°æ–¼åœ–ç‰‡ä¸­çš„ä¸€å€‹é» \\(\\textbf p\\) å…¶å€¼ \\(\\textbf L_{c, k}^*(\\textbf p)\\) çš„å€¼å¦‚ä¸‹ï¼š\n$$ \\textbf L_{c, k}^*(\\textbf p) = \\begin{cases} \\textbf v \\text{ if $\\textbf p$ on limb $c, k$}; \\\\ \\textbf 0 \\text{ otherwise.} \\end{cases} $$\nå…¶ä¸­ï¼Œ\n\\(\\textbf v = (\\textbf x_{j_2, k} - \\textbf x_{j_1, k}) / ||\\textbf x_{j_2, k} - \\textbf x_{j_1, k}||\\_2\\): è»€å¹¹å°æ‡‰çš„å–®ä½æ–¹å‘å‘é‡ã€‚å±¬æ–¼é€™å€‹ è»€å¹¹ä¸Šçš„åƒç´ é»æ»¿è¶³ä¸‹é¢çš„ä¸ç­‰å¼ï¼š $$0 \\le \\textbf v \\cdot (\\textbf p - \\textbf x_{j_1, k}) \\le l_{c, k} \\text{ and } |\\textbf v_\\bot \\cdot (\\textbf p - \\textbf x_{j_1, k})| \\le \\sigma_l.$$\nå…¶ä¸­ï¼Œ\n\\(\\sigma_l\\): limb å¯¬åº¦ï¼ˆæ³¨æ„ï¼šä¸åŒæ–¼è»€å¹¹ï¼‰ è»€å¹¹é•·åº¦ï¼š\\(l_{c, k} = ||\\textbf x_{j_2, k} - \\textbf x_{j_1, k}||\\_2\\) \\(\\textbf v_\\bot\\): å‚ç›´æ–¼ \\(\\textbf v\\) çš„å‘é‡æ•´å¼µåœ–ç‰‡çš„ the groundtruth part affinity field å–åœ–ç‰‡ä¸­æ‰€æœ‰äººå°æ‡‰çš„ affinity field çš„å¹³å‡å€¼ï¼Œå…¶ä¸­ \\(n_c(\\textbf p)\\) æ˜¯åœ–ç‰‡ä¸­ \\(k\\) å€‹äººåœ¨åƒç´ é» \\(\\textbf p\\) å°æ‡‰çš„éé›¶ å‘é‡çš„å€‹æ•¸ï¼Œå³ï¼šæˆ‘å€‘åªè€ƒæ…® \\(\\forall \\textbf p \\in \\mathbb R^2\\)ï¼Œ\\(\\forall k\\) å€‹äººä¸­ï¼Œæœ‰å‘é‡çš„å¹³å‡ã€‚ $$\\textbf L_c^*(\\textbf p) = \\frac{1}{n_c(\\textbf p)} \\sum_k \\textbf L_{c, k}^*(\\textbf p).$$\nåœ¨é æ¸¬çš„æ™‚å€™ï¼Œæˆ‘å€‘ç”¨å€™é¸ keypoints ä¹‹é–“çš„ PAF ä¾†è¡¡é‡é€™å° keypoints æ˜¯ä¸æ˜¯å±¬æ–¼åŒ ä¸€å€‹äººã€‚è©³ç´°çš„èªªï¼Œå°æ–¼å…©å€‹å€™é¸ keypoints å°æ‡‰çš„åƒç´ é» \\(\\textbf d_{j_1}\\) å’Œ \\(\\textbf d_{j_2}\\)ï¼Œæˆ‘å€‘å»è¨ˆç®— PAFï¼Œå¦‚ä¸‹å¼æ‰€ç¤ºï¼š\n$$E = \\int_{u = 0}^{u = 1} \\textbf L_c(\\textbf p(u)) \\cdot \\frac{\\textbf d_{j_2} - \\textbf d_{j_1}}{||\\textbf d_{j_2} - \\textbf d_{j_1}||\\_2}du,$$\nå…¶ä¸­ \\(\\textbf p(u)\\) è¡¨ç¤ºå…©å€‹åƒç´ é» \\(\\textbf d_{j_1}\\) å’Œ \\(\\textbf d_{j_2}\\) ä¹‹é–“çš„åƒç´ é»ï¼š\n$$\\textbf p(u) = (1 - u)\\textbf d_{j_1} + u \\textbf d_{j_2}.$$\n2.4 Multi-Person Parsing using PAFs # è—‰ç”± non-maximum suppressionï¼Œæˆ‘å€‘å¾é æ¸¬å‡ºçš„ confidence maps å¾—åˆ°ä¸€çµ„é›¢æ•£çš„ keypoints å€™é¸ä½ç½®ã€‚å› ç‚ºåœ–ç‰‡ä¸­å¯èƒ½æœ‰å¤šå€‹äººæˆ–è€…å­˜åœ¨ false positiveï¼Œæ¯å€‹ keypoint å¯èƒ½æœƒæœ‰å¤šå€‹å€™é¸ä½ç½®ï¼Œå› æ­¤ä¹Ÿå°±çµ„æˆäº†å¾ˆå¤§æ•¸é‡çš„ keypoints pairï¼Œå¦‚ Fig. 6(b) æ‰€ç¤º ã€‚æŒ‰ç…§å¼ (10)ï¼Œæˆ‘å€‘çµ¦æ¯ä¸€å€‹å€™é¸ keypoints pair è¨ˆç®—ä¸€å€‹åˆ†æ•¸ã€‚\nå¾é€™äº› keypoint pair ä¸­æ‰¾åˆ°æœ€ä½³çµæœï¼Œæ˜¯ä¸€å€‹ NP-Hard å•é¡Œã€‚ä¸‹é¢çµ¦å‡ºæœ¬æ–‡çš„æ–¹æ³•ï¼š\nå‡è¨­æ¨¡å‹å¾—åˆ°çš„æ‰€æœ‰å€™é¸ keypoints çµ„æˆé›†åˆ \\(\\mathcal D_\\mathcal J = \\{\\textbf d_j^m: \\text{ for } j \\in \\{1 \\dots J\\}, m \\in \\{1 \\dots N_j\\}\\}\\),\nå…¶ä¸­ï¼Œ\n\\(N_j\\): keypoint \\(j\\) çš„å€™é¸ä½ç½®æ•¸é‡ \\(\\textbf d_j^m \\in \\mathbb R^2\\): keypoint \\(j\\) çš„ç¬¬ \\(m\\) å€‹å€™é¸ä½ ç½®çš„åƒç´ åæ¨™ã€‚ æˆ‘å€‘éœ€è¦åšçš„æ˜¯å°‡å±¬æ–¼åŒä¸€å€‹äººçš„ keypoints é€£æˆè»€å¹¹ï¼ˆèƒ³è†Šã€è…¿ç­‰ï¼‰ï¼Œç‚ºæ­¤æˆ‘å€‘å®šç¾©è®Š æ•¸ \\(z_{j_1j_2}^{mn} \\in \\{0, 1\\}\\) è¡¨ç¤ºå€™é¸ keypoints \\(\\textbf d_{j_1}^m\\) å’Œ \\(\\textbf d_{j_2}^n\\) æ˜¯å¦å¯ä»¥é€£èµ·ä¾†ã€‚å¦‚æ­¤ä»¥ä¾†ä¾¿å¾—åˆ°äº†é›†åˆ\n$$\\mathcal Z = \\{z_{j_1j_2}^{mn} \\in \\{0, 1\\}: \\text{ for } j_1, j_2 \\in \\{1 \\dots J\\}, m \\in \\{1 \\dots N_{j_1}\\}, n \\in \\{1 \\dots N_{j_2}\\}\\}.$$\nç¾åœ¨å–®ç¨è€ƒæ…®ç¬¬ \\(c\\) å€‹è»€å¹¹ï¼ˆä¾‹å¦‚è„–å­ï¼‰ï¼Œå…¶å°æ‡‰çš„å…©å€‹ keypoints æ‡‰è©²æ˜¯ \\(j_1\\) å’Œ \\(j_2\\)ï¼Œé€™å…©å€‹ keypoints å°æ‡‰çš„å€™é¸é›†åˆåˆ†åˆ¥æ˜¯ \\(\\mathcal D_{j_1}\\) å’Œ \\(\\mathcal D_{j_2}\\)ï¼Œå¯é€éç·šæ€§æ–¹ç¨‹å¼å¦‚ä¸‹æ‰¾å‡ºæ­£ç¢º keypointsï¼š\n$$\\max_{\\mathcal Z_c} E_c = \\max_{\\mathcal Z_c} \\sum_{m \\in \\mathcal D_{j_1}}\\sum_{n \\in \\mathcal D_{j_2}} E_{mn} \\cdot z_{j_1j_2}^{mn},$$ $$\\text{s.t. } \\forall m \\in \\mathcal D_{j_1}, \\sum_{n \\in \\mathcal D_{j_2}} z_{j_1j_2}^{mn} \\le 1,$$ $$\\forall n \\in \\mathcal D_{j_2}, \\sum_{m \\in \\mathcal D_{j_1}} z_{j_1j_2}^{mn} \\le 1$$\nå…¶ä¸­ï¼Œ\n\\(E_c\\): è»€å¹¹ \\(c\\) å°æ‡‰çš„æ¬Šå€¼ç¸½å’Œ \\(\\mathcal Z_c\\): è»€å¹¹ \\(c\\) å°æ‡‰çš„ \\(\\mathcal Z\\) çš„å­é›† \\(E_{mn}\\): keypoint \\(d_{j_1}^m\\) å’Œ keypoint \\(d_{j_2}^n\\) å°æ‡‰çš„ part affinity å¼ (13) å’Œå¼ (14) é™åˆ¶äº†ä»»æ„å…©å€‹ç›¸åŒé¡å‹çš„è»€å¹¹ï¼ˆä¾‹å¦‚å…©å€‹è„–å­ï¼‰ä¸æœƒå…±äº«é—œéµé»ã€‚å• é¡Œæ“´å±•åˆ°æ‰€æœ‰ \\(C\\) å€‹è»€å¹¹ä¸Šï¼Œæˆ‘å€‘å„ªåŒ–ç›®æ¨™å°±è®Šæˆäº†å…¬å¼ (15)ã€‚\n$$\\max_\\mathcal Z E = \\sum_{c = 1}^C \\max_{\\mathcal Z_c} E_c.$$\n3. Results # 3.1. Results on the MPII Multi-Person Dataset # 3.2. Results on the COCO Keypoints Challenge # 3.3. Runtime Analysis # 4. Discussion # ","date":"31 August 2018","externalUrl":null,"permalink":"/posts/paper/paper-realtime-pose-estimation/","section":"Posts","summary":"","title":"è«–æ–‡ç­†è¨˜ Realtime Multi-Person 2D Pose Estimation using Part Affinity Fields","type":"posts"},{"content":"åœ¨é€™ç¯‡æ–‡ç« ä¸­ï¼Œæœƒç´€éŒ„å„ç¨® ES2015 çš„æ¨™æº–ï¼\nconst # ç”± var å®£å‘Šçš„è®Šæ•¸ï¼Œå¯é‡æ–°è³¦å€¼ï¼š\nvar myName = \u0026#34;Jay\u0026#34;; myName = \u0026#34;Peng-Yu\u0026#34;; // no problem here! è€Œç”± const å®£å‘Šçš„è®Šæ•¸ï¼Œä¸èƒ½è¢«é‡æ–°è³¦å€¼ï¼Œä¹Ÿä¸èƒ½è¢«é‡æ–°å®£å‘Šï¼š\nconst myName = \u0026#34;Jay\u0026#34;; myName = \u0026#34;Peng-Yu\u0026#34;; // TypeError const myName = \u0026#34;Peng-Yu\u0026#34;; // SyntaxError ä½†æ˜¯å¯ä»¥æ–°å¢å…ƒç´ ï¼š\nconst numbers = [1, 2, 3, 4]; numbers.push(10); // 5 numbers; // [1, 2, 3, 4, 10] numbers = \u0026#34;no!\u0026#34;; // TypeError let # let myName = \u0026#34;Jay\u0026#34;; myName = \u0026#34;Peng-Yu\u0026#34;; // no problems here! let myName = \u0026#34;Peng-Yu\u0026#34;; // SyntaxError let èˆ‡ const ä¸åŒçš„æ˜¯ï¼Œå¯ä»¥é‡æ–°è³¦èˆ‡æ–°å€¼ï¼Œä½†ä¸€æ¨£ç„¡æ³•é‡æ–°å®£å‘Šã€‚\nmethod let const reassign âœ” âœ– redeclare âœ– âœ– let æœ‰ scope é™åˆ¶ï¼š\nconst myName = \u0026#34;Jay\u0026#34;; if (myName === \u0026#34;Jay\u0026#34;) { let funFact = \u0026#34;Plays the piano\u0026#34;; } funFact; // ReferenceError Hoisting with let:\nfunction helloJay() { return jay; var jay = \u0026#34;ME!\u0026#34;; } helloJay(); // undefined function helloJay() { return jay; let jay = \u0026#34;ME!\u0026#34;; } helloJay(); // ReferenceError for (var i = 0; i \u0026lt; 5; ++i) { setTimeout(function () { console.log(i); }, 1000); } // 5 (five times) for (let i = 0; i \u0026lt; 5; ++i) { setTimeout(function () { console.log(i); }, 1000); } // 0 // 1 // 2 // 3 // 4 Template Strings # ES2015 å°æ–¼å­—ä¸²çš„è™•ç†ä¹Ÿæœ‰è¼ƒå„ªçš„æ–¹å¼ï¼ŒèˆŠçš„å¯«æ³•æ˜“å‡ºéŒ¯ï¼Œæ–°çš„æ¨™æº–æ¸…æ¥šæ˜äº†\nconst firstName = \u0026#34;Jay\u0026#34;; const lastName = \u0026#34;Chen\u0026#34;; console.log(\u0026#34;Hello \u0026#34; + firstName + \u0026#34; \u0026#34; + lastName); // error prone! console.log(`Hello ${firstName} ${lastName}`); // much nicer! å°æ–¼å¤šè¡Œå­—ä¸²ä¹Ÿæ²’å•é¡Œï¼š\n` Hello How Nice Is This! `; // works well! Arrow Functions # æ¥ä¸‹ä¾†å°±è¦ä»‹ç´¹ ES2015 ä¸­ï¼Œæˆ‘èªç‚ºæœ€è®šçš„ç®­é ­å‡½æ•¸ï¼å®ƒèƒ½å¤§å‰¯çš„ç¸®çŸ­ç¨‹å¼ç¢¼è¡Œæ•¸ï¼Œä½†ä¸€é–‹ å§‹è¦èŠ±é»æ™‚é–“å»ç¿’æ…£ã€‚\n// ES5 const add = function (a, b) { return a + b; }; // å°‡ \u0026#39;function\u0026#39; keyword å–ä»£æˆ \u0026#39;=\u0026gt;\u0026#39; // ES2015 const add = (a, b) =\u0026gt; { return a + b; }; // One-line arrow functions const add = (a, b) =\u0026gt; a + b; è®“æˆ‘å€‘ä¾†è©¦è©¦ç”¨ç®­é ­å‡½æ•¸ï¼Œé‡æ–°æ”¹å¯«ä¸€äº›ç¨‹å¼ç¢¼ï¼š\n// ES5 [1, 2, 3].map(function (val) { return val * 2; }); // [2, 4, 6] // ES2015 [1, 2, 3].map((val) =\u0026gt; val * 2); // [2, 4, 6] // ES5 function doubleAndFilter(arr) { return arr .map(function (val) { return val * 2; }) .filter(function (val) { return val % 3 === 0; }); } // ES2015 const doubleAndFilter = (arr) =\u0026gt; arr.map((val) =\u0026gt; val * 2).filter((num) =\u0026gt; num % 3 === 0); doubleAndFilter([5, 10, 15, 20]); // [30] ç®­é ­å‡½æ•¸ï¼ˆarrow functionsï¼‰å’Œä¸€èˆ¬ functions çš„å·®åˆ¥åœ¨æ–¼ä»–å€‘æ²’æœ‰è‡ªå·±çš„ this é—œéµ å­—ã€‚\nconst me = { firstName: \u0026#34;Jay\u0026#34;, sayHi: function () { setTimeout(function () { console.log(`Hello ${this.firstName}`); }, 1000); }, }; me.sayHi(); // \u0026#39;Hello undefined\u0026#39; const me = { firstName: \u0026#34;Jay\u0026#34;, sayHi: function () { setTimeout( function () { console.log(`Hello ${this.firstName}`); }.bind(this), 1000 ); }, }; me.sayHi(); // \u0026#39;Hello Jay\u0026#39; ç®­é ­å‡½å¼å› ç‚ºæ²’æœ‰è‡ªå·±çš„ thisï¼Œæ‰€ä»¥ this æœƒç›´æ¥æŒ‡å‘é›¢ä»–æœ€è¿‘çš„ç‰©ä»¶ï¼ˆmeï¼‰\nconst me = { firstName: \u0026#34;Jay\u0026#34;, // why can\u0026#39;t we use an arrow function here? sayHi: function () { setTimeout(() =\u0026gt; { console.log(`Hello ${this.firstName}`); }, 1000); }, }; me.sayHi(); // \u0026#39;Hello Jay\u0026#39; è‹¥æˆ‘å€‘å°‡ function() æ›æˆ () =\u0026gt; æœƒå°è‡´ sayHi æ²’æœ‰è‡ªå·±çš„ thisï¼Œå¦‚æ­¤ä¸€ä¾† this å°±ä¸åœ¨æ˜¯æŒ‡åˆ° meï¼\næ¥ä¸‹ä¾†å°±ä¾†çœ‹çœ‹æ›´å¤š ES2015 æ¯” ES5 æ›´æ£’çš„åœ°æ–¹ï¼\nDefault Parameters # function add(a = 10, b = 20) { return a + b; } add(); // 30 add(20); // 40 for \u0026hellip; of # const arr = [1, 2, 3, 4, 5]; for (const val of arr) { console.log(val); } // 1 // 2 // 3 // 4 // 5 Rest # rest ç¸½æ˜¯å›å‚³ä¸€å€‹é™£åˆ—\nfunction printRest(a, b, ...c) { console.log(a); console.log(b); console.log(c); } printRest(1, 2, 3, 4, 5); // 1 // 2 // [3, 4, 5] const sumArguments = (...args) =\u0026gt; args.reduce((acc, next) =\u0026gt; acc + next); Spread # const arr1 = [1, 2, 3]; const arr2 = [4, 5, 6]; const arr3 = [7, 8, 9]; const combined = [...arr1, ...arr2, ...arr3]; Spread instead of apply # const arr = [3, 2, 4, 1, 5]; Math.max(arr); // NaN // ES5 Math.max.apply(this, arr); // 5 // ES2015 Math.max(...arr); // 5 Object Shorthand Notation # const firstName = \u0026#34;Jay\u0026#34;; const lastName = \u0026#34;Chen\u0026#34;; // ES5 const me = { firstName: firstName, lastName: lastName, }; // ES2015 const me = { firstName, lastName, }; Object Methods # // ES5 const me = { sayHello: function () { return \u0026#34;Hello!\u0026#34;; }, }; // ES2015 - do NOT use arrow functions here! const me = { sayHello() { return \u0026#34;Hello!\u0026#34;; }, }; Computed Property Names # const firstName = \u0026#34;Jay\u0026#34;; // ES5 const me = {}; me[firstName] = \u0026#34;That\u0026#39;s me!\u0026#34;; // ES2015 const boy = { [firstName]: \u0026#34;That\u0026#39;s me!\u0026#34;, }; me.Jay; // \u0026#34;That\u0026#39;s me!\u0026#34; boy.Jay; // \u0026#34;That\u0026#39;s me!\u0026#34; Object Destructuring # const me = { firstName: \u0026#34;Jay\u0026#34;, lastName: \u0026#34;Chen\u0026#34;, }; // ES5 const firstName = me.firstName; const lastName = me.lastName; // ES2015 const { firstName, lastName } = me; firstName; // \u0026#39;Jay\u0026#39; lastName; // \u0026#39;Chen\u0026#39; Rename destructured variables # const { firstName: first, lastName: last } = me; first; // \u0026#39;Jay\u0026#39; last; // \u0026#39;Chen\u0026#39; Default values with an object # åœ¨ ES2015 ä¸­ï¼Œè‹¥æ²’æœ‰ä»»ä½•åƒæ•¸å‚³å…¥ï¼Œé‚£éº¼ destructured object å°±æ˜¯é è¨­åƒæ•¸ï¼š\n// ES5 function createMyself(options) { var options = options || {}; const name = options.name || { first: \u0026#34;Jay\u0026#34;, last: \u0026#34;Chen\u0026#34; }; const isHilarious = options.isHilarious || false; return [name.first, name.last, isHilarious]; } // ES2015 function createMyself({ name = { first: \u0026#34;Jay\u0026#34;, last: \u0026#34;Chen\u0026#34; }, isHilarious = false, } = {}) { return [name.first, name.last, isHilarious]; } createMyself(); // [\u0026#39;Jay\u0026#39;, \u0026#39;Chen\u0026#39;, false] createMyself({ isHilarious: true }); // [\u0026#39;Jay\u0026#39;, \u0026#39;Chen\u0026#39;, true] createMyself({ name: { first: \u0026#34;Dog\u0026#34;, last: \u0026#34;Peng\u0026#34; } }); // [\u0026#39;Dog\u0026#39;, \u0026#39;Peng\u0026#39;, false] Object fields as parameters # // ES5 function displayInfo(obj) { return [obj.name, obj.favColor]; } // ES2015 - Very common in React! function displayInfo({ name, favColor }) { return [name, favColor]; } const me = { name: \u0026#34;Jay\u0026#34;, favColor: \u0026#34;White\u0026#34;, }; displayInfo(me); // [\u0026#39;Jay\u0026#39;, \u0026#39;White\u0026#39;] Array Destructuring # const arr = [1, 2, 3]; // ES5 const a = arr[0]; const b = arr[1]; const c = arr[2]; // ES2015 const [a, b, c] = arr; a; // 1 b; // 2 c; // 3 function returnNumbers(a, b) { return [a, b]; } // ES5 const first = returnNumbers(5, 10)[0]; const second = returnNumbers(5, 10)[1]; // ES2015 [first, second] = returnNumbers(5, 10); first; // 5 second; // 10 Swapping Values # // ES5 function swap(a, b) { const temp = a; a = b; b = temp; return [a, b]; } // ES2015 function swap(a, b) { return ([a, b] = [b, a]); } swap(10, 5); // [5,10] class # åœ¨ ES2015 å¾Œï¼Œç‚ºæ–°çš„ä¿ç•™å­— ä¸èƒ½è¢«é‡æ–°å®£å‘Š æ²’æœ‰ hoist ä»ä½¿ç”¨ new é—œéµå­— // ES5 function Student(firstName, lastName) { this.firstName = firstName; this.lastName = lastName; } Student.prototype.sayHello = function () { return `Hello ${this.firstName} ${this.lastName}`; }; Student.isStudent = function (obj) { return obj.constructor === Student; }; // ES2015 class Student { constructor(firstName, lastName) { this.firstName = firstName; this.lastName = lastName; } sayHello() { return `Hello ${this.firstName} ${this.lastName}`; } static isStudent(obj) { return obj.constructor === Student; } } const jay = new Student(\u0026#34;Jay\u0026#34;, \u0026#34;Chen\u0026#34;); Inheritance # ä¸€å€‹ class èƒ½å‚³é€ methods å’Œ properties çµ¦å…¶å®ƒ class\n// ES5 function Person(firstName, lastName) { this.firstName = firstName; this.lastName = lastName; } Person.prototype.sayHello() { return `Hello ${this.firstName} ${this.lastName}`; } function Student(firstName, lastName) { this.firstName = firstName; this.lastName = lastName; } // Use Apply function Student() { Person.apply(this, arguments); } Student.prototype = Object.create(Person.prototype); Student.prototype.constructor = Student; super # // ES2015 class Person { constructor(firstName, lastName) { this.firstName = firstName; this.lastName = lastName; } sayHello() { return `Hello ${this.firstName} ${this.lastName}`; } } class Student extends Person { constructor(firstName, lastName) { // you must use super here! super(firstName, lastName); } } Map # åœ¨å…¶å®ƒèªè¨€å¸¸è¢«ç¨±åš \u0026ldquo;hash map\u0026rdquo; å’Œç‰©ä»¶ï¼ˆobjectï¼‰å¾ˆåƒï¼Œä½† keys å¯ä»¥æ˜¯ä»»ä½•è³‡æ–™å½¢åˆ¥ ä½¿ç”¨ new é—œéµå­— const myMap = new Map(); myMap.set(1, \u0026#34;Jay\u0026#34;); myMap.set(false, \u0026#34;a boolean\u0026#34;); myMap.set(\u0026#34;nice\u0026#34;, \u0026#34;a string\u0026#34;); myMap.delete(\u0026#34;nice\u0026#34;); // true myMap.size; // 2 Key å¯ä»¥æ˜¯ä»»ä½•è³‡æ–™å½¢åˆ¥ï¼\nconst arrayKey = []; myMap.set(arrayKey, [1, 2, 3, 4, 5]); const objectKey = {}; myMap.set(objectKey, { a: 1 }); Extracting values # myMap.get(1); // \u0026#39;Jay\u0026#39; myMap.get(false); // \u0026#39;a boolean\u0026#39; myMap.get(arrayKey); // [1, 2, 3, 4, 5] myMap.get(objectKey); // { a: 1 } æˆ‘å€‘å¯ä»¥å¾ˆè¼•é¬†çš„éæ­·æ•´å€‹ Mapï¼\nmyMap.forEach((v) =\u0026gt; console.log(v)); // Elie // a boolean // [1, 2, 3, 4, 5] // { a: 1 } Iterating over a Map # myMap.values(); // MapIterator of values myMap.keys(); // MapIterator of keys Accessing keys and values in a Map # æˆ‘å€‘å¯ä»¥è—‰ç”± .entries() å’Œ destructuring å»å–å¾—ä»»ä½•å€¼ï¼\nconst m = new Map(); m.set(1, \u0026#34;Jay\u0026#34;); m.set(2, \u0026#34;BB\u0026#34;); m.set(3, \u0026#34;Disney\u0026#34;); for (const [key, value] of m.entries()) { console.log(key, value); } // 1 \u0026#39;Jay\u0026#39; // 2 \u0026#39;BB\u0026#39; // 3 \u0026#39;Disney\u0026#39; WeakMap # å’Œ Map å¾ˆåƒï¼Œä½†æ‰€æœ‰ keys å¿…éœ€æ˜¯ objects åœ¨ WeakMap ä¸­çš„ values æœƒåœ¨ä»–å€‘ä¸åœ¨è¢«éœ€è¦æ™‚å¾è¨˜æ†¶é«”ä¸­æ¸…ç©º æ¯” Map æ›´æœ‰æ•ˆç‡ï¼Œä½†æ˜¯ç„¡æ³•è¢«éæ­· Set # æ‰€æœ‰çš„ values æ˜¯ç¨ä¸€ç„¡äºŒçš„ value å¯ä»¥æ˜¯ä»»ä½•è³‡æ–™å½¢åˆ¥ ä½¿ç”¨ new é—œéµå­— const s = new Set(); const s2 = new Set([3, 1, 4, 1, 2, 1, 5]); // { 3, 1, 4, 2, 5 } s.add(10); // { 10 } s.add(20); // { 20, 10 } s.add(10); // { 20, 10 } s.size; // 2 s.has(10); // true s.delete(20); // true s.size; // 1 s2[Symbol.iterator]; // function() {}... WeakSet # å’Œ Set å¾ˆåƒï¼Œä½†æ‰€æœ‰ values å¿…éœ€æ˜¯ objects åœ¨ WeakSet ä¸­çš„ values æœƒåœ¨ä»–å€‘ä¸åœ¨è¢«éœ€è¦æ™‚å¾è¨˜æ†¶é«”ä¸­æ¸…ç©º æ¯” Set æ›´æœ‰æ•ˆç‡ï¼Œä½†æ˜¯ç„¡æ³•è¢«éæ­· Promise # åªæœ‰ä¸€æ¬¡æ©Ÿæœƒçš„æœªä¾† return value ç•¶ value è¢«å¼„æ¸…æ¥šæ™‚ï¼ŒPromise æœƒè¢« resolved/fulfilled rejected å¯ä»¥å‹å–„åœ°é‡æ–°æ”¹å¯« callback ç¨‹å¼ç¢¼ Create your own Promise # ä½¿ç”¨ new é—œéµå­— æ¯ä¸€å€‹ Promise constructor æ¥å—äº†ä¸€å€‹æ“æœ‰å…©å€‹åƒæ•¸ï¼ˆresolve å’Œ rejectï¼‰çš„ callback å‡½å¼ æ¯ä¸€å€‹ç”± Promise æ‰€å›å‚³çš„å€¼æœƒç”± .then (resolved) å’Œ .catch (rejected) ä¾†åŸ· è¡Œã€‚\nfunction displayAtRandomTime() { return new Promise(function (resolve, reject) { setTimeout(function () { if (Math.random() \u0026gt; 0.5) { resolve(\u0026#34;Yes!\u0026#34;); } else { reject(\u0026#34;No!\u0026#34;); } }, 1000); }); } displayAtRandomTime() .then(function (value) { console.log(value); }) .catch(function (error) { console.log(error); }); æˆ‘å€‘å¯ä»¥å°‡ Promises ä¸²æ¥åœ¨ä¸€èµ·ï¼Œå³å®ƒå€‘æ˜¯ thenable çš„\nconst years = []; fetch(\u0026#34;https://omdbapi.com?t=titanic\u0026amp;apikey=thewdb\u0026#34;) .then((res) =\u0026gt; res.json()) .then(function (movie) { years.push(movie.Year); return fetch(\u0026#34;https://omdbapi.com?t=titanic\u0026amp;apikey=thewdb\u0026#34;).then((res) =\u0026gt; res.json() ); }) .then(function (movie) { years.push(movie.Year); console.log(years); }); console.log(\u0026#34;ALL DONE!\u0026#34;); // \u0026#34;ALL DONE!\u0026#34; // [\u0026#34;1997\u0026#34;, \u0026#34;1997\u0026#34;] Promise.all # Promise ä¸æ˜¯ sequentialï¼Œä½† Promise.all æœƒ waits ä»–å€‘ã€‚ function getMovie(title) { return fetch(`https://omdbapi.com?t=${title}\u0026amp;apikey=thewdb`).then((res) =\u0026gt; res.json() ); } const titanicPromise = getMovie(\u0026#34;titanic\u0026#34;); const shrekPromise = getMovie(\u0026#34;shrek\u0026#34;); const braveheartPromise = getMovie(\u0026#34;braveheart\u0026#34;); Promise.all([titanicPromise, shrekPromise, braveheartPromise]).then(function ( movies ) { return movies.forEach(function (movie) { console.log(movie.Year); }); }); // 1997 // 2001 // 1995 Generator # å¯ä»¥åœ¨ä»»ä½•æ™‚é–“ pause åŸ·è¡Œå’Œ resume ä½¿ç”¨ * ç•¶è¢«å‘¼å«æ™‚ï¼Œæœƒå›å‚³ä¸€å€‹ generator objectã€keys of value å’Œ done Value é€é yield å¾ paused å‡½å¼å›å‚³ Done å‰‡æ˜¯ä¸€å€‹å¸ƒæ—å€¼ï¼Œç•¶å‡½å¼å®Œæˆæ™‚å›å‚³ true function* pauseAndReturnValues(num) { for (let i = 0; i \u0026lt; num; ++i) { yield i; } } const gen = pauseAndReturnValues(5); gen.next(); // { value: 0, done: false } gen.next(); // { value: 1, done: false } gen.next(); // { value: 2, done: false } gen.next(); // { value: 3, done: false } gen.next(); // { value: 4, done: false } gen.next(); // { value: undefined, done: true } Yield multiple values # function* printValues() { yield \u0026#34;First\u0026#34;; yield \u0026#34;Second\u0026#34;; yield \u0026#34;Third\u0026#34;; } const g = printValues(); g.next().value; // \u0026#34;First\u0026#34; g.next().value; // \u0026#34;Second\u0026#34; g.next().value; // \u0026#34;Third\u0026#34; Iterating over a generator # function* pauseAndReturnValues(num) { for (let i = 0; i \u0026lt; num; ++i) { yield i; } } for (const val of pauseAndReturnValues(3)) { console.log(val); } // 0 // 1 // 2 Async Generators # æˆ‘å€‘å¯ä»¥åˆ©ç”¨ generators å»æš«åœ asynchronous ç¨‹å¼ç¢¼ï¼\nfunction* getMovieData(movieName) { console.log(\u0026#34;starting\u0026#34;); yield fetch(`https://omdbapi.com?t=${movieName}\u0026amp;apikey=thewdb`).then((res) =\u0026gt; res.json() ); console.log(\u0026#34;ending\u0026#34;); } const movieGetter = getMovieData(\u0026#34;titanic\u0026#34;); movieGetter.next().value.then((val) =\u0026gt; console.log(val)); Object.assign # ES2015 æ˜¯ã€ŒçœŸçš„ã€æ–°å¢äº†ä¸€å€‹ Objectã€‚\n// ES5 const o = { name: \u0026#34;Jay\u0026#34; }; const o2 = o; o2.name = \u0026#34;BB\u0026#34;; o.name; // \u0026#34;BB\u0026#34; // ES2015 const o = { name: \u0026#34;Jay\u0026#34; }; const o2 = Object.assign({}, o); o2.name = \u0026#34;BB\u0026#34;; o.name; // \u0026#34;Jay\u0026#34; ä½†ä¸æ˜¯å®Œæ•´çš„è¤‡è£½ä¸€ä»½æ–°çš„ï¼Œä»æœ‰ referenceï¼\n// ES2015 const o = { names: [\u0026#34;Jay\u0026#34;, \u0026#34;BB\u0026#34;] }; const o2 = Object.assign({}, o); o2.names.push(\u0026#34;Disney\u0026#34;); o.names; // [\u0026#34;Jay\u0026#34;, \u0026#34;BB\u0026#34;, \u0026#34;Disney\u0026#34;]; Array.from # å°‡å…¶å®ƒè³‡æ–™å‹åˆ¥è½‰å…¥ arrays\n// ES2015 const divs = document.getElementsByTagName(\u0026#34;div\u0026#34;); const converted = Array.from(divs); const firstSet = new Set([1, 2, 3, 4, 3, 2, 1]); // { 1, 2, 3, 4 } const arrayFromSet = Array.from(firstSet); // [1, 2, 3, 4] find # const names = [ { name: \u0026#34;Jay\u0026#34; }, { name: \u0026#34;BB\u0026#34; }, { name: \u0026#34;Disney\u0026#34; }, { name: \u0026#34;Benjamin\u0026#34; }, ]; names.find((val) =\u0026gt; val.name === \u0026#34;BB\u0026#34;); // { name: \u0026#34;BB\u0026#34; } findIndex # const names = [ { name: \u0026#34;Jay\u0026#34; }, { name: \u0026#34;BB\u0026#34; }, { name: \u0026#34;Disney\u0026#34; }, { name: \u0026#34;Benjamin\u0026#34; }, ]; names.findIndex((val) =\u0026gt; val.name === \u0026#34;BB\u0026#34;); // 1 includes # // ES5 \u0026#34;awesome\u0026#34;.indexOf(\u0026#34;some\u0026#34;); // 3 // ES2015 \u0026#34;awesome\u0026#34;.includes(\u0026#34;some\u0026#34;); // true Number.isFinite # // ES5 function seeIfNumber(val) { if (typeof val === \u0026#34;number\u0026#34; \u0026amp;\u0026amp; !isNaN(val)) { return \u0026#34;It is a number!\u0026#34;; } } // ES2015 function seeIfNumber(val) { if (Number.isFinite(val)) { return \u0026#34;It is a number!\u0026#34;; } } ","date":"7 August 2018","externalUrl":null,"permalink":"/posts/js/js-es2015/","section":"Posts","summary":"","title":"ES2015","type":"posts"},{"content":"åœ¨æ­¤é™„ä¸Š Elie Schoppik è¬›å¸«çš„ slides\né™£åˆ—è¿­ä»£ # åœ¨ JavaScript ä¸­ï¼Œcallback æ˜¯ä¸€ç¨®å¸¸è¦‹çš„å‡½å¼ï¼Œé€™ç¯‡æ–‡ç« æƒ³è¦å° JS ä¸­å¹¾ç¨®å¸¸è¦‹è¿­ä»£ ï¼ˆiterateï¼‰é™£åˆ—çš„æ–¹å¼åšå€‹åˆæ­¥çš„ä»‹ç´¹ã€‚\nä¸»è¦å‡½å¼æœ‰ä»¥ä¸‹å¹¾ç¨®ï¼Œä½¿ç”¨å®ƒå€‘å¯ä»¥ä½¿ç¨‹å¼ç¢¼è®Šå¾—æ›´åŠ æ•´æ½”ã€æ¸…æ¥šï¼\nforEach map filter some every reduce forEach # åŸ·è¡Œæ­¥é©Ÿï¼š\nè¿­ä»£æ•´å€‹é™£åˆ— å°æ¯ä¸€å€‹å€¼ï¼ˆvalueï¼‰åŸ·è¡Œä¸€æ¬¡ callback å›å‚³ undefined é‹è¡Œæ©Ÿåˆ¶ï¼š\nfunction forEach(arr, callback) { for (let i = 0; i \u0026lt; arr.length; ++i) { callback(arr[i], i, arr); } } ä»¥ä¸‹è®“æˆ‘å€‘é€éä¾‹å­ä¾†æ·±å…¥äº†è§£ forEach çš„å¥§å¦™ï¼\nWrite a function called doubleValues which accepts an array and returns a new array with all the values in the array passed to the function doubled.\nExamples:\ndoubleValues([1, 2, 3]); // [2, 4, 6] doubleValues([5, 1, 2, 3, 10]); // [10, 2, 4, 6, 20] Solution:\nfunction doubleValues(arr) { let newArr = []; arr.forEach((val) =\u0026gt; newArr.push(val * 2)); return newArr; } Write a function called onlyEvenValues which accepts an array and returns a new array with only the even values in the array passed to the function.\nExamples:\nonlyEvenValues([1, 2, 3]); // [2] onlyEvenValues([5, 1, 2, 3, 10]); // [2, 10] Solution:\nfunction onlyEvenValues(arr) { let newArr = []; arr.forEach((val) =\u0026gt; { if (val % 2 === 0) { newArr.push(val); } }); return newArr; } Write a function called showFirstAndLast which accepts an array of strings and returns a new array with only the first and last character of each string.\nExamples:\nshowFirstAndLast([\u0026#34;colt\u0026#34;, \u0026#34;matt\u0026#34;, \u0026#34;tim\u0026#34;, \u0026#34;udemy\u0026#34;]); // [\u0026#39;ct\u0026#39;, \u0026#39;mt\u0026#39;, \u0026#39;tm\u0026#39;, \u0026#39;uy\u0026#39;] showFirstAndLast([\u0026#34;hi\u0026#34;, \u0026#34;goodbye\u0026#34;, \u0026#34;smile\u0026#34;]); // [\u0026#39;hi\u0026#39;, \u0026#39;ge\u0026#39;, \u0026#39;se\u0026#39;] Solution:\nfunction showFirstAndLast(arr) { let newArr = []; arr.forEach((val) =\u0026gt; newArr.push(val[0] + val[val.length - 1])); return newArr; } Write a function called addKeyAndValue which accepts an array of objects, a key, and a value and returns the array passed to the function with the new key and value added for each object.\nExamples:\naddKeyAndValue( [{ name: \u0026#34;Elie\u0026#34; }, { name: \u0026#34;Colt\u0026#34; }], \u0026#34;title\u0026#34;, \u0026#34;instructor\u0026#34; ); // [{ name: \u0026#39;Elie\u0026#39;, title: \u0026#39;instructor\u0026#39; }, // { name: \u0026#39;Colt\u0026#39;, title: \u0026#39;instructor\u0026#39; }] Solution:\nfunction addKeyAndValue(arr, key, value) { arr.forEach((val) =\u0026gt; (val[key] = value)); return arr; } Write a function called vowelCount which accepts a string and returns an object with the keys as the vowel and the values as the number of times the vowel appears in the string. This function should be case insensitive so a lowercase letter and uppercase letter should count.\nExamples:\nvowelCount(\u0026#34;Elie\u0026#34;); // { e: 2, i: 1 } vowelCount(\u0026#34;Colt\u0026#34;); // { o: 1 } vowelCount(\u0026#34;hmmm\u0026#34;); // {}; vowelCount(\u0026#34;I Am awesome and so are you\u0026#34;); // { i: 1, a: 4, e: 3, o: 3, u: 1 } Solution:\nfunction vowelCount(str) { let obj = {}; let vowels = \u0026#34;aeiou\u0026#34;; str .toLowerCase() .split(\u0026#34;\u0026#34;) .forEach((val) =\u0026gt; { if (vowels.indexOf(val) !== -1) { if (obj[val]) { ++obj[val]; } else { obj[val] = 1; } } }); return obj; } map # åŸ·è¡Œæ­¥é©Ÿï¼š\nå‰µå»ºä¸€å€‹æ–°çš„é™£åˆ—ï¼ˆnewArrï¼‰ è¿­ä»£åŸæœ¬çš„é™£åˆ—ï¼ˆarrï¼‰ å°æ¯ä¸€å€‹å€¼ï¼ˆvalueï¼‰åŸ·è¡Œä¸€æ¬¡ callback å°‡ callback å‡½å¼å›å‚³çš„çµæœåŠ å…¥æ­¥é©Ÿä¸€æ‰€å»ºç«‹çš„é™£åˆ—ï¼ˆnewArrï¼‰ å›å‚³ newArr é‹è¡Œæ©Ÿåˆ¶ï¼š\nfunction map(arr, callback) { let newArr; for (let i = 0; i \u0026lt; arr.length; ++i) { newArr.push(callback(arr[i], i, arr)); } return newArr; } æˆ‘å€‘å¯ä»¥ç™¼ç¾ï¼Œé€é mapï¼Œæˆ‘å€‘ä¸éœ€è¦å†è‡ªè¡Œå»ºç«‹é™£åˆ—ï¼Œé€™æœƒä½¿çš„ç¨‹å¼ç¢¼è®Šå¾—éå¸¸æ½”ç°¡ï¼Œç”± å…¶æ˜¯æ­é… 1-line arrow function æ™‚ï¼\nä¸€æ¨£é€éä»¥ä¸‹å¹¾å€‹ä¾‹å­ï¼Œè®“å¤§å®¶ç´°ç´°å“å˜— map æ¯” forEach å¼·å¤§çš„åœ°æ–¹ï¼\nWrite a function called doubleValues which accepts an array and returns a new array with all the values in the array passed to the function doubled.\nExamples:\ndoubleValues([1, 2, 3]); // [2, 4, 6] doubleValues([1, -2, -3]); // [2, -4, -6] Solution:\nfunction doubleValues(arr) { return arr.map((val) =\u0026gt; val * 2); } Write a function called valTimesIndex which accepts an array and returns a new array with each value multiplied by the index it is currently at in the array.\nExamples:\nvalTimesIndex([1, 2, 3]); // [0, 2, 6] valTimesIndex([1, -2, -3]); // [0, -2, -6] Solution:\nfunction valTimesIndex(arr) { return arr.map((val, i) =\u0026gt; val * i); } Write a function called extractKey which accepts an array of objects and some key and returns a new array with the value of that key in each object.\nExamples:\nextractKey([{ name: \u0026#34;Elie\u0026#34; }, { name: \u0026#34;Colt\u0026#34; }], \u0026#34;name\u0026#34;); // [\u0026#39;Elie\u0026#39;, \u0026#39;Colt\u0026#39;] Solution:\nfunction extractKey(arr, key) { return arr.map((val) =\u0026gt; val[key]); } Write a function called extractFullName which accepts an array of objects and returns a new array with the value of the key with a name of \u0026lsquo;first\u0026rsquo; and the value of a key with the name of \u0026rsquo;last\u0026rsquo; in each object, concatenated together with a space.\nExamples:\nextractFullName([ { first: \u0026#34;Elie\u0026#34;, last: \u0026#34;Schoppik\u0026#34; }, { first: \u0026#34;Colt\u0026#34;, last: \u0026#34;Steele\u0026#34; }, ]); // [\u0026#39;Elie Schoppik\u0026#39;, \u0026#39;Colt Steele\u0026#39;] Solution:\nfunction extractFullName(arr) { return arr.map((val) =\u0026gt; `${val.first} ${val.last}`); } filter # åŸ·è¡Œæ­¥é©Ÿï¼š\nå‰µå»ºä¸€å€‹æ–°çš„é™£åˆ—ï¼ˆnewArrï¼‰ è¿­ä»£åŸæœ¬çš„é™£åˆ—ï¼ˆarrï¼‰ å°æ¯ä¸€å€‹å€¼ï¼ˆvalueï¼‰åŸ·è¡Œä¸€æ¬¡ callback è‹¥ callback å›å‚³ trueï¼Œå°‡ value åŠ å…¥æ­¥é©Ÿä¸€æ‰€å»ºç«‹çš„é™£åˆ—ï¼ˆnewArrï¼‰ è‹¥ callback å›å‚³ falseï¼Œcontinue å›å‚³ newArr é‹è¡Œæ©Ÿåˆ¶ï¼š\nfunction filter(arr, callback) { let newArr; for (let i = 0; i \u0026lt; arr.length; ++i) { if (callback(arr[i], i, arr)) { newArr.push(arr[i]); } } return newArr; } ä¾‹å­ï¼š\nWrite a function called filterByValue which accepts an array of objects and a key and returns a new array with all the objects that contain that key.\nExamples:\nfilterByValue( [ { first: \u0026#34;Elie\u0026#34;, last: \u0026#34;Schoppik\u0026#34; }, { first: \u0026#34;Colt\u0026#34;, last: \u0026#34;Steele\u0026#34;, isCatOwner: true }, ], \u0026#34;isCatOwner\u0026#34; ); // [{ first: \u0026#39;Colt\u0026#39;, last: \u0026#39;Steele\u0026#39;, isCatOwner: true }] Solution:\nfunction filterByValue(arr, key) { return arr.filter((val) =\u0026gt; val[key]); } Write a function called find which accepts an array and a value and returns the first element in the array that has the same value as the second parameter or undefined if the value is not found in the array.\nExamples:\nfind([1, 2, 3, 4, 5], 3); // 3 find([1, 2, 3, 4, 5], 10); // undefined Solution:\nfunction find(arr, searchValue) { return arr.filter((val) =\u0026gt; val === searchValue)[0]; } Write a function called findInObj which accepts an array of objects, a key, and some value to search for and returns the first found value in the array.\nExamples:\nfindInObj( [ { first: \u0026#34;Elie\u0026#34;, last: \u0026#34;Schoppik\u0026#34; }, { first: \u0026#34;Tim\u0026#34;, last: \u0026#34;Garcia\u0026#34;, isCatOwner: true }, { first: \u0026#34;Colt\u0026#34;, last: \u0026#34;Steele\u0026#34;, isCatOwner: true }, ], \u0026#34;isCatOwner\u0026#34;, true ); // { first: \u0026#39;Tim\u0026#39;, last: \u0026#39;Garcia\u0026#39;, isCatOwner: true} Solution:\nfunction findInObj(arr, key, searchValue) { return arr.filter((val) =\u0026gt; val[key] === searchValue)[0]; } Write a function called removeVowels which accepts a string and returns a new string with all of the vowels (both uppercased and lowercased) removed. Every character in the new string should be lowercased.\nExamples:\nremoveVowels(\u0026#34;Elie\u0026#34;); // \u0026#39;l\u0026#39; removeVowels(\u0026#34;TIM\u0026#34;); // \u0026#39;tm\u0026#39; removeVowels(\u0026#34;ZZZZZZ\u0026#34;); // \u0026#39;zzzzzz\u0026#39; Solution:\nfunction removeVowels(str) { let vowels = \u0026#34;aeiou\u0026#34;; return str .toLowerCase() .split(\u0026#34;\u0026#34;) .filter((val) =\u0026gt; vowels.indexOf(val) === -1) .join(\u0026#34;\u0026#34;); } Write a function called doubleOddNumbers which accepts an array and returns a new array with all of the odd numbers doubled (HINT - you can use map and fitler to double and then filter the odd numbers).\nExamples:\ndoubleOddNumbers([1, 2, 3, 4, 5]); // [2, 6, 10] doubleOddNumbers([4, 4, 4, 4, 4]); // [] Solution:\nfunction doubleOddNumbers(arr) { return arr.filter((val) =\u0026gt; val % 2 === 1).map((val) =\u0026gt; val * 2); } some # åŸ·è¡Œæ­¥é©Ÿï¼š\nè¿­ä»£åŸæœ¬çš„é™£åˆ—ï¼ˆarrï¼‰ å°æ¯ä¸€å€‹å€¼ï¼ˆvalueï¼‰åŸ·è¡Œä¸€æ¬¡ callback è‹¥è‡³å°‘æœ‰ä¸€å€‹ callback å›å‚³ trueï¼Œå‰‡å›å‚³ true å¦å‰‡ï¼Œå›å‚³ false é‹è¡Œæ©Ÿåˆ¶ï¼š\nfunction some(arr, callback) { for (let i = 0; i \u0026lt; arr.length; ++i) { if (callback(arr[i], i, arr)) { return true; } } return false; } every # åŸ·è¡Œæ­¥é©Ÿï¼š\nè¿­ä»£åŸæœ¬çš„é™£åˆ—ï¼ˆarrï¼‰ å°æ¯ä¸€å€‹å€¼ï¼ˆvalueï¼‰åŸ·è¡Œä¸€æ¬¡ callback è‹¥è‡³å°‘æœ‰ä¸€å€‹ callback å›å‚³ falseï¼Œå‰‡å›å‚³ fale å¦å‰‡ï¼Œå›å‚³ true é‹è¡Œæ©Ÿåˆ¶ï¼š\nfunction every(arr, callback) { for (let i = 0; i \u0026lt; arr.length; ++i) { if (callback(arr[i], i, arr) === false) { return false; } } return true; } ä»¥ä¸‹æˆ‘å€‘ä¸€æ¨£é€éä¾‹å­ä¾†çœ‹å¦‚ä½•å¯¦ä½œ some å’Œ everyï¼š\nWrite a function called hasOddNumber which accepts an array and returns true if the array contains at least one odd number, otherwise it returns false.\nExamples:\nhasOddNumber([1, 2, 2, 2, 2, 2, 4]); // true hasOddNumber([2, 2, 2, 2, 2, 4]); // false Solution:\nfunction hasOddNumber(arr) { return arr.some((val) =\u0026gt; val % 2 === 1); } Write a function called hasAZero which accepts a number and returns true if that number contains at least one zero. Otherwise, the function should return false.\nExamples:\nhasAZero(3332123213101232321); // true hasAZero(1212121); // false Solution:\nfunction hasAZero(num) { return num .toString() .split(\u0026#34;\u0026#34;) .some((val) =\u0026gt; val === \u0026#34;0\u0026#34;); } Write a function called hasOnlyOddNumbers which accepts an array and returns true if every single number in the array is odd. If any of the values in the array are not odd, the function should return false.\nExamples:\nhasOnlyOddNumbers([1, 3, 5, 7]); // false hasOnlyOddNumbers([1, 2, 3, 5, 7]); // false Solution:\nfunction hasOnlyOddNumbers(arr) { return arr.every((val) =\u0026gt; val % 2 === 1); } Write a function called hasNoDuplicates which accepts an array and returns true if there are no duplicate values (more than one element in the array that has the same value as another). If there are any duplicates, the function should return false.\nExamples:\nhasNoDuplicates([1, 2, 3, 1]); // false hasNoDuplicates([1, 2, 3]); // true Solution:\nfunction hasNoDuplicates(arr) { return arr.every((val) =\u0026gt; arr.indexOf(val) === arr.lastIndexOf(val)); } Write a function called hasCertainKey which accepts an array of objects and a key, and returns true if every single object in the array contains that key. Otherwise it should return false.\nExamples:\nconst arr = [ { title: \u0026#34;Instructor\u0026#34;, first: \u0026#34;Elie\u0026#34;, last: \u0026#34;Schoppik\u0026#34; }, { title: \u0026#34;Instructor\u0026#34;, first: \u0026#34;Tim\u0026#34;, last: \u0026#34;Garcia\u0026#34;, isCatOwner: true }, { title: \u0026#34;Instructor\u0026#34;, first: \u0026#34;Matt\u0026#34;, last: \u0026#34;Lane\u0026#34; }, { title: \u0026#34;Instructor\u0026#34;, first: \u0026#34;Colt\u0026#34;, last: \u0026#34;Steele\u0026#34;, isCatOwner: true }, ]; hasCertainKey(arr, \u0026#34;first\u0026#34;); // true hasCertainKey(arr, \u0026#34;isCatOwner\u0026#34;); // false Solution:\nfunction hasCertainKey(arr, key) { return arr.every((val) =\u0026gt; key in val); } Write a function called hasCertainValue which accepts an array of objects and a key, and a value, and returns true if every single object in the array contains that value for the specific key. Otherwise it should return false.\nExamples:\nlet arr = [ { title: \u0026#34;Instructor\u0026#34;, first: \u0026#34;Elie\u0026#34;, last: \u0026#34;Schoppik\u0026#34; }, { title: \u0026#34;Instructor\u0026#34;, first: \u0026#34;Tim\u0026#34;, last: \u0026#34;Garcia\u0026#34;, isCatOwner: true }, { title: \u0026#34;Instructor\u0026#34;, first: \u0026#34;Matt\u0026#34;, last: \u0026#34;Lane\u0026#34; }, { title: \u0026#34;Instructor\u0026#34;, first: \u0026#34;Colt\u0026#34;, last: \u0026#34;Steele\u0026#34;, isCatOwner: true }, ]; hasCertainValue(arr, \u0026#34;title\u0026#34;, \u0026#34;Instructor\u0026#34;); // true hasCertainValue(arr, \u0026#34;first\u0026#34;, \u0026#34;Elie\u0026#34;); // false Solution:\nfunction hasCertainValue(arr, key, searchValue) { return arr.every((val) =\u0026gt; val[key] === searchValue); } reduce # åŸ·è¡Œæ­¥é©Ÿ\nåƒæ•¸ï¼š 1.ï¼ˆå¿…è¦ï¼‰callback å‡½å¼ 1.ï¼ˆå¯æœ‰å¯ç„¡ï¼‰ç¬¬äºŒå€‹åƒæ•¸ï¼ˆoptional parameterï¼‰ è¿­ä»£åŸæœ¬çš„é™£åˆ—ï¼ˆarrï¼‰ å°æ¯ä¸€å€‹å€¼ï¼ˆvalueï¼‰åŸ·è¡Œä¸€æ¬¡ callback è‹¥æœ‰æä¾› optional parameter çš„è©±ï¼Œcallback çš„ç¬¬ä¸€å€‹åƒæ•¸ä¾¿æ˜¯è©² optional parameter å¦å‰‡ï¼Œå‰‡æ˜¯ arr[0]ï¼Œä¹Ÿå°±æ˜¯ç¬¬ 0 å€‹ value é€šå¸¸æˆ‘å€‘ç¨±å‘¼ callback çš„ç¬¬ä¸€å€‹åƒæ•¸ç‚º \u0026lsquo;accumulator\u0026rsquo;ï¼Œå¸¸ç”¨ç¸®å¯«ç‚º acc æ¯æ¬¡å¾ callback å›å‚³çš„å€¼ï¼Œè®Šæˆç‚ºæ–°çš„ accumulatorï¼ æœ¬æ–‡æœ€å¾Œä»‹ç´¹çš„ reduce å’Œå‰é¢ä»»ä½•ä¸€å€‹å‡½å¼åŸ·è¡Œæ–¹å¼æœ‰è‘—å¾ˆå¤§çš„å·®ç•°ï¼Œéœ€è¦é€éä¸åœçš„ ç·´ç¿’æ‰èƒ½ç†Ÿèƒ½ç”Ÿå·§ï¼Œå› ç‚ºé›£åº¦è¼ƒé«˜ï¼Œè®“æˆ‘å€‘å…ˆçœ‹å¹¾å€‹ç¯„ä¾‹ï¼š\nç„¡ optional parameterï¼Œæœ€å¾Œå›å‚³çµæœç‚º 6ã€‚\nconst arr = [1, 2, 3]; arr.reduce((acc, next) =\u0026gt; acc + next); accumulator nextValue returned value 1 2 3 3 3 6 æœ‰ optional parameterï¼Œæœ€å¾Œå›å‚³çµæœç‚º 16ã€‚\nconst arr = [1, 2, 3]; arr.reduce((acc, next) =\u0026gt; acc + next, 10); accumulator nextValue returned value 10 1 11 11 2 13 13 3 16 å¾ç¯„ä¾‹ä¸­å¯ä»¥ç™¼ç¾ï¼Œé€é reduce ä¾†åŠ ç¸½æ•´å€‹é™£åˆ—æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚\nä»¥ä¸‹å†å¤šçœ‹å¹¾é¡Œç·´ç¿’é¡Œå§ï¼\nWrite a function called extractValue which accepts an array of objects and a key and returns a new array with the value of each object at the key.\nExamples:\nconst arr = [{ name: \u0026#34;Elie\u0026#34; }, { name: \u0026#34;Colt\u0026#34; }]; extractValue(arr, \u0026#34;name\u0026#34;); // [\u0026#39;Elie\u0026#39;, \u0026#39;Colt\u0026#39;] Solution:\nfunction extractValue(arr, key) { return arr.reduce((acc, next) =\u0026gt; { acc.push(next[key]); return acc; }, []); } Write a function called vowelCount which accepts a string and returns an object with the keys as the vowel and the values as the number of times the vowel appears in the string. This function should be case insensitive so a lowercase letter and uppercase letter should count\nExamples:\nvowelCount(\u0026#34;Elie\u0026#34;); // { e: 2, i: 1 } vowelCount(\u0026#34;Colt\u0026#34;); // { o: 1 } vowelCount(\u0026#34;hmmm\u0026#34;); // {}; vowelCount(\u0026#34;I Am awesome and so are you\u0026#34;); // { i: 1, a: 4, e: 3, o: 3, u: 1 } Solution:\nfunction vowelCount(str) { const vowels = \u0026#34;aeiou\u0026#34;; return str .toLowerCase() .split(\u0026#34;\u0026#34;) .reduce((acc, next) =\u0026gt; { if (vowels.indexOf(next) !== -1) { if (acc[next]) { ++acc[next]; } else { acc[next] = 1; } } return acc; }, {}); } Write a function called addKeyAndValue which accepts an array of objects, a key, and a value and returns the array passed to the function with the new key and value added for each object.\nExamples:\naddKeyAndValue( [{ name: \u0026#34;Elie\u0026#34; }, { name: \u0026#34;Colt\u0026#34; }], \u0026#34;title\u0026#34;, \u0026#34;instructor\u0026#34; ); // [{ name: \u0026#39;Elie\u0026#39;, title: \u0026#39;instructor\u0026#39; }, // { name: \u0026#39;Colt\u0026#39;, title: \u0026#39;instructor\u0026#39; }] Solution:\nfunction addKeyAndValue(arr, key, value) { return arr.reduce((acc, next, i) =\u0026gt; { acc[i][key] = value; return acc; }, arr); } Write a function called partition which accepts an array and a callback and returns an array with two arrays inside of it. The partition function should run the callback function on each value in the array and if the result of the callback function at that specific value is true, the value should be placed in the first subarray. If the result of the callback function at that specific value is false, the value should be placed in the second subarray.\nExamples:\nfunction isEven(val) { return val % 2 === 0; } const arr = [1, 2, 3, 4, 5, 6, 7, 8]; partition(arr, isEven); // [[2, 4, 6, 8], [1, 3, 5, 7]]; function isLongerThanThreeCharacters(val) { return val.length \u0026gt; 3; } const names = [\u0026#34;Elie\u0026#34;, \u0026#34;Colt\u0026#34;, \u0026#34;Tim\u0026#34;, \u0026#34;Matt\u0026#34;]; partition(names, isLongerThanThreeCharacters); // [[\u0026#39;Elie\u0026#39;, \u0026#39;Colt\u0026#39;, \u0026#39;Matt\u0026#39;], [\u0026#39;Tim\u0026#39;]] Solution:\nfunction partition(arr, callback) { return arr.reduce( (acc, next, i) =\u0026gt; { if (callback(next)) { acc[0].push(next); } else { acc[1].push(next); } return acc; }, [[], []] ); } ä»¥ä¸Šå°±æ˜¯å¹¾å€‹é‡è¦å¸¸è¦‹çš„ Array Methodsï¼\n","date":"20 July 2018","externalUrl":null,"permalink":"/posts/js/js-advanced-array-methods/","section":"Posts","summary":"","title":"Advanced Array Methods","type":"posts"},{"content":"åœ¨æ­¤é™„ä¸Š Elie Schoppik è¬›å¸«çš„ slides\nç‚ºä»€éº¼è¦ç”¨ Jasmineï¼Ÿ # Jasming æä¾›äº†å„å¼å„æ¨£ä¸åŒçš„æ¸¬è©¦æ–¹å¼ åœ¨å„ç¨® JavaScript ç’°å¢ƒä¸‹éƒ½èƒ½é †åˆ©é‹è¡Œï¼ Getting Started # æ–°å¢ html æª”ã€‚ é€£çµ CSSã€JavaScript æª”ã€‚ é–‹å§‹å¯«æ¸¬è©¦ç¨‹å¼ç¢¼ï¼ \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;Jasmine Tests\u0026lt;/title\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.6.2/jasmine.css\u0026#34; /\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;script src=\u0026#34;https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.6.2/jasmine.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.6.2/jasmine-html.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.6.2/boot.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ä¸€äº› keywords # describe - \u0026ldquo;let me describt __ to you.\u0026rdquo; it - \u0026ldquo;let me tell you about __.\u0026rdquo; expect - \u0026ldquo;here\u0026rsquo;s what I expect.\u0026rdquo; æ¦‚å¿µåŒ– # describe('Earth') it('is round') expect(earth.isRound.toBe(true)) it('is the third planet from the sun') expect(earth.numberFromSun).toBe(3) å¯«æˆç¨‹å¼ç¢¼çš„è©± # åœ¨é€™è£¡ï¼Œæˆ‘ä¸€å¾‹ä½¿ç”¨ ES2015 çš„ arrow function ä¾†ä½¿ç¨‹å¼ç¢¼æ›´åŠ ç°¡æ½”ï¼\nlet earth = { isRound: true, numberFromSun: 3, }; describe(\u0026#34;Earth\u0026#34;, () =\u0026gt; { it(\u0026#34;is round\u0026#34;, () =\u0026gt; expect(earth.isRound).toBe(true)); it(\u0026#34;is the third planet from the sun\u0026#34;, () =\u0026gt; expect(earth.numberFromSun).toBe(3)); }); Matchers # Jasmine æä¾›äº†å¾ˆå¤šç¨® matchersï¼Œ åœ¨é€™è£¡å¯ä»¥çœ‹åˆ°å®˜æ–¹è©³ç´°çš„ä»‹ç´¹\ntoBe / not.toBe toBeCloseTo toBeDefined toBeFalsey / toBeTruthy toBeGreaterThan / toBeLessThan toContain toEqual jasmine.any() beforeEach å’Œ afterEach # beforeEach æœƒåœ¨æ¯æ¬¡ it callback å‰å…ˆåŸ·è¡Œï¼Œå¦‚æ­¤å¯ä»¥å¤§ç¬¦é™ä½ç¨‹å¼ç¢¼çš„é‡è¤‡æ€§ èˆ‰ä¾‹ä¾†èªªï¼š\ndescribe(\u0026#34;Arrays\u0026#34;, () =\u0026gt; { let arr; beforeEach(() =\u0026gt; (arr = [1, 3, 5])); // run before each \u0026#39;it\u0026#39; callback it(\u0026#34;adds elements to an array\u0026#34;, () =\u0026gt; { arr.push(7); expect(arr).toEqual([1, 3, 5, 7]); }); it(\u0026#34;returns the new length of the array\u0026#34;, () =\u0026gt; expect(arr.push(7)).toBe(4)); it(\u0026#34;adds anything into the array\u0026#34;, () =\u0026gt; expect(arr.push({})).toBe(4)); }); é¡ä¼¼çš„æ¦‚å¿µï¼ŒafterEach å‰‡æ˜¯åœ¨æ¯æ¬¡ it callback å¾ŒåŸ·è¡Œ ä¸€æ¨£ä¾†çœ‹å€‹ä¾‹å­ï¼š\ndescribe(\u0026#34;Counting\u0026#34;, () =\u0026gt; { let count = 0; beforeEach(() =\u0026gt; count++); afterEach(() =\u0026gt; (count = 0)); // run after each \u0026#39;it\u0026#39; callback it(\u0026#34;has a counter that increments\u0026#34;, () =\u0026gt; expect(count).toBe(1)); it(\u0026#34;gets reset\u0026#34;, () =\u0026gt; expect(count).toBe(1)); }); beforeAll / afterAll let arr = []; beforeAll(() =\u0026gt; (arr = [1, 3, 5])); describe(\u0026#34;Counting\u0026#34;, () =\u0026gt; { it(\u0026#34;starts with an array\u0026#34;, () =\u0026gt; { arr.push(4); expect(1).toBe(1); }); it(\u0026#34;keeps mutating that array\u0026#34;, () =\u0026gt; { console.log(arr); // [1, 2, 3, 4] arr.push(5); expect(1).toBe(1); }); }); describe(\u0026#34;Again\u0026#34;, () =\u0026gt; { it(\u0026#34;keeps mutating the array...again\u0026#34;, () =\u0026gt; { console.log(arr); // [1, 2, 3, 4, 5] expect(1).toBe(1); }); }); ","date":"17 July 2018","externalUrl":null,"permalink":"/posts/tech/testing-with-jasmine/","section":"Posts","summary":"","title":"Testing with Jasmine","type":"posts"},{"content":" å‰è¨€ # å› ç‚ºæœ‹å‹æ¨è–¦ï¼Œå‰é™£å­é–‹å§‹è½‰ç§»ä½¿ç”¨ oh-my-zshï¼Œèµ·åˆè¦ºå¾—ç”¨äº†å¾ˆä¹…çš„ bash å·²ç¶“å¤ å¥½ç”¨äº†ï¼ŒçœŸçš„æœ‰éœ€è¦è½‰ç§»åˆ° zsh ä¸Šå—ï¼Ÿä½†ç¶“éä½¿ç”¨ä¸€å€‹æœˆçš„å¿ƒå¾—ï¼Œæˆ‘èƒ½å‘Šè¨´æ‚¨ ï¼Œzsh \u0026gt; bashã€‚\næœ¬èº«æ˜¯ä½¿ç”¨ macOSï¼Œä¸ç¢ºå®šä½¿ç”¨ Windows çš„æœ‹å‹æ˜¯å¦èƒ½å¤ å¦‚æ³•ç ²è£½ï¼Œzsh ç›¸æ¯” bash æœ‰è¨± å¤šçš„å„ªé»ï¼Œåƒæ˜¯ï¼š\nä¸å€åˆ†å¤§å°å¯«ï¼ˆæ–¹ä¾¿ tab è£œé½Šè·¯å¾‘åï¼‰ èƒ½å¤ ä¸Šè‰²ï¼Œæœ‰å¤šç¨®ä¸»é¡Œ èƒ½å¤ é¡¯ç¤º git branch åˆ†æ”¯ç‹€æ…‹ æ¥ä¸‹ä¾†å°±ä¾†èªª zsh çš„å®‰è£æ–¹æ³•ï¼š\nå®‰è£ zsh å®‰è£ oh-my-zsh å®‰è£ zsh-completions ä¿®æ”¹è¨­å®š å®‰è£æµç¨‹ # å®‰è£ zsh # brew install zsh ä¸¦ä¸”å°‡é è¨­çš„ bash ä¿®æ”¹ç‚º zshï¼š\nchsh -s /usr/local/bin/zsh # change shell to zsh è‹¥æ—¥å¾Œè¦æ›å›åŸå» é è¨­çš„ bashï¼š\nchsh -s /bin/bash # change shell to default bash å®‰è£ oh-my-zsh # git clone https://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh é è¨­è·¯å¾‘æ˜¯åœ¨ ~/.oh-my-zshï¼Œè‹¥æƒ³è£åœ¨åˆ¥è™•è¦ä¿®æ”¹ ~/.zshrcã€‚\nzsh çš„è¨­å®šæª”æ”¾åœ¨ ~/.zshrc å°±åƒ bash çš„è¨­å®šæª”æ”¾åœ¨ ~/.bashrc ä¸€æ¨£ï¼Œè€Œé€™å€‹æª”æ¡ˆ éœ€è¦æˆ‘å€‘è‡ªå·±ç”¢ç”Ÿï¼Œé€™è£¡å»ºè­°ä½¿ç”¨ oh-my-zsh çš„æ¨¡ç‰ˆæ¯”è¼ƒç°¡å–®ï¼š\ncp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc å®‰è£ zsh-completions # brew install zsh-completions å†é€™è£¡é‚„è¦è¨˜å¾—æ‰“é–‹ ~/.zshrc ä¾†åŠ å…¥ zsh-completions çš„è£œå…¨åŠŸèƒ½ï¼š\ncode ~/.zshrc # open ~/.zshrc by VSC åŠ å…¥ä¸€è¡Œ zsh-completions å°æ‡‰çš„è·¯å¾‘ï¼š\n# zsh-completions fpath=(/usr/local/share/zsh-completions $fpath) æœ€å¾Œ rebuild zsh çš„ .zcompdump\nrm -f ~/.zcompdump; compinit ä¿®æ”¹è¨­å®š # åŸºæœ¬ä¸Šåˆ°é€™æ­¥ï¼Œzsh è©²æœ‰çš„åŠŸèƒ½éƒ½å·²ç¶“æœ‰äº†ï¼Œä½†æˆ‘å€‘ä»ç„¶å¯ä»¥åšä¸€äº›è¨­å®šè®“å®ƒæ›´å¥½ç”¨ï¼\nåˆ‡æ›ä¸»é¡Œ # ä¸»é¡Œå€‘åœ¨ ~/.oh-my-zsh/themes ä¸­ï¼Œåˆ‡æ›ä¸»é¡Œçš„æ–¹å¼æ˜¯ä¿®æ”¹ ~/.zshrc çš„ ZSH_THEMEï¼Œé è¨­æ˜¯ robbyrussellï¼Œåƒæˆ‘å°±æ”¹æˆ agnoster\n# THEME Config -ZSH_THEME=\u0026#34;robbyrussell\u0026#34; +ZSH_THEME=\u0026#34;agnoster\u0026#34; é‡æ–°ç™»å…¥çœ‹çœ‹ï¼Œzsh çš„ä¸»é¡Œæ‡‰è©²å·²è¢«æ›´æ›ï¼\nagnoster é€™å€‹ä¸»é¡Œéœ€è¦å°‡ Terminal çš„å­—é«”æ›æˆ Monoco for Powerlineï¼ŒåŸå» æ˜¯æ²’æœ‰çš„ï¼Œ ä»–å¯ä»¥é¡¯ç¤º git ç‹€æ…‹åŠæœ‰ç¾éº—çš„é¡è‰²ä¸»é¡Œã€‚\nå•Ÿç”¨æ’ä»¶ # æ’ä»¶å€‘åœ¨ ~/.oh-my-zsh/plugins ä¸­ï¼Œå•Ÿç”¨æ–¹å¼å’Œä¸»é¡Œé¡ä¼¼ï¼Œä¿®æ”¹ ~/.zshrc çš„ pluginsï¼Œä¾‹å¦‚è¦å•Ÿç”¨ brewï¼Œåªè¦ä¿®æ”¹é è¨­åªæœ‰ git æˆï¼š\n-plugins=(git) +plugins=(git brew) å…¶å®ƒ # zsh ä¸€æ¨£å…·å‚™ alias çš„åŠŸèƒ½ï¼Œåªè¦åœ¨ ~/.zshrc ä¸­åŠ å…¥ï¼š\nalias xx=\u0026#34;path_name\u0026#34; åƒæˆ‘å¸¸é€²ä¸€å€‹å¾ˆé•·çš„è³‡æ–™å¤¾ï¼Œå°±æœƒåŠ å…¥\nalias cdtb=\u0026#34;cd ~/Library/Mobile\\ Documents/3L68KQB4HG~com~readdle~CommonDocuments/Documents/textbook\u0026#34; ä»¥ä¸Šå°±æ˜¯ zsh å¤§è‡´ä¸Šçš„ä»‹ç´¹äº†ï¼\n","date":"30 June 2018","externalUrl":null,"permalink":"/posts/tech/bash-to-zsh/","section":"Posts","summary":"","title":"bash -\u003e zsh","type":"posts"},{"content":"","date":"30 June 2018","externalUrl":null,"permalink":"/tags/zsh/","section":"Tags","summary":"","title":"Zsh","type":"tags"},{"content":"","date":"17 February 2018","externalUrl":null,"permalink":"/tags/latex/","section":"Tags","summary":"","title":"LaTeX","type":"tags"},{"content":" å‰è¨€ # ä½¿ç”¨ LaTeX é€™æ¬¾æ’ç‰ˆå·¥å…·ä¹Ÿæœ‰ 1 å¹´å¤šäº†ï¼Œæœ‰é‘‘æ–¼åœ¨ æŸ¥èªæ³•æ™‚å¸¸é‡è¤‡æŸ¥è©¢é€ æˆæ•ˆç‡ä¸‹é™ï¼ŒåŠ ä¸Šæœ‹å‹çš„å»ºè­°ï¼Œæ–¼æ˜¯å°±ä¾†æ•´ç†ä»½å¸¸ç”¨çš„ LaTeX èªæ³• å§ï¼\nåŸºæœ¬ # ç¨‹å¼ç¢¼ LaTeX ç¨‹å¼ç¢¼ LaTeX a_1 \\(a_1\\) x^{2018} \\(x^{2018}\\) e^{-\\alpha t} \\(e^{-\\alpha t}\\) a^3_{ij} \\(a^3_{ij}\\) e^{x^2} \\ne {e^x}^2 \\(e^{x^2} \\ne {e^x}^2\\) 94 \\times 87 = 8178 \\(94 \\times 87 = 8178\\) æ ¹è™Ÿ # ç¨‹å¼ç¢¼ LaTeX ç¨‹å¼ç¢¼ LaTeX \\sqrt x \\(\\sqrt x\\) \\sqrt{x^2 + \\sqrt y} \\(\\sqrt{x^2 + \\sqrt y}\\) \\sqrt[3]{2} \\(\\sqrt[3]{2}\\) \\surd[x^2 + y^2] \\(\\surd[x^2 + y^2]\\) ç·šã€å‘é‡ # ç¨‹å¼ç¢¼ LaTeX ç¨‹å¼ç¢¼ LaTeX \\overline{m + n} \\(\\overline{m + n}\\) \\underline{m + n} \\(\\underline{m + n}\\) \\vec a \\(\\vec a\\) \\overrightarrow{AB} \\(\\overrightarrow{AB}\\) å…¶å®ƒ # ç¨‹å¼ç¢¼ LaTeX ç¨‹å¼ç¢¼ LaTeX \\underbrace{a + b + \\cdots + z}_{26} \\(\\underbrace{a + b + \\cdots + z}_{26}\\) \\int_0^{\\frac{\\pi}{2}} \\cos\\theta d\\theta \\(\\int_0^{\\frac{\\pi}{2}} \\cos\\theta d\\theta\\) \\frac{x^2}{1 + x + \\cdots + x^n} \\(\\frac{x^2}{1 + x + \\cdots + x^n}\\) x^{\\frac{2}{k + 1}} \\(x^{\\frac{2}{k + 1}}\\) \\sum_{i = 1}^{n} \\(\\sum_{i = 1}^{n}\\) \\prod_\\epsilon \\(\\prod_\\epsilon\\) æ•¸å­¸ç¬¦è™Ÿ # æ•¸å­¸æ¨¡å¼ä¸Šæ¨™ # ç¨‹å¼ç¢¼ LaTeX ç¨‹å¼ç¢¼ LaTeX \\hat a \\(\\hat a\\) \\tilde a \\(\\tilde a\\) \\widehat a \\(\\widehat a\\) \\widetilde a \\(\\widetilde a\\) \\acute a \\(\\acute a\\) \\grave a \\(\\grave a\\) \\dot a \\(\\dot a\\) \\ddot a \\(\\ddot a\\) \\check a \\(\\check a\\) \\breve a \\(\\breve a\\) \\bar a \\(\\bar a\\) \\vec a \\(\\vec a\\) å°å¯«å¸Œè‡˜å­—æ¯ # ç¨‹å¼ç¢¼ LaTeX ç¨‹å¼ç¢¼ LaTeX \\alpha \\(\\alpha\\) \\xi \\(\\xi\\) \\beta \\(\\beta\\) o \\(o\\) \\gamma \\(\\gamma\\) \\pi \\(\\pi\\) \\delta \\(\\delta\\) \\varpi \\(\\varpi\\) \\epsilon \\(\\epsilon\\) \\rho \\(\\rho\\) \\varepsilon \\(\\varepsilon\\) \\varrho \\(\\varrho\\) \\zeta \\(\\zeta\\) \\sigma \\(\\sigma\\) \\eta \\(\\eta\\) \\varsigma \\(\\varsigma\\) \\theta \\(\\theta\\) \\tau \\(\\tau\\) \\vartheta \\(\\vartheta\\) \\upsilon \\(\\upsilon\\) \\iota \\(\\iota\\) \\phi \\(\\phi\\) \\kappa \\(\\kappa\\) \\varphi \\(\\varphi\\) \\lambda \\(\\lambda\\) \\chi \\(\\chi\\) \\mu \\(\\mu\\) \\psi \\(\\psi\\) \\nu \\(\\nu\\) \\omega \\(\\omega\\) å¤§å¯«å¸Œè‡˜å­—æ¯ # ç¨‹å¼ç¢¼ LaTeX ç¨‹å¼ç¢¼ LaTeX \\Gamma \\(\\Gamma\\) \\Sigma \\(\\Sigma\\) \\Delta \\(\\Delta\\) \\Upsilon \\(\\Upsilon\\) \\Theta \\(\\Theta\\) \\Phi \\(\\Phi\\) \\Lambda \\(\\Lambda\\) \\Psi \\(\\Psi\\) \\Xi \\(\\Xi\\) \\Omega \\(\\Omega\\) \\Pi \\(\\Pi\\) ","date":"17 February 2018","externalUrl":null,"permalink":"/posts/tech/latex-syntax/","section":"Posts","summary":"","title":"LaTeX èªæ³•æ•´ç†","type":"posts"},{"content":" å‰è¨€ # åœ¨ä½¿ç”¨ Git æ™‚ï¼Œæˆ‘å€‘å¯èƒ½æœƒæœ‰äº›ã€Œä¸é‚£éº¼æ•´é½Šã€çš„æäº¤è¨˜éŒ„ï¼ˆcommit historyï¼‰ï¼Œé€™æ™‚å‰µ å»ºä¸€å€‹æ–°çš„å€‰åº«ï¼ˆrepositoryï¼‰ï¼Œä¸¦ä¸”å°‡åŸæœ‰è³‡æ–™æ•´ä»½ç§»æ¤éå»æ˜¯å€‹æœ‰æ•ˆçš„è§£æ±ºæ–¹å¼ï¼Œä½†ä¼¼ ä¹ä¸å¤ªè°æ˜ï¼Œæ–¼æ˜¯æˆ‘é–‹å§‹å°‹æ‰¾æ˜¯å¦æœ‰æ›´æœ‰æ•ˆç‡çš„æ–¹æ³•ï¼Œå¥½åœ¨ Stack Overflow ä¸Šé€™ç¯‡æ–‡ç« çµ¦ å‡ºäº†ä¸€å€‹å¯ç”¨çš„è§£ç­”ã€‚\nåˆªé™¤æäº¤è¨˜éŒ„ # è‹¥ç›´æ¥åˆªé™¤ .git è³‡æ–™å¤¾çš„è©±ï¼Œå¯èƒ½æœƒå°è‡´ä½  git å€‰åº«å‡ºç¾å•é¡Œã€‚å¦‚æœæƒ³è¦åˆªé™¤æ‰€æœ‰çš„ æäº¤è¨˜éŒ„ï¼Œä¸”ä¿ç•™ç›®å‰ç¨‹å¼ç¢¼çš„ç‹€æ…‹ï¼Œä»¥ä¸‹çš„æ­¥é©Ÿæ˜¯å®‰å…¨ä¸”å¯è¡Œçš„ï¼š\n# create a temporary branch git checkout --orphan TEMPORARY_BRANCH # add all files git add -A # commit the changes git commit -am \u0026#34;Reset Commit History\u0026#34; # delete the \u0026#34;main\u0026#34; branch git branch -D main # rename the current branch to \u0026#34;main\u0026#34; git branch -m main # forcely update your \u0026#34;main\u0026#34; branch git push -f origin main å¦‚æœæƒ³è¦åˆªé™¤çš„æ˜¯åˆ†æ”¯ï¼Œé‚£éº¼å°‡ä¸Šè¿°æŒ‡ä»¤ä¸­çš„ main æ›æˆé åˆªé™¤åˆ†æ”¯çš„åå­—å³å¯ã€‚\n","date":"16 February 2018","externalUrl":null,"permalink":"/posts/tech/delete-git-history/","section":"Posts","summary":"","title":"åˆªé™¤ Git æäº¤è¨˜éŒ„","type":"posts"},{"content":"","date":"14 February 2018","externalUrl":null,"permalink":"/tags/hexo/","section":"Tags","summary":"","title":"Hexo","type":"tags"},{"content":" å‰è¨€ # è¿‘æ—¥æœ‰æ„Ÿæ²’æœ‰èŠ±äº›å¿ƒæ€å»æ•´ç†å¹³æ™‚çš„ä¸€äº›æ€ç·’ã€æœ­è¨˜ç­‰ç­‰ï¼Œæ–¼æ˜¯æ±ºå®šè¦é–‹å§‹è‘—æ‰‹å¯«éƒ¨è½æ ¼ã€‚ åœ¨ç¶²è·¯ä¸ŠæŸ¥äº†è¨±å¤šè³‡æ–™å¾Œï¼Œæ±ºå®šä½¿ç”¨ Hexo æ‰€æä¾›çš„æœå‹™ï¼Œè£¡é¢ä¹Ÿæœ‰ è¨±å¤šä¸»é¡Œå¯ä¾›æŒ‘é¸ï¼Œè€Œæˆ‘ä½¿ç”¨çš„é€™å€‹æ˜¯ NexTï¼Œä¸€æ¬¾ç”±ä¸­åœ‹äººæ‰€è¨­è¨ˆï¼Œéå¸¸ ç²¾ç·»å…¸é›…çš„ä¸»é¡Œã€‚\nä½¿ç”¨ Hexo ä¾†å»ºç«‹å€‹äººç¶²ç«™ # ç¶²èªŒä¸­çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘æƒ³è¦è«‡è«‡æˆ‘åœ¨ä½¿ç”¨ Hexo å»ºç«‹å€‹äººç¶²ç«™æ™‚ä¸¦ ä¸”ç™¼å¸ƒåˆ° GitHub Pages æ™‚æ‰€é‡åˆ°çš„å•é¡Œï¼Œä»¥åŠæˆ‘æ˜¯æ€éº¼è§£ æ±ºçš„ã€‚\nç’°å¢ƒéœ€æ±‚ # è¦é–‹å§‹ä½¿ç”¨ Hexoï¼Œå¿…éœ€å…ˆç¢ºä¿ä½ çš„é›»è…¦æœ‰ä»¥ä¸‹çš„æ’ä»¶ï¼š\nGit Node.js å®‰è£ Hexo # æˆ‘å€‘å¯ä»¥è—‰ç”± Node.js è¼•é¬†çš„å®‰è£ Hexoï¼š\nnpm install hexo-cli -g åˆå§‹åŒ–å€‰åº«ï¼ˆrepositoryï¼‰ # ä½ å¿…éœ€å…ˆåœ¨ä½ çš„ github å¸³æˆ¶åº•ä¸‹å»ºç«‹ä¸€å€‹æ–°çš„å€‰åº«ï¼Œåå­—å¿…éœ€æ˜¯ \u0026lt;username\u0026gt;.github.io æˆ–æ˜¯ \u0026lt;username\u0026gt;.github.io/\u0026lt;project\u0026gt;ï¼Œå¦å‰‡ä½ å°‡ç„¡æ³•æˆåŠŸç™¼ ä½ˆæ–‡ç« ã€‚\nåˆå§‹åŒ– Hexo è³‡æ–™å¤¾ # å†ä¾†ï¼Œè—‰ç”±ä»¥ä¸‹æŒ‡ä»¤åˆå§‹åŒ– Hexo è³‡æ–™å¤¾ï¼š\nhexo init \u0026lt;project\u0026gt; # create a Hexo project cd \u0026lt;project\u0026gt; # change directory npm install # update something \u0026lt;project\u0026gt; çš„åç¨±æœ‰å…©å€‹é¸æ“‡ï¼š\nå’Œ GitHub ä¸Šçš„åç¨±ï¼ˆwalkccc.github.ioï¼‰ä¸€æ¨£ ä»»æ„åç¨± å®‰è£ä½ˆç½²å™¨ # ä¸åƒå…¶å®ƒéœæ…‹é é¢ç”Ÿç”¢å™¨ï¼ŒHexo æä¾›äº†å®˜æ–¹çš„ä½ˆç½²å™¨ï¼ˆdeployerï¼‰ï¼Œ æˆ‘å€‘å¯ç”±ä¸‹åˆ—æŒ‡ä»¤å®‰è£ä¹‹ï¼š\nnpm install hexo-deployer-git --save å®‰è£ç¾éº—çš„ä¸»é¡Œ # æˆ‘åˆªé™¤äº† Hexo é è¨­çš„ä¸»é¡Œ landscapeï¼Œä¸¦ä¸”å®‰è£ NexT ä¸»é¡Œã€‚\n# delete the default theme rm -rf themes/landscape # clone the theme next git clone https://github.com/theme-next/hexo-theme-next themes/next # delete the .git files in the subdirectory to prevent unwanted conflicts rm -rf themes/next/.git* é€£çµæœ¬æ©Ÿè³‡æ–™å¤¾èˆ‡ GitHub ä¸Šçš„å€‰åº« # è·Ÿè‘— GitHub ä¸Šæ–°å»ºæ–°å€‰åº«çš„å°è¦½ï¼ˆé€™è£¡æœƒåšä¸€äº›ä¿®æ”¹ï¼‰ï¼š\ngit init git add . git commit -m \u0026#39;init\u0026#39; git remote add origin https://github.com/\u0026lt;username\u0026gt;/\u0026lt;project\u0026gt;.git git push -u master ä¿®æ”¹è¨­å®š # åœ¨è³‡æ–™å¤¾çš„æ ¹ç›®éŒ„ï¼Œæ‰“é–‹ /_config.yml ä¸¦ä¸”ä¿®æ”¹å¦‚ä»¥ä¸‹ï¼ˆåœ¨é€™è£¡æˆ‘ç”¨æˆ‘çš„å¸³è™Ÿä¾†åšç¤ºç¯„ ï¼‰\ntitle: Jay\u0026#39;s Blog author: Jay Chen url: http://walkccc.github.io/blog root: /blog/ theme: next deploy: type: git repo: https://github.com/walkccc/blog.git branch: gh-pages ç¢ºä¿ä½ çš„ branch å±¬æ€§å¡«å¯«çš„æ˜¯ masterï¼ˆéå¸¸é‡è¦ï¼ï¼‰GitHub ä¸å…è¨±ä½¿ç”¨åˆ†æ”¯ï¼ˆå¦‚ ï¼šgh-pagesï¼‰ç™¼å¸ƒç¶²é åœ¨ \u0026lt;username\u0026gt;.github.ioï¼ˆä½†å¦‚æœä½ æ˜¯ç™¼å¸ƒåœ¨ä¾‹å¦‚ ï¼š\u0026lt;username\u0026gt;.github.io/blog ä¸‹ä¾¿å¯ä»¥ï¼‰ï¼Œå…„å¼Ÿæˆ‘å°±æ˜¯ä¸çŸ¥é“é€™é»ï¼Œæ‰€ä»¥åœ¨é€™è€—è²»äº†è¨± ä¹…æ™‚é–“ â‹¯â‹¯ å›§ã€‚\næº–å‚™ä½ˆç½²ç¶²é ï¼ # hexo clean # hexo clean the folder first (highly recommended) hexo generate # generate the \u0026#34;public\u0026#34; files (Alias: hexo g) hexo deploy # deploy it! (Alias: hexo d) å¾Œé¢å…©è¡Œç”Ÿæˆï¼ˆgenerateï¼‰å’Œä½ˆç½²ï¼ˆdeployï¼‰çš„æŒ‡ä»¤ä¹Ÿå¯å¯«æˆä¸€è¡Œï¼š\nhexo deploy -g æ›´å¤šç›¸é—œçš„æŒ‡ä»¤å¯ä»¥\nhexo --help æ–‡ç« æ‰€ä½¿ç”¨çš„ .md æª”ä½ç½®æ˜¯åœ¨ /source/_posts ä¸­ï¼Œæ’åºçš„æ–¹å¼æœƒæ ¹æ“š date ä¾†æ±ºå®š ã€‚ç¨å€™ç‰‡åˆ»ï¼Œä½ çš„ç¶²é å°‡æœƒè¢«ç™¼ä½ˆåœ¨ï¼šhttps://\u0026lt;username\u0026gt;.github.io/ æˆ–æ˜¯ https://\u0026lt;username\u0026gt;.github.io/\u0026lt;project\u0026gt; ä¸Šï¼\næ­å–œä½ ï¼Œä½†å…ˆåˆ¥æ€¥ï¼Œè®“æˆ‘å€‘ä¾†åšé»å„ªåŒ–ã€‚\nå¢åŠ æ•¸å­¸å¼æ”¯æ´ # NexT ä¸»é¡Œå¾ˆè²¼å¿ƒï¼Œé è¨­è£¡å°±èƒ½æ”¯æ´æ•¸å­¸å¼äº†ï¼Œä½†é‚„æ˜¯éœ€è¦ä½¿ç”¨è€…åšä¸€äº›èª¿æ•´ï¼Œåœ¨ /themes/next/_config.yml ä¸­ enable ä½ çš„ math è¨­å®šç‚º trueï¼Œä¸¦ä¿®æ”¹ CDN ä½ç½®ï¼š\nmath: enable: true cdn: //cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML æœ‰ä¸€é»è¦ç‰¹åˆ¥æ³¨æ„çš„æ˜¯ per_page å±¬æ€§åœ¨é€™æˆ‘æ˜¯ç¶­æŒåŸæœ¬çš„ trueï¼Œé€™æ¨£çš„è©±æˆ‘åªåœ¨æˆ‘ æƒ³è¦åŠ å…¥æ•¸å­¸å¼çš„é é¢æ‰è¼‰å…¥ javascriptï¼Œä¾‹å¦‚åƒé€™é çš„æ¨™é¡Œå°±æœƒé•·çš„åƒï¼š\n--- title: ä½ å¥½ï¼Œä¸–ç•Œï¼ date: 2018-02-14 mathjax: true --- ä¾†è©¦è©¦ç°¡å–®çš„å¹¾è¡Œæ•¸å­¸å¼ï¼š\n$$\\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}$$\n$$ \\begin{aligned} \\min\\{c, a, t\\} \u0026amp; \\mbox{ if \\(y \u0026lt; 0\\)} \\\\ \\max\\{d, o, g\\} \u0026amp; \\mbox{ if \\(y \\ge 0\\)} \\end{aligned} $$\nåœ¨é€™æˆ‘ç™¼ç¾äº†åœ¨æ›è¡Œæ™‚ï¼Œ\\\\, {} ç­‰è·³è„«å­—å…ƒï¼ˆescape characterï¼‰ï¼Œæœƒå’Œ html èªæ³• ç›¸è¡ï¼Œæ‰€ä»¥æˆ‘å€‘è¦åšé»è™•ç†ã€‚\næ•¸å­¸å¼æ¸²æŸ“è·³è„«å­—å…ƒè™•ç† # Hexo é è¨­ä½¿ç”¨ hexo-renderer-marked å¼•æ“é€²è¡Œæ¸²æŸ“ï¼Œä½†å°æ–¼åº•ç·šã€åæ–œç·šã€ä¸­æ‹¬è™Ÿå®š ç¾©äº†è½‰ç¾©ï¼Œå®¹æ˜“èˆ‡ MathJax æ•¸å­¸å…¬å¼æ¸²æŸ“æ™‚æ‰€è™•ç†çš„å­—ç¬¦é€ æˆè¡çªï¼Œå»ºè­°å¯ä»¥è®Šæ›´æ¸²æŸ“å¼• æ“ç‚ºä¸‹åˆ—é¸é …ä¸­å…¶ä¸­ä¸€å€‹ï¼š\nhexo-renderer-kramed hexo-renderer-pandoc npm uninstall hexo-renderer-marked --save # uninstall the hexo-renderer-marked npm install hexo-renderer-kramed --save # install the hexo-renderer-kramed é™¤æ­¤ä¹‹å¤–ï¼Œé‚„éœ€è¦æ”¹è®Šè¡Œå…§å…¬å¼çš„è½‰ç¾©è¨­å®šã€‚ä¿®æ”¹ ./node_modules/kramed/lib/rules/inline.jsï¼š\n// escape part - escape: /^\\\\([\\\\`*{}\\[\\]()#$+\\-.!_\u0026gt;])/, + escape: /^\\\\([`*\\[\\]()#$+\\-.!_\u0026gt;])/, // em part - em: /^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/, + em: /^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,` è¨˜å¾—è¦\nhexo clean å¦å‰‡æ•¸å­¸å¼é‚„æ˜¯æœƒç„¡æ³•æ¸²æŸ“ã€‚\nå‚™ä»½æœ¬æ©Ÿä¸Šçš„è³‡æ–™å¤¾ # åœ¨æˆ‘åŠŸä½ˆç½²æˆ‘å€‘çš„ç¶²é å¾Œï¼ŒGitHub ä¸Šæœ‰çš„åªæœ‰ç¶²é æ‰€éœ€è¦çš„æª”æ¡ˆï¼Œä½†å¦‚æœå“ªå¤©æ›äº†é›»è…¦ï¼Œ æƒ³è¦åœ¨åˆ¥å°é›»è…¦ä¸Šä¿®æ”¹ï¼Œäº‹æƒ…å°±æœƒè®Šå¾—éå¸¸éº»ç…©ã€‚\næˆ‘å€‘å¯ä»¥é‹ç”¨ GitHub çš„åˆ†æ”¯ï¼ˆbranchï¼‰åŠŸèƒ½ä¾†å‚™ä»½æ ¹ç›®éŒ„è³‡æ–™å¤¾ã€‚\nå¯ä»¥åœ¨ GitHub ä¸Šå°ˆé ä¸Šæ–°å¢ä¸€å€‹å« sources çš„åˆ†æ”¯ \b æˆ–æ˜¯åœ¨æ ¹ç›®éŒ„é€é command line æŒ‡ä»¤ï¼š git checkout -b sources # create the branch on your local machine and switch in this branch git push origin sources # push the new branch: sources on github git add . # add all files in root folder git commit -m \u0026#39;first backup sources\u0026#39; git push --set-upstream origin sources å¤§åŠŸå‘Šæˆï¼Œé–‹å§‹å¯«éƒ¨è½æ ¼å§ï¼\n","date":"14 February 2018","externalUrl":null,"permalink":"/posts/tech/hexo-building/","section":"Posts","summary":"","title":"Hexo Building","type":"posts"},{"content":"","date":"14 February 2018","externalUrl":null,"permalink":"/tags/static-site-generator/","section":"Tags","summary":"","title":"Static Site Generator","type":"tags"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"}]